@daffl I just found a way of how to do it!
"Hello guys, Please I’m having an issue implementing a double authentication (if I’m permitted to call it that) on my feathers app. The issue is, I have a user model and also a worker model in which they both contain a unique email field. So when logging in, if the client specifies worker: true in the request body, I want it to lookup the worker table and not the default user table. I have tried a lot of methods to bypass this, the simplest of which is having a beforeHook for my authentication endpoint:
if (hook.data.worker) {

    let config = hook.app.get('authentication');

    config.service = 'worker';

    config.local.service = 'worker';

    hook.app.set('authentication', config);

    return hook;
}

But I noticed this didn’t change anything probably because app.configure(authentication) has auto-configured the app to lookup the user table the first time the server is lifted. Please, how do I go about this? I have done a lot of googling around and reading docs. Thanks."
"@swarthout in the feathers-apollo example, in the graphiql editor how do i use the authentication token thats returned by new user mutation, when working to create a new post?"
Hi guys. Just starting with feathersjs and trying to assess it for a project. It's a react native app that needs a back end and I would love to go with Graphql on this one. But I'm a bit stuck on authenticating with social. I'm using react-native-fbsdk in-app and can get an access token but after that I'm pretty unsure how to proceed. Any tips on where should I do my reading?
"Hi guys, I need to share a common instance of a third party sdk between various services... how can I do it? Right now I intialize it inside every service where I need it..."
"export default function () {
	const app = this
	const config = app.get('auth') || {}
	// const jwtKey = 'jwt'
	// const jwtConfig = config[jwtKey] || {}

	app.configure(authentication(config))
	app.configure(jwt())

	const auth0axios = Axios.create({
		baseURL: 'https://XXXXX.auth0.com/',
		timeout: 1000,
		headers: {'X-Custom-Header': 'foobar'}
	})

	const auth0Hook = () =>  {
		return async (hook) => {
			if (hook.data.strategy !== 'auth0')
				return

			try {
				const auth0response: any = await auth0axios.get('/userinfo', {
						headers: {Authorization : 'Bearer ' + hook.data.accessToken }
					})

				if (!auth0response.data.email_verified)
					return

				// Clear the hook
				delete hook.data

				// Let's see if the user already exists
				// and if not, create the user
				const usersService = app.service('users')
				const userResponse = await usersService.find({auth0: {id : auth0response.user_id}})
				const user = userResponse.data[0] ||
					await usersService.create({
						email: auth0response.data.email,
						auth0 : {
							id : auth0response.data.user_id
						}
					})

				const token = await app.passport.createJWT({
					userId: user._id
				}, {
					secret: 'This_will_be_replaced_in_production_environment'})
				console.log('GEN TOKEN', token)
				hook.data = {strategy: 'jwt',
							accessToken : token}
				return hook

			} catch (ex) {
				console.log('EXCEPTION', ex)
			}
		}
	}

	app.service('auth').hooks({
		before: {
			create: [
				auth0Hook(),
				authentication.hooks.authenticate(config.strategies)
			],
			remove: [
				authentication.hooks.authenticate('jwt')
			]
		}
	})
}
I am trying to implement an authorization hook that takes an Auth0 token, fetches the user data from Auth0 and create a local user. Unfortunately, the above does not successfully then pass on the jwt token to the jwt strategy. Any pointers on how to do this sort of token swapping?"
"can someone help me understand how to do a nested populate. I have read the docs but still can not get it to work. example result data:
{
  event: {
   nameId: 123....,
  } 
}

I have my populate schema : { include: [{ service: 'events', nameAs: 'event.name', parentField: 'event.nameId', childField: '_id', } ] } It get an error on client side of Cannot read property 'push' of undefined. Any help would be greatly Appreciated"
"New to featherjs. So I'm following this tutorial: https://blog.feathersjs.com/a-real-time-chat-frontend-with-plain-javascript-and-feathers-34e92bcce386. When I run the server it has two undefined users with message ""hello world"". Is this being stored in a file somewhere or locally generated? Instead of that how would I be able to parse through a file like fakedata.json with something like { ""messages"": [ { ""id"": 1, ""author"": ""Jane"", ""timestamp"": 1421953410956, ""content"": ""Hello!"" }, { ""id"": 2, ""author"": ""Sam"", ""timestamp"": 1421953434028, ""content"": ""How are you?"", ""last_edited"": 1421953454124 }, { ""id"": 3, ""author"": ""Jane"", ""timestamp"": 1421953433276, ""content"": ""I'm in SAT!"" } ], }
The Feathers documentation has a guide for creating a chat API including a simple frontend. But how do you integrate it with other…"
"To simulate that there were past messages in the chat already when you first join and I keep track of those message with ids. I want to be able to show the information from this json if possible: { ""messages"": [ { ""id"": 1, ""author"": ""Jane"", ""timestamp"": 1421953410956, ""content"": ""Hello!"" }, { ""id"": 2, ""author"": ""Sam"", ""timestamp"": 1421953434028, ""content"": ""How are you?"", ""last_edited"": 1421953454124 }, { ""id"": 3, ""author"": ""Jane"", ""timestamp"": 1421953433276, ""content"": ""I'm in SAT!"" }, { ""id"": 4, ""author"": ""Jane"", ""timestamp"": 1421953454129, ""content"": ""Flight is delayed. 😛 San Antonio TSA was the friendliest I've ever encountered, though. And I have a hamburger, a beer, and decent wifi."" }, { ""id"": 5, ""author"": ""Sam"", ""timestamp"": 1421953475813, ""content"": ""Not bad."" }, { ""id"": 6, ""author"": ""alex"", ""timestamp"": 1421953485810, ""content"": ""do you still need a ride from the airport?"" }, { ""id"": 7, ""author"": ""Jane"", ""timestamp"": 1421953502796, ""content"": ""@alex: Yeah, likely will get my bags after BART stops running. They're saying the ETA is 11:40pm now. Is that too late for you?"", ""last_edited"": 1421953556411 }, { ""id"": 8, ""author"": ""Sam"", ""timestamp"": 1421953569386, ""content"": ""Liana says hi!"" }, { ""id"": 9, ""author"": ""alex"", ""timestamp"": 1421953569386, ""content"": ""that's fine"" }, { ""id"": 10, ""author"": ""Carly"", ""timestamp"": 1421953591994, ""content"": ""https://medium.com/the-nib/the-truth-about-the-internet-fb8864c92185 oh dear"" }, { ""id"": 11, ""author"": ""alex"", ""timestamp"": 1421953601859, ""content"": ""i'm on like aleutian time these days :P"", ""last_edited"": ""1421953605859"" }, { ""id"": 12, ""author"": ""Jane"", ""timestamp"": 1421953638978, ""content"": ""Hi Lili! How did your art show go? :D"" }, { ""id"": 13, ""author"": ""Carly"", ""timestamp"": 1421953496000, ""content"": ""Wheeeeee."" }, { ""id"": 14, ""author"": ""Sam"", ""timestamp"": 1421953733618, ""content"": ""@Carly: Pretty much."" } ], ""last_seen"": 1421953648024 }
it will scare you"
"So, a really noob questions I think, but really do not come out from this. Setup of my backend project: with feathers-cli, all system go. But I've no clue how to correct Login and get a jwt token, I've setup authentication jwt succesfully"
i believe this has something to do with the return result not being an object. I have lean:true for this service. anyone know how to handle this?
"Hi Guys! I´m trying to do the following: Summary: When i call a service (/properties/id), i will like to bring more information to the response from other services. I´m using mongoose and mongodb. Exact need: My service (/properties/id) will bring me fields like ( city_id, actiontype_id,country_id) i will like to take those id´s and get the name of each field from each service, For example get from (/actions) the name of the action that matches that id, from (/cities) the name of the city that matches that id and the same with the country. I think this should be done in the before hook of /properties and i also took a look to the docs but i only find populate and it just wont work or i dont know how to use it. Please help me know to get the response with the properties fields but also with the other fields. Thank You to all"
steve uploaded a file: Untitled
"How do I use the find method to query nested data? eg. {id: '1', details: {email: 'email@email.com'}}. Tried:
const email = 'email@email.com'
app.service('users').find({query: {details: {email}}})
"
so how do i get the actual value?
how do I use $unset when updateing an object (using mongoose)?
"How can I query for a document using .find() then obtain it's id so that I can remove it? This is what I'm trying to do:
contact.remove(contact.find({ myId : '000000'}).then(data => data.myId == 'someID'));
"
"I managed to find a syntax that works for this case! Looks like the Sequelize syntax passes basically unchanged to the db adapter, so we can do:
.find({
  query: {
    body: { 
      $contains: {
        tags: ['baz']
      }
    }
  })

Note: They key difference from what I was trying is that the $contains operator needs to be raised above the array type. (This is how the underlying Postgres syntax works, too)"
"You could probably arrange to do the same thing through Mongoose models, but it’s not how I would do it."
"how-do-i-create-custom-methods"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-create-custom-methods"
"Hi, how do I build my backend when i have already finish it on my local machine. I usually run npm run build in react apps but now i get ""npm ERR! missing script: build"" on feathersjs"
> Does feathers blob upload files through socket transport ? Not currently no. We also have a proposal up discussing streams and uploading files via sockets https://github.com/feathersjs/feathers/issues/609 > Should I handle it through hooks inside the uploads service ? Or do another service request from the client to set the entity? Depends on how you want to do it and upload/storage requirements of the file. Either way would work. Usually the flow we do when uploading to S3 is hit the uploads service which uses feathers-blob. You’ll get back either an S3 bucket path or image url. Then the client sends a create or patch to the associated service to store the bucket path or image url.
"@danielevz If you did not use import export statements on the server, your server code will run as is. If you did, (a) run Bable on it. If you don't know how to do that, look at package.json in any Feathers repo for script: { release:patch or (b) convert the import/eport to require and module.exports
Hi, how do I build my backend when i have already finish it on my local machine. I usually run npm run build in react apps but now i get ""npm ERR! missing script: build"" on feathersjs"
"Hi all, wondering if anyone has time for a quick question... I'm about to setup auth with feathers and starting with making sure everything is using https. I have grabbed my ssl cert from letsencrypt ... what's next? How do I serve feathers as https rather than http and make it use my new cert?"
How do I set the config var mongoClient in production?
"Just one last question, how do I store the ID of the database record that contains the ""logged in"" user after they authorize at the provider?"
How do I return data in a hook manually? When I used the iff and else common hooks my application doesn't return any data when the condition is met and the authenticate hook is not called.
"Also, how do I set a unique constraint with MongoDB?"
"hey guys, quick question. if I have a set of objects like this in my user collection { user:Id, items:[{id,content},{id:content},{id:content}] } and I want to do calls to feathers to just push, update and remove items from the items array on user, how do I do this in feathers?"
In my case I do have authentication for website and mobile user both so how to manage ? Both the authentication are different..
"hi guys, how do I access headers of a request from a service?"
"This tells me that there is no auth token on the server side, when I try to make this find call from the client side. How do I include the auth token I stored in localStorage, now?"
@brspnnng Have you had any luck on this? I was just starting to look into trying to do the same thing but have no idea how to do it.
"There also is how-do-i-set-up-https"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-set-up-https 😉"
"Another question for all, in server-side module tests I would like to simulate the population of the user by feathers authentication module, how to do that ? Do I need to generate a custom token by myself then passing it to all service calls in the tests as params manually ?"
"@brspnnng On the server you can add methods to the service but they will never be exposed to the client. Usually it can be solved by either adding query parameters or a separate helper service (how-do-i-create-custom-methods"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-create-custom-methods should have links to further reading)."
"when using the populate hook, how do I let it bypass the authenticate hook? In most cases I want roles to be private, but if a user is created I want the roles to be populated"
"hey guys, little lost again ... how do I do a query for many objects with different ids? I have tried the following and many variations with no effect ... client.service(""my-mongo-collection-name"").find({ query: { _id: { $in:[""id1"", ""id2"", ""id3""] } })"
"I have two questions about feathers-blob, using S3: - How can I upload to a different path using feathers-blob? The key field passed to s3-blob-store seems to always be file_hash.ext, without the possibility to add a folder path before - If I upload a Multipart file to my server, and I want to server to upload it to S3. Do I base64-encode it first on the server (as per the File uploading tutorial), pass it to feathers-blob, which himself decodes it to a buffer, and upload that buffer to S3? Looking at the code seems that it's done like this, seems like a lot of effort."
How do I get the user object client side? I tried the answer here https://github.com/feathersjs/feathers-authentication/issues/131 but didn't seem to work.
Because now it doesn't.. and I can't seem to figure out how to do just that
"@jarnojellesma - Right, but how do I now limit the module.exports version to a single service method?"
"ok, now, how do I test in the front-end if they are logged in?"
I also took a while to figure out the frontend authentication part. But when I first found out how to do it it was extremely easy.
"This might sound dumb, but how do I send params with a service.get..?"
"Hello all. Noob to feathers. I have a question regarding doing a mongodb $push on a JSON field using feathers. I read through a issue post on github https://github.com/feathersjs/feathers-mongoose/issues/165#issuecomment-282206324. There is some code at the bottom of the page that could be used to do the $push. My question is where would this code go? In a service hook? Or how can I make this work through a hook. Referenced code:
// Create a dummy Message
app.service('messages').create({
 text: 'Message created on server',
 items: [ 'a' ]
}).then(function(message) {
 return app.service('messages').update(message._id, {
   $push: { items: 'b' }
 });
}).then(message => console.log('Created and pushed message', message));
This part of the code I assume
app.service('messages').update(message._id, {
   $push: { items: 'b' }"
"how-do-i-access-the-request-object-in-hooks-or-services"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-access-the-request-object-in-hooks-or-services"
"this might help how-do-i-create-channels-or-rooms"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-create-channels-or-rooms"
"hey, I've got a service set up which is essentially a key:value list of settings stored in a mongodb. The rest of my feathers app relies on these settings - how can I ensure these settings are loaded before trying to do anything else in the app? Can I hook/override the feathers ready functionality?"
how do I populate the whole object that is returned from the service instead of assigning it to a field
"Hello guys. I am facing a little problem here. I have an array of records that I want to insert/update in the database, and for each of these records I also need to insert/update data in another table. How do I do this with feathers? I am really lost here."
"hi all, i couldn't understand how to do one2many relations"
"That help to insert the dependence but how do I keep track of the data being inserted? Like in C# I would do something like this:
foreach(var item in myArray){
       item.id = methodThatInsertAndReturnId(item);
       // insert in other tables and etc...this could be in a hook I think
}
return myArray;   // With all generated Ids after insert.

But with feathers is all async. How would I do something similar?"
How do I pass a JWT to feathers.authenticate()?
"@daffl Yes, I'm aware I can do it on the featherjs frontend . Just wandering how to do it on backend, when frontend is not using feathersjs framework"
"How I could've done it on a regular express service was:
function(req, res) {
  var csv = GET_CSV_DATA

  res.setHeader('Content-disposition', 'attachment; filename=testing.csv');
  res.set('Content-Type', 'text/csv');
  res.status(200).send(csv);

}

But not sure how to do this with a feathers service."
"how-do-i-access-the-request-object-in-hooks-or-services"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-access-the-request-object-in-hooks-or-services"
"@leob those are the legacy docs, but even then @daffl shows on SO how to do it with legacy feathers. @zusamann This should help: how-to-response-a-plain-text-in-feathersjs-websocket-api"" target=""_bank"">https://stackoverflow.com/questions/44818726/how-to-response-a-plain-text-in-feathersjs-websocket-api
I define a feathers service api as below: class Monitor { find(_) { const metrics = prom.register.metrics(); log.info(metrics); return new Promise((resolve) => { resolve({t..."
"Hi all, one question please, in case I would like to implement 'user is typing' functionality in my chat app, what would be the right way to do this? How the client side is sending the event that the user typed something?"
"Feathers services are transport independent. Besides websockets we do want to support other transports in the future. Shoehorning the HTTP request/response cycle into those does not make a lot of sense (in fact, I believe that it’s mostly in the way of thinking about your application architecture in a more abstract way). Hooks are Feathers way to do the same thing that Express middleware does (I wrote about the design pattern behind both at https://blog.feathersjs.com/api-service-composition-with-hooks-47af13aa6c01).
In this quick post I’d like to talk about how to bring the continuation-passing style (known from Express middleware) and traditional…"
"Hi guys, I’m new at Feathers, I’m having a problem when testing it, I’m making the basic test to create and update users, in the end in the after function I remove the users from the database, the problem is that it keeps not working as the remove function of the model has a hook that it states that it must be authenticated to remove users, as obviously I’m not passing the Token on Users.remove(null, () => {}), how can I do this test?"
"@pmiralopes Best might be to authenticate the user in the test. Otherwise you can consider making your test call like service.remove(... , { _isTest: true } } and conditioning your auth hook like iff(context => !context.params._isTest, authhook()).
Hi guys, I’m new at Feathers, I’m having a problem when testing it, I’m making the basic test to create and update users, in the end in the after function I remove the users from the database, the problem is that it keeps not working as the remove function of the model has a hook that it states that it must be authenticated to remove users, as obviously I’m not passing the Token on Users.remove(null, () => {}), how can I do this test?"
"I'm trying to use an existing table. The default knex model doesn't really have a name. I actually have no idea how features is determining what to use.
/* eslint-disable no-console */

// source-types-model.js - A KnexJS
//
// See http://knexjs.org/
// for more of what you can do here.
module.exports = function (app) {
    const db = app.get('knexClient')

    // db.schema.hasTable('source-types').then(exists => {
    //     if(!exists) {
    //         db.schema.createTable('source-types', table => {
    //             table.string('name').primary()
    //         }).then(
    //             () => console.log('Updated source-types table'),
    //             e => console.error('Error updating source-types table', e)
    //         )
    //     }
    // })

    return db
}
"
"how-do-i-do-associations"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-do-associations"
🙋 ❓ how do I populate a field memberCount on after hook of a service? This memberCount will store the count of a collection exposed as a service
How do I dispose of a feathers client after I am done using it ?
"🙋 ❓ How do I populate an object e.g.
parent: {
  channelId: '123',
  meta: {}
}

I want to replace the populate parent with the channel details The output I'm expecting is
parent: {
  id: '123',
  name: 'Channel Name',
  meta: {}
}
"
How do I install plugins in Feathers?
❓ 🙋 How do I disable pagination from client side if the $limit is just 1?
❓ 🙋 I made a hook for a service to create a resource in a collection (it succeeds) but the service fails to create a resource. Now I want to revert the created resource in the hook. How do I do it and at what point? Should I just do a softDelete in an after hook or should I do a hard delete?
"❓ 🙋 I've two services channels and messages mounted to two routes i.e. /channels and /channels/:channelId/messages I've set setSlug('channelId', 'query.channelId') in the before hook of the messages. When I make a GET request to /channels/123/messages, it is handled by channels service instead of messages service. How do I make it consider the messages service instead of channels service at first."
"❓ 🙋 I've messages service mounted at /channels/:channelId/messages route and i'm using setSlug. How do I also mount the same service to /messages route? is this the correct way?
const serviceObj = createMessageService();
app.use('/channels/channelId/messages', serviceObj)
app.use('/messages', serviceObj)

it looks like this works but is that the right way to do it?"
I was meaning from within a hook I’ve written 🙂 I think I’ve worked out how to do it - with the hook.params.sequelize object and deep relation queries 🙂
Ah ok - thanks for your reply! that’s interesting to see I can pass through queries into the association itself. How do I translate that into hook.params.query format?
"And how do I specify include: [{ model: SomeModel, where: { foo: ""bar"" }}] in the hook.params.query object?"
"^ How can I do that with Object.assign(hook.params.query, { something: ""else"" });?"
"Hi all, a quick question with regards to dates and querying. I have a collection stored in mongodb with a string property containing a date in this format ""datePublishedEstimated"" : ""2017-07-18T00:00:00Z"", I would like to use feathers to query this data and get the latest. Any ideas how to do this?"
"hello. I am new to node. I'm using the feathers-starter-react-redux-login-roles and am hooking up the features-mailer with smtp service. I have a seemingly trivial question, but can't quite figure it out. How do I access ""app"" in https://github.com/eddyystop/feathers-starter-react-redux-login-roles/blob/master/server/helpers/emails.js? adding ""const app = this"" gives me something else"
Another question. If I'm using mongodb as service backend - how do I create a new entity which reference another mongodb document if I know the target's _id?
"Hi, I have an entity that contains an array of id's and I need to populate that entity with the referenced id's, how can I do it using populate hook? Thanks!"
Yeah. Seems like it was something to do with how the OAuth2 plugin was written. I just can’t remember. So it might be possible it’s not needed.
ok. I am dying here. How do I call authenticated services from within the before hook of an authenticated service.
"We realized a little bit ago that, that code branch doesn’t get triggered so you can use that as a general rule of what to do but @marshall is correct, you want to set up a hook to intercept a create and patch the user based on your criteria. When doing redirect based Oauth we need to sort out how we determine in the user is authenticated already. I don’t think that currently happens because during the OAuth flow I don’t think we check the JWT. That’s why the code branch doesn’t get fired. Currently we haven’t worked on something where we need to link multiple social accounts (lots of internal enterprise apps lately) so happy to take PRs if you can get it sorted @lowm4n 😄"
hello everyone! I'm using feathers rest and have come up with a problem I can't seem to figure out. How do you query for null dates? Ex:users?email_confirmed_at[$ne]=null I get a postgres error saying Invalid Date
"hi, not sure if this is mentioned in the docs. How do I restrict a service to only certain actions, for ex, only GET and POST allowed for messages resource."
"hey @daffl! i would like to use 'feathers-reactive' in nuxt.js. i'm using it as a plugin and bind the service to a store variable so i can use it in my vue files:
async asyncData ( context ) {

  let data = await context.store.tickets.find()

  return {
	items: data
  }
}
this works like a charm but is not very reactive 😉 additionally i want to put it into the nuxt.js store so that i can access the service on every page. do you have an idea or example how i can use .subscribe() and bind it to a store variable? THX!!"
"hi, i'm using nedb as a service ... as shown in the guide... i wanna query it for showing something using d3.... how to do so?"
"aaa yes, I can of course do this if I disable all the authentication hooks. but right now I have the following roles:[""editor""] on some of my users and I have hooks preventing me from querying for users I assume I need to add a role of ""editor-admin"" to a few select accounts then I need a hook to allow people with this role to search for users with the editor role but I am confused as to how to do this?"
"I would look up how to do it with Mongoose. You’ll probably have to use an aggreate (see how-to-use-group-by-with-find-in-mongoose"" target=""_bank"">https://stackoverflow.com/questions/43457380/how-to-use-group-by-with-find-in-mongoose). You can always access the Mongoose model via service.Model and modify the result in a hook to what you need by setting hook.result
I have collection named ""listing"" with fields such as metadata and status. metadata is a object containing user object inside and status is a string. The structure looks like this, { ""status"": """
"which I could do from how-do-i-forward-a-docker-machine-port-to-my-host-port-on-osx"" target=""_bank"">https://stackoverflow.com/questions/36286305/how-do-i-forward-a-docker-machine-port-to-my-host-port-on-osx
I’m delivering a private docker container in my company and want my colleagues to be able to access in our internal network, the problem is that my guest OS is OSX and as so I can only access my"
"I’m trying to implement email verification thanks to Feathers Authentication Management. I’m following this article how-to-setup-email-verification-in-feathersjs-72ce9882e744"" target=""_bank"">https://blog.feathersjs.com/how-to-setup-email-verification-in-feathersjs-72ce9882e744. I totally understand the process I’m just lost with were I have to put the different part of code in feathers. E.g. Where do I have to setup the Mail service ? Which file ?
(I am working on a boilerplate for Feathers-Vue that is semi-finished but you can begin working with it that uses the techniques shown in…"
"@harmony For example, how do I return “/index.html” at “/timeline” and “/account”? We are developing Single Page Application."
"@smixx what do you mean, this is a before hook. how am i suppose to set it to the result?"
I don't know how the bindings to sequelize looks .. but with mongo/mongoose you have to do $where:{createdAt: '2017-08-13'}
"hey guys, how do you retrive data like query select * from roles where DATE(""createdAt"") = '2017-08-13' in feathers? i try localhost:3030/roles?createdAt=2017-08-13 but not work. I guess its not working because it has different data type(datetime), so i create before hook to cast datatype to date. something like this if (hook.params.query.createdAt) { const where = Sequelize.where( Sequelize.cast(Sequelize.col('roles.createdAt'), 'DATE'), hook.params.query.createdAt); hook.params.query.where = where; }. but none of those is working. Any solution?"
@luc.claustres so... i need to use emits to test the socketio services? How do I use the feathers client to test it?
And how do I scale feathers on socket limit max? How do I know?
"https://docs.feathersjs.com/guides/advanced/scaling.html#cluster-configuration
And how do I scale feathers on socket limit max? How do I know?"
"Yer I have substituted for the advanced one. It's a straight swap. I did have a PR for it but I think at the time the preferred method was to keep the existing bulk method. I needed some additional features that the current one doesn't have. The advanced one will for example keep an array of all the errors and add them to the params, where as the existing adapter will create all valid documents but will throw a single error. So there is no way to manage all of the errors. Thanks @leob I guess what you do with the data either bulk or loop over the service just depends on how much data and what your doing with it I guess."
"@dschnare Would it be possible to abstract this away by creating another “before” hook that pulls apart the array? However it then has to morph one “invocation” into multiple, not sure how one would go about that … by the way I can imagine that they chose this design because theoretically you might want to do something with the whole array inside the hook? (that’s a bit far fetched to be honest))"
"@jacobez sorry! I didn't quite get it. How the filter work internally, btw? What about channels and how to do?"
How do I add data to the jwt payload?
it's not about multiple tabs. Let me explain it... I want to create a room and listen to that room. How to do it? Is it by listening to /:conversationId/messages?
"so I should create rooms and namespaces? Is there any limit to the total number of rooms? And how do I restrict a message sent to a particular room? A new message is created by posting to /messages. How do distribute it to the appropriate room? While creating a message, I'm providing a room id"
"I am using Postman to access my API via REST. On a 404 error, it is dumping SequelizeDatabaseError into the response, including the query! How do I stop this?"
"@danischenk commented on @danischenk’s file feathers socketio security question: Thanks for your help @daffl & @sieabah. I try to be more specific. I am using the auth-management plugin to handle user account actions like resetting the user password. I call a service method (create) from a client over socketio to my auth-management-service to reset the password by email. auth-management-service e.g. calls patch on the user-service. When I inspect the Frames in my client I can see an event ""user patched"" and this strange ""null"" event, but I don't want the client to get the user object by just calling ""reset my password with this mail address"". So, how do I avoid sending results of service method calls on user-service, which were made by auth-management-service? And I don't want to delete data in the user-service after-hook, because I need this data to be returned when I call the user-service from a completely different service."
"I am using Postman to access my API via REST. On a 404 error, it is dumping SequelizeDatabaseError into the response, including the query! How do I stop this?
Could you maybe put a gist together of some details? versions of your packages, gist of code, stacktrace, etc. etc."
"yeah, how do I manage the connection to the queue? How do I ensure that the connection has been made before I can use the service?"
is there a general rule on how to start a topic here or do i just throw my thought and questions out there?
❓ 🙋 How do I write an aggregate using mongoose feathers adapter?
❓ 🙋 How do I send paramsFromClient using rest command line client?
"Don't know if this helps but you can directly serve HTTPS how-do-i-set-up-https"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-set-up-https or I often use https://github.com/chimurai/http-proxy-middleware for redirect"
"thanks got it working at localhost:3030, do you happen to know how to fix password authentication failed for user ""postgres"" i think this is because i set a password during installation.."
"If you want to call an external HTTP service from a Feathers service then an easy way to do it is with ""request-promise"", here is a SO post and a blog article explaining how to do it: https://stackoverflow.com/questions/39894292/best-practice-for-calling-remote-rest-services-from-a-featherjs-application https://blog.feathersjs.com/using-feathersjs-to-make-your-existing-api-real-time-813f7c3fd892
I need a way to call remote REST-APIs from my FeatherJS (NodeJS framework based on Express) application. I have found several posts suggesting to use the request module which is fine: https://git...
Feathers is a powerful and flexible framework for building web apps from scratch. However, it’s not only useful for building brand new…"
❓ 🙋 How do I send paramsFromClient using rest command line client?
"Hey guys ! I would like to know if there is some webpack expert here ? I have build a little front with VueJS CLI (I know it’s more react here but the problem seems to be here with react-create-app). I wanted to serve a static pdf file onClick on a btn. But it’s not working. After some hours trying to figure it out I came to the fact that’s a webpack issue and how it render url for static file. I found this on S/O https://stackoverflow.com/questions/36643649/serving-static-pdf-with-react-webpack-file-loader But I have no clue how to implement it (I got error).
I'm serving up some static files like images and fonts, without any problem. When I try to do the same with a PDF file, I get an Error. ERROR in ./src/views/default/components/Footer.js c:\"
"How do we separate a service’s REST endpoints from it’s interface to the database (model). I love how feathers sets this up automatically, but what about a service that I want to use internally in the codebase but don’t necessarily want to expose through REST endpoints."
"How do I get user info from client? I can authenticate but I don't know how to get user info... The login success return the token... From docs, I did try this: feathersClient.passport.verifyJWT(response.accessToken); but *verifyJWT* doesn't exists in *passport*"
"the feathers filter says connection is - ""the connected socket for which the data is being filtered. This is the feathers property from the Socket.io and Primus middleware and usually contains information like the connected user."" I was thinking it would be the actual socket. But its not. How do I access this object, and hang stuff on it ?"
❓ 🙋 How do I document socket endpoints?
"Ok, so I am using the feathers-client module, and have my JWT timing out in say 20 minutes... how do I force a refresh of the jwt without logging out ?"
"@sieabah I know, but unsure how to do this in a for loop of code"
❓ 🙋 How do I create pagination for my custom service similar to the db adapters?
❓ 🙋 how do I restrict emit of an event to the socket who started the request?
how do I prevent the event from being fired? It's a service from db adapter
How do I know that the connection.id is not the user who is responsible for creating the event in the first place?
"How do I set response headers for a specific service endpoint? Adding them to the params.headers in an after hook doesn’t work, since I guess those are the request headers"
"hey guys. I have a feathers service which collect data and contains
where: {
                        user_id: hook.params.user.id
                    },
This is working from a client. Now I have a different service which is calling this one in an after hook from a patch. The patch too is called from the client and both have authentication.hooks.authenticate('jwt'). Now I get the message that the id is undefined. debugging, it is the id from the hook.params.user.id. So how do I pass this one from the hook? I tried to console log it at the top of my patch hook but it doesn't have hook.params.user"
❓ 🙋 How do I patch roles array using feathers-mongoose service? I'm using the following and haven't checked if it works or not. 😐 https://gist.github.com/anonymous/3b81fa099d18b62928fb2bdfab3159b3
"How can load all models in tests or what do I make wrong? I get error: ""SequelizeEagerLoadingError: items is not associated to blocks!"" In tests I call service for getting blcoks, blocks have items. If call api in application it works fine, but not in tests
return app.service('api/v1/blocks')
          .get(blockId);
"
"Hmm, how do I emit events from a service to the corresponding socketio websocket?"
"How do I ""log in"" the user I create, to make sure he can only update/delete/view himself, and not other users?"
"Hellow, I am using nodemailer-sendgrid-transport and feathers-mailer to send mails for resetting password purposes on the backend, on the app i am making, i use feathers/client,feathers-socketio/. My doubt is why is the app having a timeout and moments after the email service responds with a success. On the client:
export const socket = io(env.BASE_URL, {
  transports: ['websocket'],
  forceNew: false,
  timeout:7000,
});
Response on the server sometimes after a timeout error has appeared in client
type  sendResetPwd
info: after: messager - Method: create
Sent email { message: 'success' }
info: after: auth_management - Method: create
Can someone tell me how precisely do i increase the waiting time on the client because the timeout parameter clearly is not working, not for me"
How would one make an insert using a service on the server? I have a startup script that I want to run after the application boots up and look inside a file system and do a few actions with the files as well as record them. How would I go about importing the service on the server?
"How do I get the currently logged in user, or just simply check if it's logged in or not?"
how do i write to postgres? any concrete examples?
How can I do a redirect and add a new JWT at the same time from a service?
"hey i just want to find ALL entries in my service, every single record, how do i do it? right now if i do service.find with no parameters it limits it to 10 entries, if i explicitly set $limit to 1000 it limits it to 50, but i want every single entry, how to do so?"
"OK, a quick help, anyone knows how to call a service internally without auth? I remembered read it somewhere but forgot how to do that ….. 😂"
"❓ 🙋 After populate and serialize, how do I cleanup the response forwarded to the user i.e. without the _computed and _include arrays? Using the exclude property, it did not the _computed array.
    exclude: ['_include', '_computed'],

`"
"@eddyystop My app heavily depends on current authenticated user. So how do I plan to do that? Do I create some stub users and use one of them as current user in the beforeAll tests, and then delete the users after all the tests?"
"How do I sent the authentcation token while making a find request from client? For some reason, authentication service isn't storing in localstorage"
❓ 🙋 How do I get self user information using the authentication token only? Is their any automatic endpoints/services?
How do I inject a query? Is there any hook? And what is the use of stashBefore hook and when to use it?
@rjp uploaded a file: Service route to another Service and commented: I have set up a custom service acting as a traffic cop of sorts that reads a value in the user record and based on that value routes to another /service where I’ll evaluate the payload and do stuff. Can someone give me a hand here on how to call a service from a service and if my if/else is set up right?
@rjp commented on @rjp’s file Service route to another Service: Or is /route better done with /route/path-a and /route/path-b … in a hook instead of a service…how?
"@teddy-error commented on @rjp’s file Service route to another Service: app.service, I would think"
@rjp commented on @rjp’s file Service route to another Service: I was just looking at that - so in my route service I create a const app = feathers then in the hook app.service = /path-a. I just added a overview of the objective - in your opinion is this an efficient way to do this? I really don’t have to have a actual /path-a endpoint - I just need to do stuff if path-a is identified in the hook.params.user.route.
@rjp commented on @rjp’s file Service route to another Service: I would do the stuff in this if statement but I have literally dozens of endpoints and dozens of params per endpoint I need to transform - would like to keep them organized in a folder/file for each endpoint.
@rjp commented on @rjp’s file Service route to another Service: could this be as easy as creating a file for each endpoint with an export and calling that file?
@teddy-error commented on @rjp’s file Service route to another Service: There is an app instance on one of the hook properties too
@teddy-error commented on @rjp’s file Service route to another Service: You can organize it however you want. But it sounds like maybe there's a better solution...
@teddy-error commented on @rjp’s file Service route to another Service: Maybe if you told us what your high level goal is we could give you suggestions
"@rjp commented on @rjp’s file Service route to another Service: For example imagine a dozen different stock ticker services. Each service has a different endpoint URI and params - some may be XML, another RPC and several JSON. The service I want to build has a a common JSON API with params. When I receive the request I identify the users preferred service (x) stored as a value in hooks.params.user.x. So when the API call is made to /ticker for example, that is where I want to identify the value for x and based on this value make the necessary transform to the hook.params.query and send it to the x endpoint URI to process. When I receive the response from x then I need to transform that into my common response format, log it to a database then send it to the client."
"@rjp commented on @rjp’s file Service route to another Service: Hi @teddy-error thanks for the help here. End goal is I have multiple endpoints providing basically the same service but of course have different URIs and params. I am normalizing a common API request and based on the x value of hook.params.user.x need to create a service or middleware that accepts the hook.params.query and format the request for x, send it to that x endpoint then receive the response, reformat it into my common response, log it in a database and return the it to the client."
@rjp commented on @rjp’s file Service route to another Service: So I’m trying to figure out the best way to do this. I really don’t need or want to have a ticker/x path - but if it is necessary to generate a service for x I need to restrict any external calls to that path. End result I would like to accomplish is a POST with params to /ticker
@rjp commented on @rjp’s file Service route to another Service: I will have literally dozens of x endpoints and dozens of params to transform in the x format so I really need to keep my files separate and organized rather than just build everything into the before all hook in the ticker service.
@rjp commented on @rjp’s file Service route to another Service: Long winded but wanted to be clear. Hope you can give me some guidance here on best way to accomplish this - I’m still learning js and Feathers.
@rjp commented on @rjp’s file Service route to another Service: so end result should a POST with params to /ticker
"https://feathersjs.slack.com/archives/C0HJE6A65/p1507811021000040
❓ 🙋 How do I get self user information using the authentication token only? Is their any automatic endpoints/services?"
"❓ 🙋 How do I use fuzzy search using mongoose? https://www.npmjs.com/package/feathers-mongodb-fuzzy-search
hook which adds fuzzy search for mongodb through $search in find query"
how do I decode them from client side?
"Does anyone have any specific documentation on using https://artillery.io or apache's ab with feathersjs' socket.io transport? I know I could easily load-test the REST transport, but I really want to get a good grasp of the demands of running a socket.io transport at production levels. artillery looks promising, with 1st class support for socket.io, but my inspection of the socket.io traffic between feathersjs client and server is less than intuitive in revealing anything of how to ""fake"" socket.io traffic. So, I'm hoping someone out here has done something or experience with actually load-testing the socket.io transport and would be willing to share specifics of how to do it (e.g. example artillery configs, etc, or a blog post detailing how to do it for feathersjs). Thanks in advance!"
"Oh no, I just thought that since it was here in feathers that you were using feathers, i mean its not really recommended to put everything on one file, but you can do it, Im not really sure how I could help there without seeing the code."
❓ 🙋 Feathersjs is able to listen to all host. How do I limit it to only listen to only a single or a certain number of hosts or a wildcard pattern of sub-hosts? Should nodejs handle it or nginx?
"Looking a bit through the feathers docs I understood that is based on services and hooks and that services have the events that also help to offer realtime sync between server and client. As long as things are simple, as in docs I understand, basically having a service generated and then adding/saving/updating using the service methods will triggeer the event. My scenario is a bit different: The API endpoint does not return info from a table but complex queries based on multiple tables I need to have background workers that do operations on the database,probably using Kue (if there's no better way inside feathers), when a worker finishes the job, I need to have a way to trigger the API service so it updates the clients with the new data. How can I do this in feathers?"
@daffl how do I have to write the exemple in a hook ?
hello. quick newbie question … how can I create a service instance programatically? can I do something like a: myservice.create( {properties}); ?
"and seems to work, I was wondering how to trigger the client update when my other js files do the work"
"hello guys, how do I setup a /auth/google url using nuxt.js?"
"🙋 ❓ While retrieving data from two different collections in mongoose, how do I paginate using a custom service? Is a custom service the right option here? I'm trying to store messages of a room in a single collection. But a message can be of different type. And depending on different type, I want different schemas. But they're to be retrieved and paginated at a time. So how do I create services for my scenario to handle this? Here, I need help with the following - creating services - architecting the system appropriately - storing and retrieving the data"
@marshall commented on @russiann’s file doc: So you’ll probably get a good idea on how to make the query by searching how you would normally do it with those Mongoose methods.
❓ 🙋 How do I switch service based on a type in the data on create? e.g. I want to use another service when type: 'XYZ'
"Yes.. but I'm asking how do I protect it based on what website can access it, etc. e.g. the website might ask for authentication using oath strategy, etc. I don't really know much about securing webapps"
"Architecture question with Feathers. We have two use-cases where we need to query an oauth_clients table. 1. During the Oauth flow within code, ie. app.service('oauth-clients').find().... 2. As a public endpoint to be queried via ajax. $.get(‘/api/oauth-clients’) In situation 1, we don’t need any permission checking as that’s handled by the Oauth implementation. In situation 2 we want, for example, to validate the Bearer token and scope the results to only ones that the users owns. As far as I can tell we can’t use the same service to do both unless we add exceptions to shared hooks or some sort of checks to see what protocol is being used. So my question is do you think it’s better practice to create multiple services, or customize the hooks to check how they’re being called, ie. locally vs RESTfully. Or, to forego services in the oauth-2-server plugin and drop down to directly using knex for queries? Thank you for any input!"
"Hi, I use feathers in combination with mongoose. All this does run in a docker container. Sometimes it is not possible to start the container, the log tells following:
Detected unclean shutdown - /var/lib/whatever/mongod.lock is not empty.

Thats why I want to find out how to do a clean shutdown. I cannot really find a corresponding listener. Anyone who can help me? Thx!"
"hum... how do I return an error hook with a promise of a ""service.find"" result?
    error (hook) {
      const service = feathersCache.service(hook.path)
      if (hook.method === 'find') {
        return service.find(hook.params)
      }
    }
"
❓ 🙋 How do I use aggregation with feathersjs?
❓ 🙋 How do I stop showing the server error stack to client on any error in prod?
"Hey.. I already have an existing VueJS project, I'm trying to implement the feathersjs client into, to connect to an existing Featherjs backend. How would I go about implementing the oauth into the VueJS project. OAuth work's when I do it on the public html inside the feathersjs project"
Hi...How do I disable services for provider...thx
and how do I pass it ?
❓ 🙋 I've a custom oauth server. How do I authenticate using that server? Should I create my own strategy or I mean I don't really know how to get started.
"❓ 🙋 I'm running an after hook after both patch and create. But i'm also running the patch in a before hook of create. The issue is I'm updating the same field in the results in both the after hooks. So the first time the hook runs in the patch, it replaces the field with an object. Now the second time the hook runs for the create, it tries to populate the field reading it as an ""objectId"". But it fails since it has been converted to an ""object"". So how do I plan my architecture to not have this issue?"
"lets say that io use this.socket.emit('messages::find' how do i make it to get the last 20 objects, in other words the page 1"
"I’m new to feathers, not sure how to handle next problem I wan’t to add new collection to my MongoDB that will contain some info related to each user do I need to create a new service for that>?"
"how-do-i-access-the-request-object-in-hooks-or-services"" target=""_bank"">https://docs.feathersjs.com/faq/readme.html#how-do-i-access-the-request-object-in-hooks-or-services"
How do I check if paging is active in the backend?
"right, in the hook, find before, how do I get the (idEmp) that is the id of the company that is requesting and if it does not come (idEmp) return an error ??"
"hi, how would i do that? from command line?"
"But the API is helper, there is an API in PHP that generates JWT, here in the API with featheres you would only need to get JWT and extract the information from it. How can I do this, since kwt is already coming in the request, through the headers in the Authorization field?"
another question how to use https://github.com/feathersjs/authentication-client#hooks populateHeader hook and do I need to do it?
"I am using feathers-sequelize and I am having troubles with many-to-many relation between models. Association declaration seems to be fine (through table was created as expected). I not sure how to add association between instances though. What I found is that I should probably do this with Sequelize instance and .addObject method client.service('player').create(player) returns raw object though, to that function is throwing undefined error Using this to get instance does nothing, I still get raw object https://docs.feathersjs.com/api/databases/sequelize.html#working-with-sequelize-model-instances"
"then I want functional like mentioned in this issue - https://slack-redir.net/link?url=https%3A%2F%2Fgithub.com%2Ffeathersjs%2Fauthentication%2Fissues%2F178
Hello, i want a make a simple page that render ""Helloo {{USERID}}"" if an a user logged or ""Hello anonymous"" else. I try with, hook, customs services, and more options but i dont have luck. ` app.ge..."
@eddyystop And if i use a a preperation hook how would i do it for a multidimensional array like mine? As i still neet to keep the reference to the subdocument
"Definitely but it does have its own challenges. https://stackoverflow.com/questions/41076627/evaluating-featherjs-authentication-needs/41095638#41095638 might also have some info on how to structure things.
My collegues and I want to build a chat application (ReactJS <-> NodeJS), and we have been looking for the best framework to do so. FeathersJS seems undoubtedly the most stable and feature-rich ..."
"Anyone knows how this should be dealt with using Feathers? I have an ""appointments"" schema that should have an array of sub-bookings:
const appointments = new Schema({
    bookedFrom: { type: Date, required: true },
    bookedTill: { type: Date, required: true },
    secretNote: { type: String },
    note: { type: String },
    customerId: { type: String },
    subBookings: [subBookings],
    confirmed: { type: Boolean, default: false }
  }, {
    timestamps: true
  });

How should I import another service to have the sub-bookings listed in the array? Should I use the relational approach, creating a new base schema for the subbookings, remove the ""subbookings"" attribute, and add a ""appointment_id"" field to the subBookings schema, or can I nest them here in an array? I also need to access them like this /appointments/:appointmentId/subBookings I know I can write the custom ""find"" function for this route like so:
app.use('/appointments/:appointmentId/subBookings', {
  find(params) {
    return this.app.service('subbookings').find({
      query: Object.assign({
        appointmentId: params.appointmentId
      }, params.query)
    });
  },

  setup(app) {
    this.app = app;
  }  
});

But I don't know if that's the right way to do it."
how do I prevent populate from nesting? ie I have one populate called on one service and I only select what I need but it is including populate from the referenced service
"import { CookieStorage } from 'cookie-storage'
// ...
client.configure(hooks())
  .configure(rest('http://localhost:4002').superagent(superagent))
  .configure(auth({
    storage: new CookieStorage(),
    storageKey: 'jwt'
  }))

I am using CookieStorage to store the jwt. but it sets the cookies as a Session. how do I set it to use my “expiresIn” jwt settings from the backend"
How do I send a date in a Feathers request?
I have created new custom service and I want to get the data from my collection in mongodb . How can I get the data from db in custom service ?
"I'm using feathers-authentication + jwt, and passing an Auth0 token to my endpoints. How do I get the service.filter((data, connection) => bool) to store the user property on the connection?"
how do i set permission to a service using feathers-permissions. have it all configured except the actual rule
"and i guess a better question is, how do i populate the user with feathers-hooks-common populate?"
"Also, how do I customize my rethinkdb queries? Not much info here https://docs.feathersjs.com/v/auk/databases/rethinkdb.html"
"Hi, I have a limit of 5 items in my service. How do I remove that limit?"
"i havent used knex migrations before though, at the moment i generate a new one at the top level, but i can’t make that happen for a service since the migration ends up being on the top level, if that makes sense? How do I reason this about so my services are separated and have their own knex stuff that then gets consumed by my app for every service?"
nevotheless uploaded a file: Bildschirmfoto 2017-01-31 um 14.53.12.png and commented: How do i avoid those trying unknown thingies?
The question I have (if it makes any sense) is how do I configure which entity is associated with some authenticated action (like creating a post) so that it can include the authenticated emtity's id in the post upon creation. Could not understand that bit from the docs.
so how do i use feathers-authentication 1.0 ? 😕
"i think i already asked once, but how do i get the client ip in a service method?"
"how do I perform an update on a record but not by id but by another column? f.e. I want to update a record according to customerId property, whereas the id is the primary key of the table."
"How do I create a custom authentication method that only requires a user id and a secret key to generate the token? I need it transition a big app to feathers from php. I want to use the php app to authenticate the user then when the user is validated send a request to the feathers server to get a auth token. Then it sends the token to the user, and a javascript app is launched and can use the token to communicate directly the the feathers app. It's not ideal but will only be using it during transition period. Thanks!"
"New to feathers... Created a restful app, but I want it to be 'read-only'. How do I disable create, update, patch, remove and only enable find and get?"
"Using feathers-authentication local, how do I seed a default user (server-side), like: 'email': 'admin@feathersjs.com', 'password': 'admin'"
"how about that query? how do I go about doing something like
Sequelize.query(”select…
?"
"I feel like this may be a silly question, but using feathers-client how do I pass query params to the find method?"
"noob question inc. How do I install feathers auk? Doesn't look like there's a public release available, but surely it's somewhere?"
"how do i pass an queries object to a service and get its value code client: app.service(‘customers’).find({’$limit’: 20}) server: app.use('/customers', { find(params) { console.log('findQuery:', params) let filter = { where: {}, include: [{ model: models.model1}, { model: models.model2 }] } return models.customers.findAndCountAll({filter}) },"
"Hey guys, how do I ignore a service event on the client that originated it?"
Hmm. How do I connect do the websocket?
"Hey guys i have a usability question of sorts,
app.service('hotels', sequelizeService({
  Model: HotelsModel,
}))

exposes the find,create,update etc methods on the service using feathers-sequelize but how do i go about implementing commonly used logic like getting hotels by their type ? cause i don’t wanna always keep typing this out everywhere,
app.service('hotels').find({ query: { type: someTypeVariable, status: ‘live’, city: someCityVariable } });
(ofcourse this a simplified example, the real query is about 6-8 lines long) do you generally expose a helper on the service? or is there a different way to go about this?"
how do i get the next page of the paginated data from the services
"Btw, how do I get involved in feathers development?"
"Hey guys i have a usability question of sorts,
app.service('hotels', sequelizeService({
  Model: HotelsModel,
}))

exposes the find,create,update etc methods on the service using feathers-sequelize but how do i go about implementing commonly used logic like getting hotels by their type ? cause i don’t wanna always keep typing this out everywhere,
app.service('hotels').find({ query: { type: someTypeVariable, status: ‘live’, city: someCityVariable } });
(ofcourse this a simplified example, the real query is about 6-8 lines long) do you generally expose a helper on the service? or is there a different way to go about this?"
Thanks @luke. How do I go about turning on debugging?
how do i allow cors? (Access-Control-Allow-Origin)
how do I send an error to client ?
How do I specify my query from the client when using the find method?
"Hmm .. I have set it up as far as I can see in the migration guide .. but when I try and authenticate, I get a 404 not found my project: https://gitlab.com/saints-gaming/saints-api/tree/feature/authUpgrade Another thing .. how do I implement the functionality from the old hooks (restrictToRole, restrictToOwner verifyOrRestrict, etc)?"
"Another thing .. how do I implement the functionality from the old hooks (restrictToRole, restrictToOwner verifyOrRestrict, etc)?"
"yes, I know what you mean. I would like to add a new method to my service. I've created this ""foodService"" thru the cmd but how do I extend the service in order to have a ""filter"" fn? And how can I map that new method to a ""filter"" url? Maybe it's what you're saying: defining a new endpoint, load my food service and then implement my ""filter""..."
"Hi all, how do I delete an already populated property from a database object/document?"
"in the default users service, i would like to update the users info except the password, but featherjs requires me to supply a password field. BadRequest: notNull Violation: password cannot be null — feathers.js:1545 how do i fix this?"
"Hello all! Long time programmer (mostly C/C++, C#), jumping into the world of web development using Javascript for some personal projects. After doing quite a bit of research I've decided that Feathers JS checks a lot of my boxes. I've gone through the chat tutorial, but now I'm a bit stuck. I'd really love to wade through more tutorials and example code, but I'm having a hard time locating more tutorials and additional documentation. Specifically, I want to add in the notion of ""Rooms"" or ""Conversations"" into the chat app, I've generated a new service for conversations. But I'm not confident in how the ORM will map messages to a conversation. I found the faq section (from a link on Github) which discusses this in passing: how-do-i-create-channels-or-rooms"" target=""_bank"">https://docs.feathersjs.com/help/faq.html#how-do-i-create-channels-or-rooms Any suggestions would be great. Thank you."
"Guys, how do I setup the success redirect using feathers-authentication v1.0.0 ? I can't figure out how to redirect the JWT to my SPA when using oauth2..."
"how-do-i-create-custom-methods"" target=""_bank"">https://docs.feathersjs.com/v/auk-reorg/faq/readme.html#how-do-i-create-custom-methods"
"Guys, how do I setup my ""audience""?? I'm getting back ""jwt audience invalid. expected: https://yourdomain.com"" when request my /users/ endpoint using a diferent domain."
"@daffl , I'm not completely sure I understand.. so am I only supposed to use this override existing methods? How do I create a brand new method?"
"also how-do-i-create-channels-or-rooms"" target=""_bank"">https://docs.feathersjs.com/help/faq.html#how-do-i-create-channels-or-rooms > The room assignment will persist only for the duration of the socket connection. What happen if the connection get lost and later on socket.io reconnects? does this mean the client will loose all room assignments?"
"might be a silly question, but how do I set the redirect URL?"
@btheo how do I specifiy the property I want to use to PATCH the object?
"hey all, I'm struggling a bit with the current mix of auk/legacy documentation... how do I go about implementing the populate hook from feathers-hooks-common?"
how do I attach the id of the currently logged in user to an object that gets created?
"If I want to use only token authentication (not local), how do I generate a valid token?"
"If I want to use only token authentication (not local), how do I generate a valid token? I'm getting an HTTP 404 whenever I POST to /auth/token."
How do I get it?
"Mkay, npm install -g feathers-cli is pulling 1.2.7, how do I get 2 pre?"
how do i get the data source into the feather generate service database options
"@eddyystop it is only an example schema. I would like to figure out how to populate a nested path. Need I make separate populatehooks for every level? (populate first the comments array, and after populate the comments.likes array) or can be done in one pass? If can be done in one pass then how?"
"Hi there, I'm working with feathers-starter-react-redux-login-roles. For the life of me I can't figure out how to dispatch a get query to a feathers service and put the return value into a prop. I've posted a gist here with the pertinent code: https://gist.github.com/RubyRubenstahl/e4cc2ffb6449ebe2119220595357aa98 I'm trying to use the id coming in on params.id to populate the transcript prop. I feel like i'm doing this way wrong, but I can't seem to find any examples to follow. Any advice?"
The first one is currently how it will return without the populate. What i'd like is to achieve the second one with the populate.
"Ok still having issues with the feathers-hooks-common populate, I found the deprecated version and managed to get it to populate, but for some reason I am having no luck with the newer common version. Can anyone translate how to use the new version compared to the old one."
"Populate will try to populate each record individually, one of which does not have the parent field specified in the schema. I'm not sure how it will react."
I am currently trying to get the populate hook to work. I have a parentField wich is an array of object ids and I am trying to reference those with childField _ids any idea on how to query the parentField array?
"Is it possible to have this as the service def:
  // Initialize our service with any options it requires
  app.use('/v1/:tenant/tags', service(options));

  // Get our initialize service to that we can bind hooks
  const tagService = app.service('/v1/:tenant/tags');

How is it possible to pass that :tenant property from between service calls? ie within a populate call:
const schema = {
  include: [{
    service: '/v1/:tenant/tags',
    nameAs: 'category',
    parentField: 'parent',
    childField: '_id',
  }],
};

I need to be able to tell the schema the :tenant so it can appropriately fetch the correct data. The populate is working but the tenant param is undefined not sure how to pass it or if there is a better method to do what I am trying to do."
"Hi team, I have a question regarding how to attach populate query in the url. Let say, I have a User and Profile, User has one Profile. I would like to populate Profile also when I fetch User, some thing like this /users?$populate=profile From some discussion on feathersjs. I tried to setup a hook like
const populate = (hook) => {
  hook.params.sequelize = {
    include: hook.params.query.$populate
  }
}

userService.before(populate);

But always get the error ""message"": ""Include unexpected. Element has to be either a Model, an Association or an object.”, I’m using feathers-sequelize for postgresql"
I'm a little confused exactly how feathers populate() works based off of the docs.
"Hey all, I am having trouble figuring out how the populate hook works from 'feathers-hooks-common' on the before find hook. I am trying to find objects based off a field on the related object. Looking for any guidance!"
eddyystop: the root of the problem is that I am trying to find objects based on their related objects and was not sure how to do that. what you said does make sense in that populate is not the right thing to do in this case. I am still not sure how to go about finding objects based on their child's fields. any guidance would be great
"@ccarlisle (1) You have a populate as the before hook in a .find(). A before populate joins records to the base record(s) in hook.data but that field is undefined in a .find(). (2) What's the reason for having a populate in both the before and after hooks of a .find()? I don't understand why you would do that even if it worked in the before hook.
eddyystop: the root of the problem is that I am trying to find objects based on their related objects and was not sure how to do that. what you said does make sense in that populate is not the right thing to do in this case. I am still not sure how to go about finding objects based on their child's fields. any guidance would be great"
ryan.wheale: yes sir would still like some help! So after my discussion with eddyystop yesterday I removed the populate from the before find hook. I am still confused on how I would search for related objects fields
"    all: [
      populate({
        schema: {
          include: [{
            service: 'users',
            nameAs: 'user',
            parentField: 'userId',
            childField: 'id'
          }]
        }
      })
    ],

This is how my populate looks in messages.hooks.js I thought the issue might be here."
Our concern is what populate is doing regardless of how execution got there. So the debug()s will isolate what we are interested in.
"Is it possible to populate on a mongoose subdocument? For example I'd like to populate the image with the options array and can't work out how you'd do it.
const customOptionSchema = new Schema({
  image: {
    type: ObjectId,
    ref: 'image'
  },
  createdAt: {
    type: Date,
    'default': Date.now
  },
  updatedAt: {
    type: Date,
    'default': Date.now
  }
});

const customDesignSchema = new Schema({
  options: [customOptionSchema],
  createdAt: {
    type: Date,
    'default': Date.now
  },
  updatedAt: {
    type: Date,
    'default': Date.now
  }
});
"
Actually just found that if I do $populate: ['options.image'] in my query that works just can't work out how to do the equivalent when using a population schema https://docs.feathersjs.com/v/auk/hooks/common/populate.html#schema
Hi everyone! Can you explain how the populate hook works? I do:
"Hey guys, how can I also populate the patched event ?"
"@hman Enforcing things at the model level would depend on custom features provided by the DB you are using. This would not be strictly Feathers. Concerning Feathers, how are you populating the booking object when you get it? Are you using populate hook?"
The Chat guide shows you how to populate relationships.
"Hey are there any examples on how to populate a hasMany association into a before hook with a sequelize backend? I have my associations set-up, but I just cant figure out how to include them."
"@dottodot How would you populate a Mongoose ORM using raw Mongoose, without Feathers?"
is there any good and simple example on how to use populate with feathers?
Hi all please I need help with pagination of populated service. Like how do you paginate populate services? Thank you.
"@juicycleff You set paginate:falseif you are includeing a paginated service. https://docs.feathersjs.com/api/hooks-common.html#include
Hi all please I need help with pagination of populated service. Like how do you paginate populate services? Thank you."
"can someone help me understand how to do a nested populate. I have read the docs but still can not get it to work. example result data:
{
  event: {
   nameId: 123....,
  } 
}

I have my populate schema : { include: [{ service: 'events', nameAs: 'event.name', parentField: 'event.nameId', childField: '_id', } ] } It get an error on client side of Cannot read property 'push' of undefined. Any help would be greatly Appreciated"
"ok, how would you Recommend doing an nested populate?"
"Hi Guys! I´m trying to do the following: Summary: When i call a service (/properties/id), i will like to bring more information to the response from other services. I´m using mongoose and mongodb. Exact need: My service (/properties/id) will bring me fields like ( city_id, actiontype_id,country_id) i will like to take those id´s and get the name of each field from each service, For example get from (/actions) the name of the action that matches that id, from (/cities) the name of the city that matches that id and the same with the country. I think this should be done in the before hook of /properties and i also took a look to the docs but i only find populate and it just wont work or i dont know how to use it. Please help me know to get the response with the properties fields but also with the other fields. Thank You to all"
how do I populate the whole object that is returned from the service instead of assigning it to a field
"when using the populate hook, how do I let it bypass the authenticate hook? In most cases I want roles to be private, but if a user is created I want the roles to be populated"
"Hey, I'm writing a blog-type app for a company intranet (and more, going forward!) I have an uploads service (e.g. for images, files etc), and also a sections service (e.g. staff news, industry news, etc). Then, I have an articles service, that contains all the stuff a a blog post has (e.g. title, subtitle, html etc) I'm using MongoDB, and currently my articles are in this format:
{
    ""_id"" : ObjectId(""598d81e4c88a452f10e878c0""),
    ""title"" : ""work - Expedita recusandae repellendus exercitationem dolorem voluptate dolorem nam."",
    ""subtitle"" : ""At unde maiores nihil."",
    ""content"" : ""Try to input the SDD port, maybe it will calculate the multi-byte microchip!"",
    ""sectionId"" : ObjectId(""598d81e4c88a452f10e878b8""),
    ""slug"" : ""work-expedita-recusandae-repellendus-exercitationem-dolorem-voluptate-dolorem-nam."",
    ""createdAt"" : ISODate(""2017-08-11T10:07:32.974Z"")
}

I'm looking for advice in how I _create_ and _find_ articles based on their sectionId. Should I just store a sectionId, as above - and _find_ on that? How about for uploads, should I embed the ID in the article? Is this where the populate hook comes in?"
🙋 ❓ how do I populate a field memberCount on after hook of a service? This memberCount will store the count of a collection exposed as a service
"🙋 ❓ How do I populate an object e.g.
parent: {
  channelId: '123',
  meta: {}
}

I want to replace the populate parent with the channel details The output I'm expecting is
parent: {
  id: '123',
  name: 'Channel Name',
  meta: {}
}
"
"Hi, I have an entity that contains an array of id's and I need to populate that entity with the referenced id's, how can I do it using populate hook? Thanks!"
"Whenever I use ""populate"" in an after hook, I am also geting ""_include"" in my result - how can I turn this off generically across all services?"
❓ 🙋 How to populate in params instead of in data?
"Question regarding populate: I am trying to populate users that are in an array of results.
data = {
...fields,
results: [{user_id: 123}, {user_id: 124}, {user_id: 125}]
}

Trying to populate each user at
data.results[index].user_id
{
    service: 'users',
    nameAs: 'user',
    parentField: 'results.user_id',
    childField: 'results.user',
  }

this does not work, but not sure how to loop each result. I have read the docs and cannot figure this out, any help would be great!"
"I know how to loop through an array, but in the populate hook, you pass an config object"
"❓ 🙋 After populate and serialize, how do I cleanup the response forwarded to the user i.e. without the _computed and _include arrays? Using the exclude property, it did not the _computed array.
    exclude: ['_include', '_computed'],

`"
@daffl Any idea about how to integret populate with mongoose ?
"I just meant when loading even a 1-1 relationship for the results of a find query, the populate hook appears to perform N additional queries, one for each result. In this case (at least how I understood the term), eager loading refers to a technique of loading all the results in the joined table up front in a single query, and then merging them with the original results, so you only have to perform 2 queries."
Looking at the doc to have to best performance for me is to use the populate func of mongoose. I already have an array of ObjectId that I story in my user… how can I populate with the DB engine this array with the data ?
"❓ 🙋 I'm running an after hook after both patch and create. But i'm also running the patch in a before hook of create. The issue is I'm updating the same field in the results in both the after hooks. So the first time the hook runs in the patch, it replaces the field with an object. Now the second time the hook runs for the create, it tries to populate the field reading it as an ""objectId"". But it fails since it has been converted to an ""object"". So how do I plan my architecture to not have this issue?"
"(function(context, query, include, inject) => object) Determining what the params should be for a service call made within a hook can get complicated because what is needed depends on how your hooks use context.params and what they expect in context.params. For example - Should the service call be made as the server or as the client? - Should the service call's populate hooks, if any, be performed or not? - What authentication information should be passed along? This convenience method helps you form the params you need. - context (*required*, object) The current context, the one wanting to make the service call. - query (*optional, object) The query object to be used. - include (*optional*, string or array of strings) The properties in the current context to be retained in the service call. The default is ['provider', 'authenticated', 'user']. - inject (*optional*, object) Other properties to be added to the calling params. **ProTip:** By default, none of the populate hooks in the called service will be performed. Inject { _populate: undefined } if you do want them performed."
"You can try using a manual mongo query if you want. That's not how populate works though. Still, you're welcome"
"You can have a 'complete' schema. Then deep-copy it and, based on the user role, remove the includes not allowed. This would make populate similar to how GraphQL works."
how do I prevent populate from nesting? ie I have one populate called on one service and I only select what I need but it is including populate from the referenced service
"Hi there, I'm working with feathers-starter-react-redux-login-roles. For the life of me I can't figure out how to dispatch a get query to a feathers service and put the return value into a prop. I've posted a gist here with the pertinent code: https://gist.github.com/RubyRubenstahl/e4cc2ffb6449ebe2119220595357aa98 I'm trying to use the id coming in on params.id to populate the transcript prop. I feel like i'm doing this way wrong, but I can't seem to find any examples to follow. Any advice?"
@maxtten I know your pain... It was not easy to track down the 1st time I ran into it. Now you just have to figure out how to map the 7_x versions to the MS version you have.
"Anybody have time to look at my feathers project? I cannot, for the life of me, figure out how to consistently initialize my database and load data. Perhaps it has something to do with a misunderstanding of promises, or sequelize. Or maybe something else entirely. I have no idea at this point. If you can help, I'll owe you a beer or three 🙂 https://github.com/jnunderwood/feathers-secure-web-service-example"
"thanks @eddyystop I've take a look there, but I feel like I'm missing something... I'll keep plugging away and see if I can figure it out"
"I know that others have accomplished this, but I'm still trying to figure out the best way to implement it with feathers. I've got my my micro-service built.. now it's just a matter of leveraging it"
"Guys, how do I setup the success redirect using feathers-authentication v1.0.0 ? I can't figure out how to redirect the JWT to my SPA when using oauth2..."
still got to figure out how to handle local auth.. though that's probably pretty simple. A couple redirects might just do the trick
"@marshall Yes, feathers-reactive. Pagination made it behave oddly, and I couldn’t figure out how to consume it properly. For example, with a page size of three, the observable would emit [A, B, C]. If another resource was created, it would emit something like [B, C, D]. We needed it to emit something like [A, B, C, D]. We were looking to use it to produce an Ionic2 application with a infinitely scrolling list of resources. The behaviour didn’t seem to fit our use case, but perhaps we were using it wrong."
If it does not exist REST services will get a 404 error and socket services will time out (since there is no other easy way to figure out if the event you are sending exists at all)
"There’s no cross-library way to figure out if an event is listened to or not other than a timeout. The proposal at https://github.com/feathersjs/feathers/issues/421 is related, so there might be a solution for this in the future."
"I modified a working Feathers+Mongoose example by adding some new services, and I can't figure out why they aren't working. When I hit the new apis all i get back is {""total"":0,""limit"":100,""skip"":0,""data"":[]} but the data is indeed in the database. Does someone have a minute to take a look at this? This one works: https://github.com/dancancro/great-big-angular2-example/tree/fixauth-famn/app/service/message This one doesn't: https://github.com/dancancro/great-big-angular2-example/tree/fixauth-famn/app/service/claim"
@daffl I probably will. I still need to figure out the ObjectId cast problem. Maybe that's simpler
"Dows anyone use feathers-hooks-common v3? I would like to use ""client"" hook, but i cant figure out how i should install the 3rd version"
Did you figure out which part of that line is breaking it?
It looks like Webpack can’t figure out which one to use
"Hey are there any examples on how to populate a hasMany association into a before hook with a sequelize backend? I have my associations set-up, but I just cant figure out how to include them."
"Was using feathers-client and found myself needing to set the content type of the service requests. Unfortunately, can't seem to figure out for the life of me how to do set the content type like this (since I was using superagent): http://visionmedia.github.io/superagent/#setting-the-content-type"
"at this point I can figure it out, just easier to ask cuz why not"
Something is wrong somewhere and I can't figure it out.
"@davi-teodoro If you figure it out, pretty please add a QA question to the docs for that."
"It's like now I know this person is authenticated, but I can't figure out what they are."
@juanchoc - did you figure out your issue? Can you verify what version of feathers-sequelize you are using as we just rolled out a major change earlier this week. Thanks
"You helped me out greatly to figure out what was wrong, thank you very much 😊"
"So then I just have to figure out how to get data from my server to the UI - do I just rely on the usual JSON API loading of records from my server? If so, how do I tell the UI that stuff updated on the server? My own socket.io transport code? Why not use feathers to both load the records and notify of remote updates?"
Hey thanks guys :). I'm starting to figure it out. Seems old fashioned reading through some code is helping me grok it.
"@ekryski yes it would be a good idea to escape all config values with ""\\"" when on windows to prevent that kind of issue. Cause honestly this kind of bugs are quite difficult to figure out (spent many hours yesterday trying to understand what was wrong with my feathers configuration)"
I'm trying to figure out how to deal with this for the swift sdk but I've been hitting a wall
"That's awesome! Thanks for that. Also, good job on figuring out that you can pass the { include: ... } options to hydrate(). Did you have to read source code to figure that out?"
For socket.io you’d have to figure out how to determine if the socket client is authenticated.
"Hi Guys, I'm still trying to figure out how feathers works. I'm trying to figure out how to pass query parameters into hooks. What I'm trying to do is I have a database of posts, and I want to retrieve all posts of a specific ID. Am I looking at it the right way?"
"Hey, I may be missing something obvious here, but I can't figure out what sample app the auth recipe is referring to: https://docs.feathersjs.com/guides/auth/recipe.oauth-basic.html"
I read the sequelize association doc but unfortunately couldn't find any doc on the 'include' function so it is quite difficult to figure out what arguments it can take...
But I think it really comes down to how comfortable you are with a new query language. Complex queries will take time to figure out if you have a SQL background
I'm really trying to figure out how to simulate it in mocha tests
I'll look through that auth doc you linked and see if I can figure out how to fake the JWT for github
"Sounds good; I have to figure out what Feathers auth is doing under the hood (and Github is sending back), so I can simulate it out. Thanks! nock is a great find!"
@daffl Thanks. I see it will trigger an update but it uses 'id' as column name. I'll figure that out for it needs to be something else
"Hello! I'm running into an issue and I don't get to figure out where it came from. When my application generates an error I get this message :
Error
    at Object.<anonymous> (/home/guillaume/api/node_modules/feathers-errors/lib/index.js:64:27)
    at Module._compile (module.js:570:32)
    at Module._extensions..js (module.js:579:10)
    at Object.require.extensions.(anonymous function) [as .js] (/home/guillaume/api/node_modules/babel-register/lib/node.js:152:7)
    at Module.load (module.js:487:32)
    at tryModuleLoad (module.js:446:12)
    at Function.Module._load (module.js:438:3)
    at Module.require (module.js:497:17)
    at require (internal/module.js:20:19)
    at Object.<anonymous> (/home/guillaume/api/node_modules/feathers-rest/lib/wrappers.js:13:23)

Can someone help me please? 🙂"
thanks @eddyystop - I'll check out the populate hook. Just trying to figure out a way to implement GET /teams and GET /teams/1/members
"Hello all. New to feathers, node and love it :). I'm trying to figure out the best way to handle configuraTions. I see that feathers configuration uses the node-config package under the hood. I've used that on the server in the past. Is this also the suggested way of dealing with configs in a create-react-app or react native project?"
@eddyystop I did do the whole guide and even modified it to work with mssql..but still can't figure out how to get data to datatables...
But I am unable to figure it out
I have literally been trying to figure this out for a hour xD
I can't figure out why the client side auth isn't authenticating as the admin user the second time
@eddyystop yes you are right. I am using as a util. However since I updated the hook-common to 3.5.5 I started getting this error. I was about to figure out the remove util was causing this error. I am also getting another new error as well which is the Cannot read property '_include' of null error.
"I have been able to Isolate the issue, now I just need to figure out what line and why its causing that error."
"But it changes based on the app’s requirements, so you have to figure out the best way to make it happen."
You’ll have to figure out how to create the users you would like to use because in the chat API every message requires an existing user that has to be created.
"I can see it in the console, but I can't figure out how to push it through."
"Need a bit of help here... I've trying to figure out how I can have multiple local authentication. In my case however, I need to have one authentication for username/password and another authentication for api client ID/client secret. Currently in the config there is only one ""local"" object in the ""authentication"" object. I've tried duplicating the authentication object in the config file but it didn't work. 😕"
ok - can you figure out the rest for me (keep adding in pieces of the query until it breaks)
"I'm actually doing something like this now, but the user comes back as undefined even though it exists in the DB, can't quite figure out what I'm doing wrong here."
"The last line at the bottom, I'm trying to figure out how to include the JWT header from my authentication without having to call the authenticate service again"
"It's already there, I just can't figure out how to reference the property"
Because now it doesn't.. and I can't seem to figure out how to do just that
I also took a while to figure out the frontend authentication part. But when I first found out how to do it it was extremely easy.
I spent a little while yesterday trying to get auto-letsencrypt working but I couldn't figure it out.
@joao.azevedo are you able to post a link to a small example where we can reproduce the issue? A few common things that trip people up: 1. Make sure you have the latest versions of the auth and the plugins. 2. Make sure you are registering the hooks for the authentication service (this is going to be made more clear soon) 3. Make sure your user actually exists in the DB (we’re planning on making this more visible) 4. If after that it’s still not working run your app with DEBUG=feathers-authentication* npm start and see what the configurations look like to make sure your services are initialized with the correct values. You can read more about debugging here: https://docs.feathersjs.com/guides/advanced/debugging.html If you can’t figure it out after all that then please create an issue with an example of how to reproduce it. 😄 Auth is pretty complicated. Lots of moving parts and potential configurations so it’s hard for us to debug without examples that reproduce the issue.
"Do that in a hook
i guess i'll figure it out... i just wanted to replace the parentObject with the populated childObject."
Can't figure out why.
"Seems that rest would be better, but I cant seem to figure out how to simulate the local storage component of the webbrowser, or force the accessToken without calling authorize each request."
"I spent my whole evening last night trying to figure out a Docker problem - turned out to NOT be a Docker problem, it was my app. ffs."
Part of the next version will be to remove the hard dependency on Express. Once we figure out a good way to do streams (file uploads) there isn’t really much of a need for even using a HTTP framework at all.
"hello. I am new to node. I'm using the feathers-starter-react-redux-login-roles and am hooking up the features-mailer with smtp service. I have a seemingly trivial question, but can't quite figure it out. How do I access ""app"" in https://github.com/eddyystop/feathers-starter-react-redux-login-roles/blob/master/server/helpers/emails.js? adding ""const app = this"" gives me something else"
"Based on https://docs.feathersjs.com/api/express.html#setting-service-params and https://stackoverflow.com/questions/7507015/get-hostname-of-current-request-in-node-js-express it would be
app.use(function(req, res, next) {
  req.feathers.host = req.headers.host;
  next();
});

So, I may be missing something simple here, but I can't seem to find a way to get the hostname that a request object I'm sending a response to was requested from. Is it possible to figure out what"
"hi everyone! I'm trying to figure out authorization hooks in featherjs and I'm a bit stuck with my use case. For a find/get method of a service I want to allow only owned entities or, if a user belongs to specific role (i.e. admin) - to send all. I was playing around with restrictToRoles and hasRoleOrRestrict but can't get either first or the second part of the case to work. Any suggestions?"
"these lines describe the link process: // Check request object for an existing entity if (req && req[options.entity]) { existing = req[options.entity]; } // Check the request that came from a hook for an existing entity if (!existing && req && req.params && req.params[options.entity]) { existing = req.params[options.entity]; } // If there is already an entity on the request object (ie. they are // already authenticated) attach the profile to the existing entity // because they are likely ""linking"" social accounts/profiles. if (existing) { return this._updateEntity(existing, data).then(function (entity) { return done(null, entity); }).catch(function (error) { return error ? done(error) : done(null, error); }); } but i cant figure out who set the req.user"
thank you. I’ll try then ask again if I can’t figure it out. Thank you so much for taking time to help out the community. you guys are what will make feathers succeed 💯
And figure out how to get the feature you need in there.
hello everyone! I'm using feathers rest and have come up with a problem I can't seem to figure out. How do you query for null dates? Ex:users?email_confirmed_at[$ne]=null I get a postgres error saying Invalid Date
I can't figure it out at the moment.
I’ve spent the last two days off and on trying to figure out how to do this but idk.
"i havent been able to really figure out exactly how to customize a payload from a hook yet, i was messing around with it but was having issues"
Ilya and I will try to figure it out tonight
"Hey guys ! I would like to know if there is some webpack expert here ? I have build a little front with VueJS CLI (I know it’s more react here but the problem seems to be here with react-create-app). I wanted to serve a static pdf file onClick on a btn. But it’s not working. After some hours trying to figure it out I came to the fact that’s a webpack issue and how it render url for static file. I found this on S/O https://stackoverflow.com/questions/36643649/serving-static-pdf-with-react-webpack-file-loader But I have no clue how to implement it (I got error).
I'm serving up some static files like images and fonts, without any problem. When I try to do the same with a PDF file, I get an Error. ERROR in ./src/views/default/components/Footer.js c:\"
"when I create multiple items using an array in create, they each fire off a ""created"" event. Which is awesome... But I was wondering.. does the socket-io get a payload from the server for each one ? or does the feathers-client figure it out and handle the create array to trigger an on created call for each one."
"thank you, suppose I'll have to figure out how to handle this using promises"
"in my example, I was mass importing data, and if there was an issue, like a database collision, I wanted to know what object had the issue.
.catch(err => {
   err.id = data._id;
   resolve(err);
})

then I could loop through, and look for the error code, if there was an error code, I could use the ""id"" to figure out what item errored."
"Well, in my case, I wanted to have a valid response, because I know some of the items would go in, and some would not. Since you cant provide both a 200 and 400 response code, I opted for the 200 and let the client figure out what was going on."
What's the best way to debug async hooks? I keep getting errors ('find' method returned invalid hook object). But I can't figure out the problem...
Hello everyone. can anyone help me figure out how to call a service method from another service method without invoking the hooks for the called service method?
"Hey, so I'm fairly new to feathers, trying to figure out how to set up a ""nested route"", like app/teams/{teamId}/members/"
yeah i've been digging through it for like 2 days now I can't seem to figure it out
"yeah, the code in the docs doesn't match the style of the generated app too, if I figure it out, you mind if I submit a pull request to clarify the docs a lil bit?"
"Hi all, forgive my n00bness, trying to figure out all this cool new stuff with DoneJS and Feathers... In looking up a MySQL adapter, I ran across https://github.com/feathersjs/feathers-knex. But seeing as how I'm super dumb unless I actually see an example with _my type of database_ I'm not sure how to adjust it for the other DB's it says it supports. Anyone have a quick MySQL example they could help me out with?"
"I actually paused that project to figure out feathers-auth-management, and I'm having a hell of a time with it, but once I get this working, I want to merge the two, so you can get invited/etc to one or multiple orgs."
@luc.claustres I'm unable to figure out how to unit test a service by mocking the db
"Looking at library tests, I'm unable to figure out things. It would be nice to checkout some realworld apps. _...sigh_"
"Question regarding populate: I am trying to populate users that are in an array of results.
data = {
...fields,
results: [{user_id: 123}, {user_id: 124}, {user_id: 125}]
}

Trying to populate each user at
data.results[index].user_id
{
    service: 'users',
    nameAs: 'user',
    parentField: 'results.user_id',
    childField: 'results.user',
  }

this does not work, but not sure how to loop each result. I have read the docs and cannot figure this out, any help would be great!"
if there's a working example already on github that would be very useful for me to get in there and figure out how it works 🙂
i've been trying to figure it out but I don't think it's possible
@rjp commented on @rjp’s file Service route to another Service: So I’m trying to figure out the best way to do this. I really don’t need or want to have a ticker/x path - but if it is necessary to generate a service for x I need to restrict any external calls to that path. End result I would like to accomplish is a POST with params to /ticker
"Hey... I was away for a bit, but I'm still trying to figure out the best way to test a reset password path with feathers-authentication-management, wondering if anyone has any experience with that?"
"Hey guys, I am running up against a brick wall on an authentication error. Wondering if anyone would have time to help me hunt it down. Essentially I am trying to create a user, and my server is trying to authenticate my user before creating. which is obviously failing. Very odd… but my console.trace() runs me up against “<anonymous>” code which means I cant get out of the “feathers-authentication” module and figure out where the call is originating."
"There’s nothing async there is there? Although, in general wrapping something that already returns a promise into a new Promise isn’t a great practise anyway. I’m pretty sure we’ll all just be using async/await before we figure out all the Promise “best practises” anyway"
"Now you can try to figure it out. You are trying to connect to a remote db - ther are 50 different things that can get in your way - firewalls, network proxies, permissions, etc."
"I'm not sure what 172.28.204.170 - but it's not localhost, and it results in a timeout on my end too. You need to figure out what that is. localhost should be 127.0.0.1"
"@freeline Could you show more code, because I can't figure it out by only that."
Many thanks. I did still not figure out why events do not fire after running the hooks...
"I'm using feathers-mongoose and I have an object with an array of nested objects. Ex.
{
   key: value,
  [
    { status: 'working on it', itemNumber: 1 },
    { status: 'finished', itemNumber: 2 }
  ]
}

I'm wanting to do a patch to update a property on one of the nested objects (like update the status on itemNumber 1). I can't seem to figure it out. Can anyone offer any help?"
"4ware uploaded a file: Upload Problems and commented: Hi! I'm trying to build an upload service for my app via tdd. I've inserted the code above but all it return is: '""Route: /uploads - Page not found"" What am i doing wrong?"
"Hi guys, Quick question... is 2.1.1 the latest 'auk' version for feathers? Trying to port over some existing code to the new version before I get too far down the line."
I am trying to make a query where $in and a field equals a value
"hi, i'm trying to make an api call with PUT to update an entry but its not accepting the ""id"" field change that I want to make."
"I'm not ""explicitly"" trying to get the deleted records. It's the populate hook 🙂"
"Seems I can't do even a simple find to query by createdAt using neDB @eddyystop, @marshall - any ideas? Essentially I'm trying to get this record:
{""title"":""A task"",""pauseInfo"":[],""createdAt"":{""$$date"":1491562049007},""userId"":""IUD3PXjG8ko5JqQb"",""_id"":""r0qw1958mh8U87jB""}

Hmm, perhaps I can use dot notation? Gonna look into that 🙂"
"@daffl could you help @tbanner15 ? His original comment was ""hi, i'm trying to make an api call with PUT to update an entry but its not accepting the ""id"" field change that I want to make. [12:03] how can I update the id field? [12:04] i tried a patch as well and that also didn't work."""
"Hey guys, I'm trying to use feathers in Angular. I try to instantiate feathers but i get this error: ERROR in D:/WebDev/realtime-chat/angular-src/src/app/core/services/feathers.service.ts (17,17): Cannot invoke an expression whose type lacks a call signature. Type 'typeof ""D:/WebDev/realtime-chat/angular-src/node_modules/feathers-client/index""' has no compatible call signatures. Relevant code:
constructor() {
    this._app = feathers() // Initialize feathers
      .configure(rest(HOST).superagent(superagent)) // Fire up rest
      .configure(hooks()) // Configure feathers-hooks
      .configure(authentication({
        storage: window.localStorage // Set storage of token
      }));
  }
"
"That did the trick @dancancro ! Although now I lose my REST capabilities right? Not so experienced with Feathers yet, trying to build my first app."
oh yeah… I was trying to debug that
"Does anyone here have experience using oauth2, feathers, and nginx reverse-proxy? I'm trying to understand why I get a mismatch_uri while using nginx."
"Hello! I'm trying to use the populate hook along with the feathers-mongoose service. I have two collections in the database in the format: goods: {_id, name, ..., vendor: ObjectId} vendors: {_id, name, ...} I want vendors to be populated when requesting goods. I use the hook as described in the documentation:"
"Hey everyone - I'm trying to restrict the find method on my users service to query current user only. I'm using the method queryWithCurrentUser but when I get /users it returns an error containing ""Current user is missing '_id' field"". However, my users all have an _id field."
Try it with DEBUG and then print your user object just before trying to access _id
kickstarter uploaded a file: Untitled
"kickstarter commented on kickstarter’s file Untitled: Hi guys, i was trying to create a middleware on feather but never called, don't understand why in the file /middleware/index.js"
so I’m kind of trying to avoid the ‘bloated utils folder’ code disease 😄
"hey, i was trying to implement soft delete and i found it’s code in feather hooks.
var softDelete = exports.softDelete = function softDelete(field) {
  return function (hook) {
    (0, _utils.checkContext)(hook, 'before', ['remove', 'find'], 'softDelete');

    if (hook.method === 'find') {
      hook.params.query = hook.params.query || {};
      (0, _utils.setByDot)(hook.data, (field || 'deleted') + '.$ne', true); // include non-deleted items only
      return hook;
    }

    hook.data = hook.data || {};
    (0, _utils.setByDot)(hook.data, field || 'deleted', true); // update the item as deleted

    return undefined.patch(hook.id, hook.data, hook.params).then(function (data) {
      hook.result = data; // Set the result from patch as the method call result
      return hook; // Always return the hook or undefined
    });
  };
};
"
this is with the stock hooks on the user service trying to remove the password from the json response.
"""jwt audience invalid. expected: https://theproductionDomain.com""

The audience is only set to that in the production.json. I'm trying to make the audience localhost:3000 for development (my dev server). I've changed the name of the audience in both json documents but it always expects the same domain. What am I overlooking?"
"Sounds like it. That’s not standard behaviour at all (esp. _body in a response). Also, you are totally free to use whatever combination of REST or websockets you want. But if you want real-time you have to establish a websocket connection anyway so why not use it to also make request. That’s one of the points Feathers is trying to make."
"@genyded I'm studying two examples, each with some of the characteristics I want to learn. (1) https://github.com/implustech/famn (Angular2, ngrx/store, Observables, Material Design WebSocket-based messages data table), and (2) https://github.com/eddyystop/feathers-starter-react-redux-login-roles (feathers-client, feathers-reduxify-authentication, feathers-reduxify-services). I'm trying to add these examples into my project (3) https://github.com/dancancro/great-big-angular2-example/tree/fixauth-famn (Angular's Http service and ngrx effects (like sagas)) With WebSockets, I think I'd not be using ngrx/effects since that's the case in example (1) and I think that reworking my features for that would take more thinking than just replacing my simple json file backend with Feathers, but I'm starting to think this is where my understanding is off. I'm also new to MongoDB and Mongoose. I looked at NeDB but didn't see an advantage there that offset having to find another way of seeding data so I stuck with Mongo. My gets are working but patch and put aren't. I'm trying to do that here: https://github.com/dancancro/great-big-angular2-example/blob/fixauth-famn/client/app/core/services/rest.service.ts#L81 Having two parallel Feathers apps on the client seems perfectly fine with me if that's possible. My plan was to have a singleton Angular FeatherService with properties for each. I didn't get too far into doing that before asking here. If it's possible, I'll do that."
@marshall Been trying to find a solution but with no luck.
"Hi all, is it possible it do a service method lookup inside a filter? I'm currently trying to filter my data with a hook.app.service().find() query inside my filter, but it refuses to run..."
I am trying to keep an inventory count
"hey everyone, I'm still trying to get my head around the feathers hooks/services mentality, so sorry if this question is a bit dumb. What's the ""feathers way"" to structure my app to handle messages that instruct the app to do something with existing data (but don't contain any data)? For example, in my scenario users can create an order (I have this working fine), and once it is paid for then the order gets offered to a bunch of other users. One of those other users will hopefully accept the order, and the app can set order.assignedTo to that user. Users can also reject the order in which case another user will be offered it. Do I do all this in hooks? or should each of these messages be a separate service?"
"I was trying to extend via es6 classes a mongodb service, but didn’t work"
"Hey guys, I'm trying to integrate swagger documentation in an API that uses rethinkdb, but all the feathers-swagger documentation -which is already working on my end- uses feathers-memory to setup the service, but when I try to do it with feathers-rethinkdb way (let service = service(options)) the swagger part is not reflecting the documentation, has anyone integrated both feathers-rethinkdb and feathers-swagger before?"
"Hi everyone, just came over to feathers from meteor, and wondering about feathers-seeder I am trying to seed multiple mongo documents, and related documents. Retailer(s) have many Product(s) using template does one, using templates accepts an array of documents .... I created this gist: https://gist.github.com/camstuart/43a87411b6ec2a557c642ce83437e7ee can anybody provide a sample (without using faker) of loading multiple seeds?"
"hey guys, why would my authenticate service return 401 Unauthorized (No auth token) when trying to login? http://localhost:5000/authentication via POST, Content-Type: application/x-www-form-urlencoded"
"I have NODE_ENV set to production… but it appears that it’s trying to connect to the dabase at 127.0.0.1 , which is NOT the url I have in production.json"
what I understood is that feathers is trying to connect to couch at this address: ECONNREFUSED 127.0.0.1:5984
Are you logging what CouchDB is actually trying to connect to?
I have never used CouchDB but my guess is that the connection string hasn’t been passed properly and it’s trying to use its default.
"Is there a way I can pass a parameter to find methods without applying a ""select"" query? I'd like to do something like
query: {
  onlyLatest: true
}

But this means select rows where onlyLatest === true, whereas I only want to send a flag to conditionally run a hook. I'm trying to get the latest record by createdAt - anyone covered this before? Thanks 🙂"
"hi. I'm trying to build feathers-client authentication service with websockets and I cant't get the token saved to localStorage (although I can see the token in ws-frames). Actually, the promise created by 'feathers.authenticate(credentials)' does not get resolved (Error message: Authentication timed out at http://localhost:4200/vendor.bundle.js:92754:18 [angular]). Can someone give me a clue of what might be wrong? I'm out of ideas. Here's the code (I'm using Angular2 for client app) https://github.com/AMashoshyna/Kottans_Web_Game/blob/auth-service/src/app/services/api-realtime.service.ts#L40"
Are you trying to include your non-query props inside the query for feathers-reactive?
"Hello, I am trying to use a children Schema with mongoose, but when I PATCH. It replaces all the records of the sub document. Does anyone have any idea how to PATCH specific itens of subdocuments?"
"Im trying to keep it DRY... So somehow I have to get to the app object, so I figured to get to it through hook object"
"i have been trying to get this to work: https://docs.feathersjs.com/guides/advanced/file-uploading.html however, i am receiving a 404 error when posting to localhost:3030/uploads"
"Hi everyone. I am trying to use sequelize (mysql) as the database and for some services we need to do ""INSERT"" into multiple tables. so 1)I have no idea how to work with the service.create method. What is the correct place to add such piece of code? 2) I see that ""app.use('/transactions', service(options))"" generated when I add a new service <-- should I add the transactionService.create method somewhere nearby? Thanks"
"Guys, probably a noob question, but how do I access one of my Services, lets say 'users' inside a custom middleware? I'm trying to modify a user using a custom endpoint and I create a middleware for this endpoint but I'm strungling to find a way to handle the change."
"I have an external api that has multiple end points, so I broke down my services based on them. ie. api-accounts.service.js, api-transactions.service.js etc. My first question is, should I do this or should I make one service with more advanced queries? My second question is, what is the suggested route for rate limiting? The service only allows up to 60 requests per second. I used to do it like so with rxjs:
 request$.rateLimit(2, 1000, true).subscribe(value => console.log('value'))

rateLimit is a custom rxjs operator with args: (budget, time, shouldBuffer) that allows me to select how many requests (budget) for a given amount of time (time in ms). I'm trying to do something similar to this."
@genyded I am not trying to populate data from a relationship. I am aiming to re-use one service for two different endpoints.
netcitrus: You have to create a custom Verifier for feathers-authentication-local to do what you’re trying to do.
"What I'm trying to achieve is when the user create something, store their id alongside with the data they create in a nedb"
"Hi guys. I'm trying to build a Contacts app, in which the user data is stored in a SQL db, and the contacts data of each user is stored in a nedb (it seems to me this is a awkward design decision, but it's not my call). Is it possible to create a service that relies on another service (to authenticate the user with jwt)?"
I’m trying to set up a socket io connection client side without the feathers client module and have it plug into a backend that has feathers implemented. Is this possible? Based on this page: https://docs.feathersjs.com/api/socketio.html it seems like it is. My main concern right now is authentication. How is authentication handled on a vanilla socket.io front end to plug in correctly with a feathers backend?
hey marshall thank you for the response! i’m realizing trying to re-implement the feathers-authentication-client might not be the best approach. perhaps you could help me with the current issue i’m encountering. the app I’m working on actually has feathers implemented on the client side. The issue that I’ve discovered is that either socket.io or feathers frequently quits attempting to reconnect after losing connection (half the time it just keeps retrying the other half it just gives up after like 3-4 attempts). Overall I feel like it is better to have control over how often we retry a connection anyways. After reading up on socket.io documentation I realized I could manually attempt reconnections and then simply turn off the setting for socket.io to automatically attempt reconnections. This worked except it introduced another issue and that was since feathers wraps around the socket manager if a connection wasn’t established on the first try there would be no retries (since the automatic retry had been turned off since i’m using a manual retry) and I’m assuming somewhere under the hood feathers is running socketManager.connect() but I don’t have access to the callback to tell the app what to do if it is a failed connect.
"@instanceofmichael you're trying to keep API endpoints available, right?"
"I am trying to setup an environment so I can debug, and I don't know how to do that. Do I need to install Webpack or something? Webstorm ?"
"ops, I already added a comment trying-to-make-sure-that-a-json-request-that-404-s-still-returns-json-but-nuxt-is-still-eb3a6d752946"" target=""_bank"">https://medium.com/@SpaceGazebo/im-trying-to-make-sure-that-a-json-request-that-404-s-still-returns-json-but-nuxt-is-still-eb3a6d752946"
"The thing is that I am trying to understand how to use the framwork, I am reading the tutorials but I am not able to grasp it"
@marshall hi there .. I have the basics.. I am just trying to traverse the code
"I am still trying to understand what is the bigger image, i will go through it. I din't get the point of how & why do we need hooks / services on the client side"
it's like i am reading a line and trying to guess that it does
So what is the problem exactly? You are trying to use a custom id property on a mongoose adapter?
"You are not trying to get that middleware running with a WebSocket call, right?"
"hey guys, I’m trying to customize my verifier, but I’m not allowd to import the verifier in my authentication.js file, how can I work around this? https://docs.feathersjs.com/api/authentication/jwt.html#customizing-the-verifier"
"I played with that, but then it removes the column for all locations. I'm trying to use this service with the column more then once. One view needs a few columns while the other needs them all. So I'm trying to do that here
serviceArticles.find({
                //TODO filter other columns
                query: {
                    category_id: 1,
                    status_id: 1,
                    $sort: {
                        article_rating: 1,
                        article_at: 2
                    },
                    $select: [
                        'article_code',
                        'article_at',
                        ['article_description_' + this.curLanguage, 'article_description']
                    ],
                    $limit: 250
                }
            })
In the ""todo"" part I tried include with something simular to the $select but it does nothing"
"Sure. Could you tell me, so I have a point of reference, are you using feathers trying to add Ember? Or are you using Ember trying to add feathers?"
Not using either yet - trying to develop a new app and starting with both from scratch. I'm attracted to feathers because it makes the realtime updating of the models seemingly easy and transparent - saves me from having to write my own socket.io transport code to notify my client of updates side by side with the usual ajax loading of records from my server.
"well, you define foo after trying to log it?"
I'm still trying to get authentication working using feathers-vuex
I'm stuck trying to access the JWT from the server side
Hello trying to create a Custom Verifier but I am unable to create or update and existing entry in the DB would like some assistance
I'm trying to do it 'manually' with a Nuxt plugin
That's a good lesson learned for me. Not trying to make one single application that can do everything 😛
"Don't feel bad, I'm getting slapped around right now with trying to implement passport-steam into my app"
I'm trying to create a simple application with basic CRUD operations. But I'm starting to get a bit lost in the Node world. I've had my fair share of front-end development a few years back and getting back into it.
I'm just trying to utilize the already available socket.io identifying ID which is in a string format
as of now I am trying to see if I can remove the not-found-handler() & handler() at runtime & then re-register it
I’m trying to debug a library and it would be great to have this information
"Trying to authenticate with the 'username' users field instead of the 'email' one, I end-up with this error message: info: after: users - Method: create info: error: authentication - Method: create: Missing credentials Anyone knows what might be the problem?"
"I'm trying to use queryWithCurrentUser with my many to many (through) table, however it doesn't like the above 'users.id' any idea how to express this?"
"@ekryski yes it would be a good idea to escape all config values with ""\\"" when on windows to prevent that kind of issue. Cause honestly this kind of bugs are quite difficult to figure out (spent many hours yesterday trying to understand what was wrong with my feathers configuration)"
"In other new, I have an issue I posted about over on Stack Overflow about socket authentication giving me trouble. I'm mostly trying to learn feathers, so I think I just missed something... would be very grateful if ppl took a look 😄 http://stackoverflow.com/questions/43898049/feathers-authentication-via-post-works-but-socket-doesnt"
"Yeah maybe someone else can chime in about the reasoning behind it, but from what I've read from the docs and stuff feathers isn't trying to assume too much about what people want to do, for example when authenticating they no longer return the user by default. In this case, similar reasoning can be applied to the default return value for UPDATE/PATCH probably. It seems pretty application-specific for what to return (I wonder if they're supposed to return something based on a spec of REST?)"
@rondaniel what are you trying to do?
"Hi, probably a simple answer to this. I’m trying to query using a boolean. So, something like /messages?read=false. Although there is a record there that should work, Feathers does not return any results."
@eddyystop sorry you've lost me. I'm trying to use the feathers api
"@smixx I'm still stuck on trying to authenticate, mind if I share some code?"
"@eddyystop Im trying to do the following but can't with lean set to true
   return this.app
      .service(""lineitem"")
      .patch(id, data)
      .then(item => {
        return item.save();
      })
      .then(item => {
        return {
          item: item
        };
      });
"
I'm trying to figure out how to deal with this for the swift sdk but I've been hitting a wall
I am trying to build a preview for email templates and I am stuck. All of Email building is done on the server. I am stuck and don't have a good idea on how to approach this. Here is what I want to do:
"in the case where the user was trying to access a restricted page or ressource, yes"
"Hi everyone, I am creating a 1on1 chat app where guests will be able to submit a chat request to support reps. I am trying to think about how to design it. I thought to create the following services: ChatRoom, ChatMessage, ChatRequest. guests will submit chat requests and wait until a support rep accept the request. when a support rep accepts the request, a ChatRoom will be created (should it be created on after ChatRequest patch hook , i.e. when chat request accepted?) Guests will listen for ChatRoom service and wait for their request to be accepted. (Do I neeed to use Event Filters here to make sure the correct signal for starting the chat is sent to the right user amd not to all clients?) When the chat actually starts, will I need to use Event Filters so ChatMesseages will be sent to the correct clients?"
"Hi! I’m making an appointments system with Feathers (it’s awesome btw!) but I’m struggling with a complex query. I’m using MySql and Knex with Feathers. I’m trying to translate this MySql query
select * from appointments where id_calendar = 1 and status = 1 and 
( ( start_datetime >= ""2017-05-15T10:00:00"" and end_datetime <= ""2017-05-15T10:25:00"" ) or 
  ( start_datetime <= ""2017-05-15T10:00:00"" and end_datetime >=  ""2017-05-15T10:00:00"" ) or 
  ( start_datetime >= ""2017-05-15T10:00:00"" and end_datetime >= ""2017-05-15T10:25:00"" ) ) limit 1000;

to the Feathers querying object:
query: {
  id_calendar: calendarID,
  status: 1,
  $or: [
    { start_datetime: { $gte: startingTime }, end_datetime: { $lte: endingTime } },
    { start_datetime: { $lte: startingTime }, end_datetime: { $gte: startingTime } },
    { start_datetime: { $gte: startingTime }, end_datetime: { $gte: endingTime } },
  ],
  $limit: 1000
}

But the results are different and the OR command is not being processed as I would imagine. What am I doing wrong?"
Hey. I'm trying to dockerize the feathers and came across this https://github.com/feathersjs/feathers-docs/issues/63
"Yeah I think so. I’d need to refresh my brain. Just going off the cuff here. Might be app.io.on('authenticated', fn)… but yes that could work. It really depends on what you are trying to do after authentication"
"chrisg: 🤔 how do you have your socket initialized? Make sure you’re not passing a forceNew: true option. Other than that, it definitely works inside the feathers-auth-client. What are you trying to do?"
I’m trying to see if I can find an example of someone using it in feathers
"I'm not sure you have provided an opportunity for the community to help you, what exactly are you trying to do and what errors are you experiencing?"
"I’m trying to use it for user registration - https://www.npmjs.com/package/bcrypt-nodejs
A native JS bcrypt library for NodeJS."
What are you trying to accomplish?
"Hi Guys, I'm still trying to figure out how feathers works. I'm trying to figure out how to pass query parameters into hooks. What I'm trying to do is I have a database of posts, and I want to retrieve all posts of a specific ID. Am I looking at it the right way?"
i guess i was trying to restrict what the client can do
"im just trying to learn but yes, it would be a single page application"
"As @smixx just pointed out, feathers-mongoose already supports what you’re trying to do."
I am getting confused when trying to perform any db command in feathers. as I understand we should interact with the DB only with services no?
"Hi all, I am using NeDB as the current Database for my app, I am trying to use https://docs.mongodb.com/manual/reference/operator/update/addToSet/ however it doesn't work for me.
$addToSet — MongoDB Manual 3.4"
"I am trying to learn as best as possible, trying to build a good understanding.. spending lots of hours reading."
We understand and that striving is what causes real learning. I'm just saying its not efficient to spend hours trying to debug something when a short question might answer things.
"Trying to make an after hook on my user service that will be called by all the user service methods to remove private fields (like email, phone number...) if the user entry is not the one of the connected and authenticated user As a first attempt, I did something like this:
commonHooks.when(
		hook => (hook.id==null || hook.params.user.id != hook.id),
		commonHooks.pluck('id','username','avatar') 
		)
But, in that case, for the find() method, if the entry for the connected user is in the results, it would also be ""plucked"" . So is there a possibility to make a hook that would run on each entry of the returned array promise rather than on a whole level?"
"Why not check if result.data || result is an array and then loop thru all elements?
Trying to make an after hook on my user service that will be called by all the user service methods to remove private fields (like email, phone number...) if the user entry is not the one of the connected and authenticated user As a first attempt, I did something like this:
commonHooks.when(
		hook => (hook.id==null || hook.params.user.id != hook.id),
		commonHooks.pluck('id','username','avatar') 
		)
But, in that case, for the find() method, if the entry for the connected user is in the results, it would also be ""plucked"" . So is there a possibility to make a hook that would run on each entry of the returned array promise rather than on a whole level?"
"I'm trying to do the ""Test Login with OAuth"""
but I saw the same example in the documentation (I spent a lot of time trying to find it again but just gave up)
"If you uncomment the populate do you get the users results? You might need to change your hook to this:
    all: [
      unless( isProvider('server'), validateJwt(), fetchClientProfile(), restrictToAdmin() )
    ],

As you are still trying to validate the JWT when the request is internal."
what are you trying to do @bichenkk
"I am new to feathers. I am trying to create a view with redirect that uses feathers hooks. From what I've seen, for hooks to work, it should be a service. After using generator to create custom service, there are method implementations in *.class.js. I can't see how I can access hook data in GET though. Any hints? Am I supposed to pass with from within *.service.js?"
"So I couldn’t reach a email or password when I’m trying to log in then I came to config -> default.json and changed ""usernameField"": ""email"", to ""usernameField"": ""emails.address"", and was able to reach it with post request that has next body
{
""emails.address"":""test@user.com"",
""services.password.bcrypt"":""a2c96d518f1099a3b6afe29e443340f9f5fdf1289853fc034908444f2bcb8982"",
""strategy"":""local""
}"
"essentially, i’m trying to ensure that any and every error on the server is logged. i’m finding that certain errors are slipping through."
"okay, I'm trying to populate on a before hook of find"
"@ellipticaldoor First check you are using the latest version of the adapters. Your service is configured to return an ORM response instead of POJO. The latest adapters default to POJO. You have to use lean:true for mongodb and raw:true for sequelize in older adapters.
okay, I'm trying to populate on a before hook of find"
I'm really trying to figure out how to simulate it in mocha tests
@btheo what are you trying to do?
First time I am trying to dig into framework code. Usually it ends up not good as I don't understand anything but now I give it another shot
Does anyone have experience or knowledge on trying to set up Sequelize database transactions with the feathers framework?
"@merik, I’ve run into this before when trying to serialize an error into a plain JS object."
I’m trying to do this
@marshall thanks for the response! So I’m still kinda new to the complexity of errors. And I’m not completely sure what the warning indicates. I do understand there is an issue with trying to serialize a self referencing object. Does serialization take place any time your piping to stderr and stdout and would that warning indicate we are trying to pass some self referencing object to stderr? Or is there another process that requires serialization that I am not thinking of. I thought the idea with throwing errors object is JS reads the object and then pipes out the properties that it is looking for to stderr and those properties should always be strings already. My view of this is probably too simplistic but I would love to understand the exact process and why in this case it is failing.
I am trying to think about what kind of busniess use cases would be complicated and error prone
@ryder & @eddyystop I believe there is an outstanding issue with using a service under multiple paths. I think there is issue on GitHub. I think from when I last tried it works but express throws some logging into the console due to headers trying to be written again. https://github.com/feathersjs/feathers/issues/566
and honestly I was just trying to start up a conversation about something I don’t know a ton about
I am trying to upload a file to the server using multer (in a middleware) and I would like to be able to retrieve some information (like the id of the connected user) to define the path where to write this file. I could probably do it by uploading the file into a temp file in my multer middleware and rename it with a hook in my service (that has access to the user connected id). But it would be cleaner whithout having to write a temp file
"Well, after 7 long hours, I figured it out... However, I don't understand why (if someone read this and can lighten me ^^). The main problem was that the server was sending an html page with the error instead of sending json. I just change this part of my code :
// Original

mongoose.connect(app.get('mongodb'), (err) => {
    if (err) {
      throw new Error('Error while trying to connect to mongo')
    }

    mongoose.Promise = global.Promise

    // Services startup
})

into
// Resolves the problem

mongoose.connect(app.get('mongodb'))
mongoose.Promise = global.Promise

// Services startup
"
Hey! I’m trying to get Feathers up and running based off the instructions off the homepage and every time I run npm start it tells me it’s missing a module. I ran npm install thinking that’d resolve the deps but it didn’t. Am I missing something?
"Hi all, I am trying to bypass the following issue: https://github.com/feathersjs/feathers-authentication/issues/293 As I understood, the commented code placed in the following file should provide some sort of resolution : https://github.com/feathersjs/feathers-authentication/blob/master/src/socket/handler.js I uncommented the code and set a debug point in line 114 and somehow the line doesn't get executed when a user record is updated. Could anyone please assist ? am I missing something [high probability 😉] ? thanks !"
@v1p what are you trying to accomplish by passing custom headers?
I am trying to add custom GET parameters to url like ?test=1
@smixx : I was trying to setup context using a custom header in a multi-tentant setup
I assume this is how you are trying to do it ?
"If you can share the file, it'll be easier to understand what exactly you are trying to do"
"Can you share a bit of context, that where exactly you are trying to access it ?"
thanks @eddyystop - I'll check out the populate hook. Just trying to figure out a way to implement GET /teams and GET /teams/1/members
Because I am trying to get it to work with custom primary key and it won't work at all.
I only patch inside database and trying to populate the fields
I'm trying to implement a Googleidtoken passport strategy. tried to implement both passport-google-idtoken & passport-google-id-token npm's. Butt so far no success. anybody has experience with this?
"Hi, I get the following error when trying to use mssql: error: Unhandled Rejection at: Promise Promise { _bitField: 18087936, _fulfillmentHandler0: { SequelizeConnectionError: Failed to lookup instance on http://1.1.1.1: 1433 - getaddrinfo ENOTFOUND http://1.1.1.1:1433 PS: with express its working just fine...."
Trying to make a plugin which acts on successfull authentication
"Hello all. New to feathers, node and love it :). I'm trying to figure out the best way to handle configuraTions. I see that feathers configuration uses the node-config package under the hood. I've used that on the server in the past. Is this also the suggested way of dealing with configs in a create-react-app or react native project?"
"Sure thing, just don’t want to overcomplicate things and seeing how others put things together really helps. Don’t want to split up into to many folders or overload folders with content. Trying to work out the best balance."
"I'm trying to migrate to the updated version of feathers-authentication, and encountered this error: ""options.service does not exist. Error: options.service does not exist. Make sure you are passing a valid service path or service instance and it is initialized before feathers-authentication-local. at new LocalVerifier (/home/platform/backend/node_modules/feathers-authentication-local/lib/verifier.js:44:13) at EventEmitter.app.setup (/home/platform/backend/node_modules/feathers-authentication-local/lib/index.js:70:22) at EventEmitter.app.setup [as _super] (/home/platform/backend/node_modules/feathers-authentication-jwt/lib/index.js:83:27) at EventEmitter.setup (/home/platform/backend/node_modules/feathers-socketio/lib/index.js:62:28) at EventEmitter.setup (/home/platform/backend/node_modules/uberproto/lib/proto.js:30:17) at EventEmitter.listen (/home/platform/backend/node_modules/feathers/lib/application.js:145:10) at EventEmitter.listen (/home/platform/backend/node_modules/uberproto/lib/proto.js:30:17) at Object.<anonymous> (/home/platform/backend/src/index.js:4:5) at Module._compile (module.js:570:32) at loader (/home/platform/backend/node_modules/babel-register/lib/node.js:144:5)"
@v1p what are you trying to mock? Service data or param data?
"Hi, is it possible to check role before authentication? I did add restrictToRoles but I have two separate app and I need to block users with role:user when trying to login onto the admin app."
"@luc.claustres i am trying to test hooks.disallow('external') but i get >TypeError: hooks.disallow is not a function,"
"@flynxi that has nothing to do with Feathers 🙂. The host field in the config is for convenience if you need to do link building (like for emails or oauth), we don’t use it to specify a host to run on. If you are trying to hit your server on a fresh debian install on Digital Ocean you might need to check your iptables or firewall setup. > What is the recommended database? We don’t have a recommended database. In our opinion the DB should be chosen based on the type of data you need to store and your application read/write requirements. All the DBs work just great and the beauty of Feathers is that if one doesn’t work for you and you’re not writing a lot of DB specific code (ie. you are sticking with hooks) then it’s usually only a few lines to swap a database to a different one. Your application code stays the same 😄"
Cool! Will look more into it. Actually I m new to development just graduated from the web development course from GA. Still rather new and trying to do a startup on my own.
"I'm trying to migrate to the updated version of feathers-authentication, and encountered this error: ""options.service does not exist.
Error: options.service does not exist.
	Make sure you are passing a valid service path or service instance and it is initialized before feathers-authentication-local.
    at new LocalVerifier (/home/platform/backend/node_modules/feathers-authentication-local/lib/verifier.js:44:13)
    at EventEmitter.app.setup (/home/platform/backend/node_modules/feathers-authentication-local/lib/index.js:70:22)
    at EventEmitter.app.setup [as _super] (/home/platform/backend/node_modules/feathers-authentication-jwt/lib/index.js:83:27)
    at EventEmitter.setup (/home/platform/backend/node_modules/feathers-socketio/lib/index.js:62:28)
    at EventEmitter.setup (/home/platform/backend/node_modules/uberproto/lib/proto.js:30:17)
    at EventEmitter.listen (/home/platform/backend/node_modules/feathers/lib/application.js:145:10)
    at EventEmitter.listen (/home/platform/backend/node_modules/uberproto/lib/proto.js:30:17)
    at Object.<anonymous> (/home/platform/backend/src/index.js:4:5)
    at Module._compile (module.js:570:32)
    at loader (/home/platform/backend/node_modules/babel-register/lib/node.js:144:5)"
@frederico02 yea did express twice during the course so trying to understand. What featherjs do
"Does anyone uses feathers-authentication-management? I am trying to use the passwordChange action, everything looks fine, it verify the old password, sets the new, but when I try to log in the password that I set don't work. And the user is locked out."
"@marshall vvv @rivasd
Hello! I'm a newcomer coming from a heavy Django background. So far I find Feathers to be quite good, but the documentation, especially re: authentication is a bit confusing for people used to building browsable websites vs a pure REST API, which is, I think, what Feathers aims to be. Specifically, I'm trying to still use a little bit of regular sessions since it's really the only thing that works to maintain login state while browsing on a browser. the docs for feathers-authentication mention that you can set session: true to ""use sessions"" but I see no effect of doing it, nor do I see this setting ever being used in the source code. Could any one give me pointers as to how to use regular sessions with feathersjs authentication?"
"Hello! I'm a newcomer coming from a heavy Django background. So far I find Feathers to be quite good, but the documentation, especially re: authentication is a bit confusing for people used to building browsable websites vs a pure REST API, which is, I think, what Feathers aims to be. Specifically, I'm trying to still use a little bit of regular sessions since it's really the only thing that works to maintain login state while browsing on a browser. the docs for feathers-authentication mention that you can set session: true to ""use sessions"" but I see no effect of doing it, nor do I see this setting ever being used in the source code. Could any one give me pointers as to how to use regular sessions with feathersjs authentication?"
If there are any problems with using setInterval I'm pretty sure there are at least 20 npm packages trying to offer a similar functionality 😉
"@felix.wahner What you’re trying to accomplish actually sounds like what RxJS was made for. https://gist.github.com/btroncone/d6cf141d6f2c00dc6b35#buffercount nodecron is sort of a hacky solution, but it’s also very simple."
"@eddyystop I want to thank you as I now understand why my issue was not working. When I access a service by setting a variable as in your snippet, I noticed that within the service, there is a callback that runs when the MongoClient connects to the database to set the Model attribute on the service. It is only then that the service is available for use. I was trying to use the service before that Model attribute was set."
"about performance issue, I am trying to find any issues if reported on stackoverflow ... But I guess if you ensure the interval time is not overly-demanding (i.e. poll every 5 minutes) then all will be well"
alt uploaded a file: if blocks and promises and commented: Can anyone point out what I'm doing wrong here? I'm trying to make sure I get all the data if just a patch() call is submitted
Even I am trying to get my head around RxJS
"Hi, i'm getting this error message when trying to do the simplest remove :
info: error: vendors - Method: remove: Conversion failed when converting the nva
rchar value '[object HTMLInputElement]' to data type int."
"ryan.wheale commented on alt’s file if blocks and promises: @alt - sorry this is late, but you need to return on line 4 of the code you posted."
"Hello, I'm completely lost trying to setup facebook authentication. I user feathers CLI generator: Selected: facebook auth, sequelize model I set up everything properly in the config (I am getting JWT from facebook). WHat I don't understand is, why after successful login, no user is created. And I don't see any profile information either, when I console.log some parameters in authentication service hooks. Am I missing something?"
I don’t see a reason why it wouldn’t. Did you see what it is trying to call .apply on?
"eddyystop commented on alt’s file if blocks and promises: @alt If no one's answered this yet, you need to put a return on your hook.app.service(...).get(). Missing returns is the most common problem I see."
eddyystop shared a file: if blocks and promises and commented: Can anyone point out what I'm doing wrong here? I'm trying to make sure I get all the data if just a patch() call is submitted
"Is there a way to check if the user is authenticated within a custom route? ( I'm trying to do somethin like .use('/mailqueue/:active', mailstatus(app, mailEmitter)) and within the route check if the user is authed (if he is authed he will be allowed to change the ""mailstatus"" flag:
const status = true;
const MailStatus = function(req, res, next) {
  return function(app, mailEmitter) {
    if(req.param('active')) {
      status = parseInt(req.param('active')) === 1;
      mailEmitter.emit('mailstatus', status);
    };
    req.status = 200;
    req.body = {
      status : status
    }
    next();
  }
}
module.exports = MailStatus;

"
I’m trying to get upsert to work because I’m migrating an existing system over to feathers. But I can probably refactor and make separate insert and update calls. Do you think that’s a better way to go?
I am trying to implement a jwt blacklist using application hooks. Is this the best approach?
I have literally been trying to figure this out for a hour xD
"alt commented on alt’s file if blocks and promises: perfect, thanks guys!"
I am trying to switch from django
@joao.azevedo What DB are you using? Are you trying to use native features with Feathers? Feathers DB agnostic query supports https://docs.feathersjs.com/api/databases/querying.html . You have use specialized features to pass through native requests through the Feathers adapter.
"Hi @daffl An example might be better to explain what I'm actually trying to achieve and what my problem is. I want to create is a REST API for a Raspbery Pi with a bunch of sensors attached. For this I have a service called meta that will store meta-data about a sensor (type, location, and etc.) and a service called item that stores the actual reading of a sensor. I will expose the data of meta and item through a custom service that is called tree. I have an initial configuration file that looks like this:
[
    {
        ""item"": {
            ""n"": ""humid"",
            ""value type"": ""number"",
            ""gpio"": 12
        },
        ""meta"": {
            ""type"": ""humidity sensor"",
            ""location"": ""room 1""
        },
        ""endpoint"": ""/humid""
    },
    {
        ""item"": {
            ""n"": ""temp"",
            ""value type"": ""number"",
            ""gpio"": 10
        },
        ""meta"": {
            ""type"": ""temp sensor"",
            ""location"": ""room 2""
        },
        ""endpoint"": ""/temp""
    }
]

During boot (and before the server starts) two thing must happen: 1. For each sensor in config file I need to establish the connection with it and wait for the first reading. 2. Next I will grab the config file and store the data of each meta object in meta DB and item object in item DB. ( At this point service meta and the item must already be running) When this is done I will have a structure that looks like this:
{
    ""/"": {
        ""temp"": {
            ""itemID"": ""gfd58g1d5g1d5"",
            ""metaID"": ""5gd98g4d81gd5"",
        },
        ""humid"": {
            ""itemID"": ""1234567989"",
            ""metaID"": ""556f5dfd6f5"",
        }
    }
}

This structure will act as a resource tree and it will be stored in the custom service called tree. Only after this structure is created I may start the server. An example of interaction with this tree service will look like this: 1 Client makes a request like GET /tree/temp Content-Type: application/link+json 2 treeservice will search for the requested endpoint in the resource tree structure and will get the metaID of temp 3 The response will only contain the meta-data about the temp sensor. My first approach was to add to the to the trees constructor (src/service/tree/tree.class.js) something like this:
class Service {
  constructor (options) {
    this.options = options || {}
    this.tree = boot.bootstrapper('../boot-config.json', this.options.app) --> async method that will create the resource tree structure presented above
  }

  find () {...}
  get () {...}
}

But when I start the server it goes up before that boot.bootstrapper() get resolved... So what I need is to delay the start of the server until the boot.bootstrapper() get resolved. Does this makes sense to you?"
I'm using postgres with sequelize. I'm trying to use native sequelize eager loading.
anyway not trying to find a work around for this issue. feathers should be able to handle dates with timezone correctly I think
"@zeltarion Are you trying to read a file? If so, you should read https://docs.feathersjs.com/guides/advanced/file-uploading.html"
"Hi all! I'm trying to alter the name of the service that is sent along with the events over socketio. For example I have a service '/obj/:name' which currently emits events over socketio like [""obj/:name status"", {status: ""completed""}]. Would it be possible to have the :name part be replaced by the actual parameter? I have done some searching, but couldn't find an answer. Any help is really appreciated! 🙂"
"Hi, everyone! I'm looking for help =(. Just started to use FathersJS, found it very useful tool! But today I stuck with some issue =(. I am trying to patch records by ids. I want to send an array of items with id and other attributes, just want to be able to find records by id and update the attributes. Do I have to create my own hook for this? Here is example of Curl request:
curl 'http://localhost:3040/items' -X PATCH -H 'Accept: application/json, text/plain, */*' --data-binary $'[{""id"": ""f8035df9-630e-4b8b-aa15-c17125d0ac70"", ""orderBy"": 0},{""id"": ""98d32f7f-af4c-475c-8134-eb69d8318c94"",""orderBy"": 1}]' --compressed
"
"Hey all, anyone familiar with the following error? I'm trying to connect to Feathers from a frontend using websockets.
C:\Users\Lenny\IdeaProjects\lyvebackend-feather\node_modules\feathers-authentication\lib\socket\handler.js:193
      entityService.on('updated', _updateEntity2.default);
                   ^

TypeError: Cannot read property 'on' of undefined
"
"I want to produce some fake data for my feathers application with faker. Most of my endpoints require authentication and use hooks such as restrictToOwner. What's the cleanest way to create new objects? I am using jwt auth, so creating one for each new user seems like it might take a while. Besides that, when trying to auth with app.authenticate() results in error app.authenticate(...).then is not a function"
"if you are trying to distinguish if a user is also a worker or not, have a profile table or a field like isWorker in your users table"
"@necmettin What I’m trying to do is, if a user is a worker on the system, he/she should still be able to use that same email to create a user/customer account on the same system. Reason why I extracted that into two models. I don’t know if I’m approaching the situation in a wrong manner, but that’s all I could think of to go about it."
"Any feathers-vuexers online? 🙂 I'm trying to set the current object for a service in mounted() like so:
  created () {
    // Query details from Feathers
    this.findCategories({ query: { } })
  },
  mounted () {
    // Set the current models on load
    this.$store.commit('categories/setCurrent', this.categoriesList[0])
  }

But it seems this.environments is not set at that point, although I would expect it to be. Should I somehow be waiting for this.findCategories({}) to complete before I can do the setCurrent call?"
"export default function () {
	const app = this
	const config = app.get('auth') || {}
	// const jwtKey = 'jwt'
	// const jwtConfig = config[jwtKey] || {}

	app.configure(authentication(config))
	app.configure(jwt())

	const auth0axios = Axios.create({
		baseURL: 'https://XXXXX.auth0.com/',
		timeout: 1000,
		headers: {'X-Custom-Header': 'foobar'}
	})

	const auth0Hook = () =>  {
		return async (hook) => {
			if (hook.data.strategy !== 'auth0')
				return

			try {
				const auth0response: any = await auth0axios.get('/userinfo', {
						headers: {Authorization : 'Bearer ' + hook.data.accessToken }
					})

				if (!auth0response.data.email_verified)
					return

				// Clear the hook
				delete hook.data

				// Let's see if the user already exists
				// and if not, create the user
				const usersService = app.service('users')
				const userResponse = await usersService.find({auth0: {id : auth0response.user_id}})
				const user = userResponse.data[0] ||
					await usersService.create({
						email: auth0response.data.email,
						auth0 : {
							id : auth0response.data.user_id
						}
					})

				const token = await app.passport.createJWT({
					userId: user._id
				}, {
					secret: 'This_will_be_replaced_in_production_environment'})
				console.log('GEN TOKEN', token)
				hook.data = {strategy: 'jwt',
							accessToken : token}
				return hook

			} catch (ex) {
				console.log('EXCEPTION', ex)
			}
		}
	}

	app.service('auth').hooks({
		before: {
			create: [
				auth0Hook(),
				authentication.hooks.authenticate(config.strategies)
			],
			remove: [
				authentication.hooks.authenticate('jwt')
			]
		}
	})
}
I am trying to implement an authorization hook that takes an Auth0 token, fetches the user data from Auth0 and create a local user. Unfortunately, the above does not successfully then pass on the jwt token to the jwt strategy. Any pointers on how to do this sort of token swapping?"
"@marshall vvv
Hello friends! I've been using feathers as my backend for a more traditional multi page webapp, and I was getting weird behavior when trying to use the express authentication middleware with local, so I just wrote my own middleware to authenticate the user, grab a JWT token, then I use y'all's setCookie middleware so protected routes can authenticate with jwt using that httpOnly cookie. A high level of my login route:
app.post('/login', logUserIn, setJWTToken, auth.express.setCookie(authOpts), redirect);

I think I did something wrong when setting up the default exported express middleware... so I don't think my custom middlewares are necessary. What do y'all think (gist at the end) Thanks for reading <3<3<3 https://gist.github.com/snewell92/712137e2345c6307b88ddb04d4a0a62d#file-routes-ts"
"I think what is different about this test is that it is populating parent and then populating nested child as well. I am trying to populate an _id that is a property of and object.
{
 ...
 event: {
    id: 123,
    addedAt: '1/1/2000',
 }
}

vs
{
  eventId: 123
}

I am trying the populate event._id and saveAs event.name. does that make sense"
"Hello friends! I've been using feathers as my backend for a more traditional multi page webapp, and I was getting weird behavior when trying to use the express authentication middleware with local, so I just wrote my own middleware to authenticate the user, grab a JWT token, then I use y'all's setCookie middleware so protected routes can authenticate with jwt using that httpOnly cookie. A high level of my login route:
app.post('/login', logUserIn, setJWTToken, auth.express.setCookie(authOpts), redirect);

I think I did something wrong when setting up the default exported express middleware... so I don't think my custom middlewares are necessary. What do y'all think (gist at the end) Thanks for reading <3<3<3 https://gist.github.com/snewell92/712137e2345c6307b88ddb04d4a0a62d#file-routes-ts"
Hi guys. Just starting with feathersjs and trying to assess it for a project. It's a react native app that needs a back end and I would love to go with Graphql on this one. But I'm a bit stuck on authenticating with social. I'm using react-native-fbsdk in-app and can get an access token but after that I'm pretty unsure how to proceed. Any tips on where should I do my reading?
I'm trying to avoid using a Web view in the native apps
looks like you are trying to reinvent something pretty popular: captcha
"Hi I'm trying to set up oauth2 in production with facebook. For some reason, my redirect URL always points to localhost...I'm not really sure why so it fails because localhost is not in my valid callback URLs"
"Yeah, I am trying to get a common interface throughout Promise.all calls and get and find return different data structures."
"Hi Guys! I´m trying to do the following: Summary: When i call a service (/properties/id), i will like to bring more information to the response from other services. I´m using mongoose and mongodb. Exact need: My service (/properties/id) will bring me fields like ( city_id, actiontype_id,country_id) i will like to take those id´s and get the name of each field from each service, For example get from (/actions) the name of the action that matches that id, from (/cities) the name of the city that matches that id and the same with the country. I think this should be done in the before hook of /properties and i also took a look to the docs but i only find populate and it just wont work or i dont know how to use it. Please help me know to get the response with the properties fields but also with the other fields. Thank You to all"
danielevz uploaded a file: Untitled
"full disclosure, I'm new to javascript, but not new to programming. I'm trying to show the count of ""signups"" aka, page.total and I've written a little function to do it. However, the only thing that shows on the client is [object Promise]. Here are the relevant parts:
const searecruit = client.service('sea-recruit');

function updateSignUps() {
  const signups = searecruit.find().then(page => page.total);
  document.getElementById('signups').innerHTML = signups;
}

searecruit.on('created', updateSignUps);
"
"How can I query for a document using .find() then obtain it's id so that I can remove it? This is what I'm trying to do:
contact.remove(contact.find({ myId : '000000'}).then(data => data.myId == 'someID'));
"
"I'm getting an error when trying to send with an attachment
TypeError: source.on is not a function
    at Function.DelayedStream.create (...api\node_modules\delayed-stream\lib\delayed_stream.js:33:10)
    at FormData.CombinedStream.append (...api\node_modules\combined-stream\lib\combined_stream.js:43:37)
    at FormData.append (...api\node_modules\form-data\lib\form_data.js:68:3)
    at Request.prepareFormData (...api\node_modules\mailgun-js\lib\request.js:186:21)
    at Request.request (...api\node_modules\mailgun-js\lib\request.js:61:12)
    at Mailgun.request (...api\node_modules\mailgun-js\lib\mailgun.js:74:14)
    at constructor.(anonymous function) [as send] (...api\node_modules\mailgun-js\lib\build.js:101:24)
    at Object._send (...api\node_modules\feathers-mailgun\lib\index.js:50:38)
    at ...api\node_modules\feathers-mailgun\lib\index.js:59:15
    at Object.create (...api\node_modules\feathers-mailgun\lib\index.js:57:14)
    at ...api\node_modules\feathers-hooks\lib\hooks.js:101:31
    at ...api\node_modules\feathers-hooks\lib\hooks.js:85:16
    at process._tickCallback (internal/process/next_tick.js:103:7) +10ms"
I really don't understand what you are trying to archieve. Please p;ost some code.
@alt Are you authenticating via the /authentication endpoint and using the resulting token in your header? Also what hooks do you have on the endpoint you are trying to access?
"Need a bit of help here... I've trying to figure out how I can have multiple local authentication. In my case however, I need to have one authentication for username/password and another authentication for api client ID/client secret. Currently in the config there is only one ""local"" object in the ""authentication"" object. I've tried duplicating the authentication object in the config file but it didn't work. 😕"
"Hi, I'm trying to debug a hook error, but feathers-errors seems to be swallowing up the stack trace. Can I disable feathers-errors (temporarily) or somehow get it to show me the stack trace of the actual error?"
I suspect its trying to find the user from authentication and not finding it.
"@axel186 haha... I have been trying to add multiple ""local"" auto config into the config file but it didn't work. hopefully somebody here can enlighten us on this..."
The error messages even says that it's trying to populate *an invalid user*
"Question regarding persistence when using the client. So my situation is I do a local auth in my index.html file using feathers client. I get my JWT token back and it's saved to localStorage. I then redirect to another page, dashboard.html here i setup the client again. this time though I don't call client.authenticate instead I only execute client.configure(feathers.authentication({ storage: window.localStorage })); if I console.log the client it has the JWT in there but I'm getting NotAuthenticated Feathers Error when trying to run myservice.find() ... any ideas?"
I am trying to authenticate on the server in order to add my user to params. I am using auth.hooks.authenticate('jwt') and it doesn't seem to have any effect. I was expecting to have hooks.params.user but it is undefined. Any idea what I am doing wrong?
I'm new to mysql and trying to connect to Amazon RDS via feathers-knex. I'm getting this error: Error: connect EAGAIN xx.xx.xx.xx:3306 - Local (0.0.0.0:50358) - what does that mean?
I’m still trying to find what’s different.
"hey all, what's the 'feathers' way to do permissions if I'm getting a jwt from a third party (auth0) - for example, if a user wants to make a DELETE, but the object they're trying to delete has information on it's fields (who it's parent is) is there a hook or method that will let me delay the delete operation until the item is loaded, or should I just make a hook.app.service('thingsToDelete').get(id).then() and make a comparison that way?"
"Noob question, with feathers can I create a service inside a service? Say /messages would exist but inside messages could I have /messages/bob ? Specifying the of a service path in 'feathers generate service' causes a no record found error when trying to access the service. Any help appreciated."
sieabah uploaded a file: Untitled and commented: So with feathers-sync lately I'm having an issue that when trying to authenticate it pretty much dies
"Hi guys, I'm using this code which I pulled from some of the examples, trying to authenticate into my server:"
@brspnnng Have you had any luck on this? I was just starting to look into trying to do the same thing but have no idea how to do it.
I am trying to send event like ..
"Hi guys I am a little confused ... trying to delete an item from the db using feathers ... .remove(id) -> is returning no such id ... I am assuming it is because the id property in my mongo db is ""_id"" and not ""id"" any ideas how I can change the mapping in feathers?"
"@andrew.s No luck so far, i tried to create a custom strategy but using something like authenticate(['jwt','customJwt']) and configuration as such in the config file doesn't lead to the results i am after. When you authenticate with 'jwt' you get an 'user' object on your params and with 'customJwt' i wanted to have an 'api' object in my params. This works seperately but not if you run it like ['jwt','customJwt'] then it jumps out right after it decides that the token is valid. So it never populates the 'customJwt' and thus i cannot restrict on it. So now i am trying to implement a completely seperate jsonwebtoken which i check with a custom authentication hook and if that fails it wil use authenticate('jwt')."
@smccamley daffl should look at what you have if the record you are trying to remove does in fact exist.
"That's not the error I'm really trying to fix, I know that has to do with a different layer"
"i'm trying to retrieve params information inside a normal express middleware that i called formatAsCsv. app.use('/statistics', new Service(), formatAsCsv) But somehow the hook.params object which i extended with a custom value inside a hook does not get passed onto the middleware. in the middleware i log res.hook.params but it does not contain my value. If i add the value to hook.params.query it shows up in the middleware but not when placed on the root hook.params object. Anyone encountered this or knows why this might be happening?"
What are you trying to do though?
I encountered the same problem trying to add to the params object . I ended up adding it to the query object and making a hook to take the desired fields and move them from the query object.
I'm trying to setup middleware for the Apollo Client.
"The last line at the bottom, I'm trying to figure out how to include the JWT header from my authentication without having to call the authenticate service again"
I was trying to get this to work but couldn't find the right solution
I’m wanting to prevent users from changing messages by id that don’t belong to them. I’m doing a put request http://localhost:3030/api/message/59792a9f7df622783011bb43 I’m trying to use the queryWithCurrentUser hook but the request allows the message to be modified. This is because it’s using the get method since hook.id isn’t null. I could move the hook.id in hook.params.query as _id and then set hook.id to null. But then the request returns an array instead of a single object. What’s the recommended way to get around this?
"As a practice what I'm trying to achieve is a set of very generic authentication & authorization hooks, and apply them globally. Obviously the authentication service itself need not have authorization in it. But everything else by default becomes restricted."
"Hi, i'm new to feathers and I was trying to setup an example with authentication. I wanted to create an admin user at startup, with `app.service('users').create(AdminUser).then(...), but I get the following error"
"Hi, i'm new to fefathersjs and I was trying to setup an example with authentication local. I wanted to insert an admin user at startup on the server, app.service('users').create(AdminUser).then(...) but I get the following error info: error: users - Method: create: Cannot read property 'insert' of undefined. If I use postman to POST to the endpoint, the user get created. Any suggestions? thank you"
"I've created an app with mostly generated code. I'm trying to use a feather.get call to look up some data from a service. I noticed get is defined as get(id, params) {}. If I wanted to add support to do get(email, params) {}. What do I need to do there? Is that a simple process?"
@manovel I don't think that you are supposed to call a create from inside app.js are you trying to seed your database so you always have a default user?
I'm trying to think of a good way to create a MWE. But I don't think there is.
"I'm trying to understand the feathers-chat-vuex example. And having a look at Signup.vue I see that at first mutations and actions are imported from vuex import { mapMutations, mapActions } from 'vuex' is this gonna import all the mutations and actions of all my services even though I might need to bring only the code related to one service?"
"This is the flow I'm trying to get: 1. someone lands on a page of my site 2. if logged in, they see it 3. if not, they automatically get auth0 login"
So the problem I'm trying to solve: How to authenticate the user without using the feathers client?
I spent a little while yesterday trying to get auto-letsencrypt working but I couldn't figure it out.
"Hey, I'm trying to login with multiple OAuth providers, all with the same email account, but it tries to create a new account if the provider is not already linked to the account (throwing a duplicate key exception). Is this the expected behavior or should it automatically link the new provider id to the account? Is there a short way to accomplish the second?"
"hey, I've got a service set up which is essentially a key:value list of settings stored in a mongodb. The rest of my feathers app relies on these settings - how can I ensure these settings are loaded before trying to do anything else in the app? Can I hook/override the feathers ready functionality?"
"So the problem I'm trying to solve: How to authenticate the user without using the feathers client?
Can you maybe give me an example?"
"Hey! I'm trying to setup sequelize relations on a service, I've got the following hook -
const setRelationships = context => {
  postgres.models.customers.hasMany(postgres.models.addresses)
  context.params.sequelize = {
    include: context.app.service('addresses').Model
  }
}

I have 1 customer record with 2 addresses. Feathers returns two duplicate customer records with flattened ""addresses.id"": properties. How can I setup feathers to return the single customer record, with an addresses array?"
I am getting audience invalid when trying to send a request with the token returned from the clientTokens service..
"Hi guys, can you share good resources to learn and get a good foundation of feathers? Because Im trying to sell feathers to our team and learning that it will support koa in the future, im definitely gonna invest in feathers"
"Hi guys, I'm trying to implement Gihub omniauth and am struggling a bit with what to do on the client side. I am using Feathers as a standalone app and using the client side piece to connect from a React app. In the guide (https://docs.feathersjs.com/guides/auth/recipe.oauth-basic.html) it just says to put a link to /auth/gihub as this is is shortcut for redirecting to Github with the clientId. Obviously if I just put this /auth/github link in my React app then nothing will happen. What am I missing here?"
the problem is that it is difficult to parse the error message as this seems to depend on the locale of the hosting server... That's why I am trying to have an error status code that is more specific than 400 BadRequest when possible
"I will explain what I am trying to achieve here. I have a generic mediasservice that allows the user to upload any media (photo, video, music...). This media file is then stored on the disk and associated information (owner, size, type...) is stored in a medias table in the database. Then, I have another specific service called 'avatar', that allow a user to upload it's avatar picture. Under the hood, this service call the 'medias' service to store the avatar picture as a regular media and call the user service to patch the connected user with the new avatar information. The problem I am facing is that I use multer as a middleware to handle http file upload. But, as it is a middleware defined out of service, it run for any service method (and I only want it to run in case of a medias.create() call, not if it is a medias.get() call for example). Additionnaly, when I call medias.create() from inside my avatar.create() method, the multer middleware do not run (so the service call will fail). Ideally, multer should be called inside a hook (which will allow to restrict it to some service methods and also allows it to run from internal service calls). But multer is a regular express middleware (that expect req, res and next) so I am not sure it can be called from inside a hook..."
Yea just trying to see if it's possible
"I spent my whole evening last night trying to figure out a Docker problem - turned out to NOT be a Docker problem, it was my app. ffs."
I don't know enaugh with oauth to help you here but the problem is clearly that you are trying to create a new user with an auth0Id that already exists. What is auth0Id exactly? is it some user id provided by the auth provider? and did you add it yourself to your model or did feathers cli add it when you created your auth?
"I’ve been trying to use on the client side: feathers.authenticate( { strategy: 'facebook', accessToken: localStorage.getItem('feathers-jwt') } ) But that’s the response I get: XMLHttpRequest cannot load https://www.facebook.com/dialog/oauth?response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A3030%2Fauth%2Ffacebook%2Fcallback&scope=public_profile%2Cemail&client_id. Response for preflight is invalid (redirect) ---- The feathers app is running o localhost:3030 and the client is running on port 8080"
"I'm trying to use an existing table. The default knex model doesn't really have a name. I actually have no idea how features is determining what to use.
/* eslint-disable no-console */

// source-types-model.js - A KnexJS
//
// See http://knexjs.org/
// for more of what you can do here.
module.exports = function (app) {
    const db = app.get('knexClient')

    // db.schema.hasTable('source-types').then(exists => {
    //     if(!exists) {
    //         db.schema.createTable('source-types', table => {
    //             table.string('name').primary()
    //         }).then(
    //             () => console.log('Updated source-types table'),
    //             e => console.error('Error updating source-types table', e)
    //         )
    //     }
    // })

    return db
}
"
"thank you btw, for the help 🙂 I have only been on feathers for about a week. Trying to replace my services with it."
"@abhisekp Populating is making joins between records. What you are trying to do is not that. As @ofeka wrote, you'll have to roll your own hooks. Its possible you can use populate initially and mutate the results into the form you want in a following hook."
"I am trying to allow a user to link accounts from multiple auth providers as described here: https://github.com/feathersjs/feathers-authentication/issues/402, and a solution is mentioned here: https://github.com/feathersjs/feathers-authentication/issues/550 but I am having trouble understanding exactly what I would need to do to get this working. Some guidance, or an example would be greatly appreciated."
It sounds like you need to spend a little more time in the manual (not trying to be a jerk)
"@marshall The issue I'm having is that the ""skipIsVerifiedCheck"" flag in the feathers-authentication-management options is ineffective because the sendResetPwd hook is calling find on the users service. The find hook is authenticated with jwt, which was setup during default auth generation. I'm trying to inspect the hook object for something that indicates the sendResetPwd action, but I can't find anything. There's not a data prop on the hook object at that point."
"Hello feathers community 👋, I need a little help. I am trying to authenticate a user on the server using feathers via a graphql service. I am getting the following error:
info: error: authentication - Method: create: No auth token
[1] error:  NotAuthenticated: No auth token

which is weird, because here is what I am doing on the server:
js
import * as feathers from ""feathers/client""
import * as rest from ""feathers-rest/client""
import * as hooks from ""feathers-hooks""
import * as auth from ""feathers-authentication-client""
import * as superagent from ""superagent""

export function Mutations() {
  const app = this

  const base = http://${app.get(""host"")}:${app.get(""port"")}
  const client = feathers()
    .configure(hooks())
    .configure(auth({}))
    .configure(rest(base).superagent(superagent))

     return client
        .authenticate({
          strategy: ""local"",
          email,
          password
        })
        .then(response => {
          console.log(""Authenticated!"", response)
          return client.passport.verifyJWT(response.accessToken)
        })
        .catch(e => e)

Anyone has any ideas why I would get this error? What's interesting is if i switch the orders of the strategies, i get a different error saying ""missing credentials"". Any help appreciated 🙂"
"I'm trying to find a solution to the problem, catch() won't do it. I'm basically running service.get() and if it doesn't exists in the DB I planned on fetching it in the error hook and then return after adding it"
"We are trying to have a real time replication using feather-redux but some how instead of adding , it is changing the last element for the new one In the pic you should see 301,300,299,... but is doing 301, 299,..."
"I was trying to say that it seemed for what harmony was writing that the client was the one writing, compiling, and sending the email"
"I trying to find a way to associate a user but only if they are logged in, if there are not logged in they should still be able to use the service. My current thinking is something like
const assignUser = [
  authenticate(['jwt']),
  associateCurrentUser({ idField: '_id', as: 'owner' })
];

exports.before = {
  all: [],
  find: [],
  get: [],
  create: [iff(isLoggedIn, assignUser)],
  update: [],
  patch: [],
  remove: []
};

but I'm sure how to check if they are logged in without authenticate(['jwt'] but that then give access denied for not logged in users."
What would be the best way to troubleshoot something like the following error message. i get hundreds of these when trying to perform a service call to one of the services.
"hello feathers friends... quick question. Is it possible to run an AND query? For instance, I am trying to query for records within a date range, using a combination of $lte & $gte:
query: {
        customer: customer,
        dateValue: {
          $lte: dateEnd,
          $gte: dateStart
        }
      }
"
"I'm trying to capture webhooks from the mailgun API at the service endpoint but the webhooks for dropped messages and hard bounces seem to create a response from the api, but don't actually capture any of the data."
I'm trying to make server-side rendering with Nuxt working. The problem is that the user is not authenticated on the first request (the server rendered request)
"hi everyone! I'm trying to figure out authorization hooks in featherjs and I'm a bit stuck with my use case. For a find/get method of a service I want to allow only owned entities or, if a user belongs to specific role (i.e. admin) - to send all. I was playing around with restrictToRoles and hasRoleOrRestrict but can't get either first or the second part of the case to work. Any suggestions?"
"jarnojellesma uploaded a file: Untitled and commented: I have this middleware on my front-end (Nuxt Js). But when I try to use the feathers client to authenticate, it throws a 'window is not defined' on the setJWT method. So now I'm trying to do it without the feathers client, and it throws a ""Can't set headers after they are sent"""
"success works fine, but I am trying to debug why I can't throw an error message"
"Can someone please help? I'm trying to populate an field inside an array, where the populated data replaces the actual field. Currently I can create a second array with all the populated data. I created this more detailed write up of my issue: https://gist.github.com/anonymous/af5ccfbf42087736d955ee7ec4f3d658"
"question regarding feathers and sequelize. I am trying to perform an update in one of my tables with a null value for one of my fields. The problem is that the feathers-client, that use the json format to send my request via sockets transform the javascript null value into the 'null' string. Which further result into an error in the SQL query generated by sequelize as I have myfield='null'instead of myfield=null. Is there any way to define a null data property value with feathers (whithout having to define a before hook that would transform 'null' into null)?"
"Hey, anyone knows how to make a sequelize migration with feathers? I'm following https://docs.feathersjs.com/api/databases/sequelize.html#migrations But trying to rename my table in a migration script returns an error."
"@ryan.wheale I will try this now. About the 1st step I think I can't assume the migration has already run before. In my case I was trying to rename my table and the sequelize db:migrate was creating the institutions model before running the migration because I changed first the model and was trying to apply the migration after. What I did in order to rename the table was revert to my previous table name, preform the migration and then rename again in the model. Since I haven't found any documentation on this, is this the correct way to rename tables?"
"I haven’t used it in production yet but I’ve been having no issue with it in development. It’s really just a wrapper around feathers-client with some pre-fab reducer functions. Not trying to minimize it, it’s actually incredibly useful."
I'd recommend using it as inspiration and trying to write a lot of it yourself @lonewolf
"@pward123 you are probably trying to do service.on(‘patched’,…)"
"Hello all, trying to do facebook auth once my app is deployed in a server and it keeps sending me to a secure “https” address, if I just remove the “s”, it process completes successfully"
"I can't seem to get this to work. I must be doing something wrong. Just trying to get any custom middleware. This is what I have it's probably in the wrong spot.
'use strict'

const Service = require('feathers-mongoose')
const Model = require('./model')
const hooks = require('./hooks')

const options = {
  Model,
  lean: true,
  paginate: {
    default: 24,
    max: 240
  }
}

module.exports = function () {
  this.use('csvLookup', Service(options), test)
  this.service('csvLookup').hooks(hooks)
}

function test(req, res, next) {
  console.log(req)
  next()
}

nothing is getting logged though. Any ideas what I'm doing wrong?"
"I'm trying to plan out a microservices project with feathers. Any best practice recommendation on differentiating container/service originating queries from client queries in hooks when you split up the services? disallow('external') or provider('external') hooks etc, for example, can't handle that in this case."
and am trying to do the following ... (which works with my other dependencies)
"Yeah, I'm still an old school js person for now... trying to learn the new stuff since some of it seems useful."
Perfect thanks. Search engines were of no help when I was trying to search for 3 dots.
When trying to authenticate
"Hey guys. I am trying to add Auth0 authentication to Feather JS. I logged in with dashboard client and trying to pass Bearer ${token}. Error response from the feathers:
{
    ""name"": ""NotAuthenticated"",
    ""message"": ""invalid signature"",
    ""code"": 401,
    ""className"": ""not-authenticated"",
    ""data"": {
        ""name"": ""JsonWebTokenError"",
        ""message"": ""invalid signature""
    },
    ""errors"": {}
}
"
"I’m trying to implement email verification thanks to Feathers Authentication Management. I’m following this article https://blog.feathersjs.com/how-to-setup-email-verification-in-feathersjs-72ce9882e744. I totally understand the process I’m just lost with were I have to put the different part of code in feathers. E.g. Where do I have to setup the Mail service ? Which file ?
(I am working on a boilerplate for Feathers-Vue that is semi-finished but you can begin working with it that uses the techniques shown in…"
"Hi All, i'm a little lost with feathers auth and wondering if anyone can help... trying to query users if I have the role 'editor', for all other users that have the role 'editor' and get their names and user id's"
I randomly get Error in connection establishment: net::ERR_NOT_IMPLEMENTED when trying to connect with the feathers-client through websockets from a client.
"Hello ! I'm trying to use feathers-permissions in my app. This is what I have so far : const permissions = require('feathers-permissions') const adminPermission = permissions.hooks.checkPermissions({ roles: [0], on: 'users', field: 'role' }) const service = app.service('secretService'); service.hooks({ before: { all: [ //adminPermission, //permissions.hooks.isPermitted(), authenticate('jwt')],}"
Not quite quite sure what you’re trying to do but I’m thinking you could just add an after hook that set a fullname propertyy as well. Not sure why you need aggregate at all.
"i am first trying to add a column 'fullname' that is a concat of firstname and lastname, then using $search to search in that column."
"that makes sense, i was trying to make it easier to work with"
... i think JWT has the same issue. I'm trying to run this code on the browser: of course taking out the socketio and rest stuff https://github.com/feathersjs/feathers-authentication-local/blob/master/example/app.js
Trying to run an authentication server on the browser... looks like 'feathers-authentication' requires net and dns from node 😕
"Im trying to set up a module that pretends to be a server. So I can log in, without having a server... for QA and workflow reasons."
Are you trying to cluster on one machine?
Hi guys. I have an _id in route.params.id that I'm trying to pass as payload into const { data } = await feathers.service('properties').get(payload) but I'm getting undefined result.
I’ve spent the last two days off and on trying to figure out how to do this but idk.
"I am trying to create a ""change password"" request where user has entered existing password and a new password. I'm doing a .patch() request, and adding a hook to check the existing password. How can I call the hashPassword() hook manually from within this hook (so I can match it with the hash stored against the user)?"
I am trying to add custom restrict by owner to Find method. But i have {} in hook... Any way to get the request from hook? I would like so use params.payload.user_id
Everybody says that ... I guess I probably should do it. I have VS code but haven't used it much ... trying to make Atom work but it is slow
"Hey guys, I'm going through the Chat Application guide, trying to do some modifications: I'd like to use RethinkDB (which works), but using ""email"" as the primary key of my users table, so adding another user with the same email adress fails. In messages.service.js I added the id: 'email' field to the options for createService like so:
const options = {
    name: 'messages',
    id: ""email"",
    Model,
    paginate
  };

but the table is still created with id as the primary key. Any clues?"
has anyone created a custom service without one of the built-in adapters? I'm trying to make one which connects to an amqp server (rabbit-mq)?
I think that if you don't override the response in the hook it might still be trying to load the service
"Hey guys ! I would like to know if there is some webpack expert here ? I have build a little front with VueJS CLI (I know it’s more react here but the problem seems to be here with react-create-app). I wanted to serve a static pdf file onClick on a btn. But it’s not working. After some hours trying to figure it out I came to the fact that’s a webpack issue and how it render url for static file. I found this on S/O https://stackoverflow.com/questions/36643649/serving-static-pdf-with-react-webpack-file-loader But I have no clue how to implement it (I got error).
I'm serving up some static files like images and fonts, without any problem. When I try to do the same with a PDF file, I get an Error. ERROR in ./src/views/default/components/Footer.js c:\"
"Hi folks, I'm using feathers with feathers-rethinkdb and I'm trying to store a point in the db with the create method of my service. I have created this hook to transform a json in to a rethinkdb point :
const transformCoords = hook => {
  const {r}  = hook.service.options;
  const {latitude, longitude} = hook.data.coords;
  hook.data.coords = r.point(parseFloat(longitude), parseFloat(latitude));
};

but when it is executed my backend returns this error:
{
    ""name"": ""GeneralError"",
    ""message"": ""toJSON takes 0 argument, 1 provided after:\nr.point(0, 0)"",
    ""code"": 500,
    ""className"": ""general-error"",
    ""data"": {},
    ""errors"": {}
}

how can I insert that point into the database without having that error??? Thank you very much 🤓"
"Writing a more complicated population hook. At one point I iterate through a list of id's and I'm trying to replace them with the data that corresponds to them. To get the data I'm calling
hook.app.service('cats').get(data[i].cat).then(page =>{data[i].cat = page;})
This isn't really working..."
"I'm trying to allow temporary users to be created for guests who aren't ready to sign up. I've written a hook to check for the existence of otherwise-required authentication fields and generate partially random but identifiable fields. However, because the REST handler is doing validation rather than allowing the service to handle the request and validating there, it doesn't seem like I can do this."
"I'm trying to allow temporary users to be created for guests who aren't ready to sign up. I've written a hook to check for the existence of otherwise-required authentication fields and generate partially random but identifiable fields. However, because the REST handler is doing validation rather than allowing the service to handle the request and validating there, it doesn't seem like I can do this.
I'm trying to allow temporary users to be created for guests who aren't ready to sign up. I've written a hook to check for the existence of otherwise-required authentication fields and generate partially random but identifiable fields. However, because the REST handler is doing validation rather than allowing the service to handle the request and validating there, it doesn't seem like I can do this."
"I have a win OS laptop, using as a 3rd-screen / test box next to my MacOS main, and it suucks. Not just interface, it just ... ""Updates are available ... restarting a bunch of times, etc."" Why do you need to restart a bunch of times to install updates? Goofball legacy crap that you've swept under the rug instead of trying to fix, maybe?"
are you trying to sync two instances?
"just get a bit lost in all these promises, especially when trying to populate the find response, then I have to loop through all the found objects do the population through promises"
"@daffl Trying to switch to async /await, but getting syntax errors when adding async to find/get/create/remove/etc as in this example [example](https://feathersjs.slack.com/archives/C0HJE6A65/p1505927390000259?thread_ts=1505925458.000141&cid=C0HJE6A65)
Btw, this is much more straightforward with async/await:
const errors = require('feathers-errors');

async get(id, params) {
  try {
    const data = await robot.connect();

    return {
      'meta' : {
        'resource': id,
        'timestamp': Date.now(),
        'success' : true
      }
    };
  } catch(error) {
    throw new errors.BadRequest(err.message, {
      'meta' : {
        'resource': id,
        'timestamp': Date.now(),
        'success' : false,
        'message' : 'Connection failed. Is your port set correctly?'
      }
    });  
  }
}
"
essentially I am trying to sync specific instances.
"which would be fine, except that I am trying to create a consistent API."
"Yes sir, I have the hook, I am trying to get information from there into socket.feathers object for filters later."
"https://stackoverflow.com/questions/6161567/express-js-wildcard-routing-to-cover-everything-under-and-including-a-path looks like this works for me app.use('/api*',...) and app.service('/api*');
I'm trying to have one route cover everything under /foo including /foo itself. I've tried using /foo* which work for everything except it doesn't match /foo. Observe: var express = require(""expre..."
yes that's what I'm trying to do...
"I’m trying to set the content-type header, but it’s getting overwritten with application/json; charset=utf-8. My other headers work though"
"Sorry! I don't understand. If you're testing services, why are you trying to inject a hook?"
The point @harmony was trying to make is that you use the tool with whatever config you want and eslint comes with a default set
"Hey, so I'm fairly new to feathers, trying to figure out how to set up a ""nested route"", like app/teams/{teamId}/members/"
"initial service is called with provider=rest and the params are passed on to the internal service call. I have a JWT token that's resolved to a user via a hook and the access_token is deleted from hook.params. now when i call another internal service, it ends up trying to verify the JWT again instead of just using the hook.param.user object"
"I'm googling but I'm not seeing much related, I might be missing a term, I just know them as ""child"" or ""nested"" routes- is there another name for what I'm trying to do, maybe?"
"i use aws, so I'm just trying to brainstorm with you here"
Long story short: Trying to do something from a Discord bot client and the connection to feathers times out.
Hello 🙂 I'm trying to call another service from a hook and work with the result i get from there - is there an easy way to do this?
I'm trying to write test for users in a pretty basic generated app
"yep just let’s say you got service B where you want to get a record from service A. const user = await hook.app.service(‘A’).get(id);
Hello 🙂 I'm trying to call another service from a hook and work with the result i get from there - is there an easy way to do this?"
"yeah, I mean I'm just trying to get a feel for it using the default stuff with as few changes as possible"
"Hi i have a rather newby question i guess :S im trying to remove a spesific message using this: this.socket.emit('messages::remove', 2, { _id: String(_idToDelete) }, (error, message) => { console.log('Removed a message', message); }); But it seems that that _id is not a real field that can be used to remove spesific message am i right ?"
"Hi all, forgive my n00bness, trying to figure out all this cool new stuff with DoneJS and Feathers... In looking up a MySQL adapter, I ran across https://github.com/feathersjs/feathers-knex. But seeing as how I'm super dumb unless I actually see an example with _my type of database_ I'm not sure how to adjust it for the other DB's it says it supports. Anyone have a quick MySQL example they could help me out with?"
"Any DoneJS knowledgeable peeps in here, in conjunction with feathers? I'm trying to turn a feathers api response into a usable Promise for a DoneJS template and having a timing issue. Let me know, I'll give more details. Otherwise I'll try the DoneJS chat too."
What i'm trying to do is move this script from the meteor ecosystem to feathersjs
what i am trying to do is anytime a new message is created i will give it a timestamp
"Well, I don't have a domain to associate it with, I'm trying to use their sandbox just for testing"
Yep that’s what I’m trying to do.
"To be fair, Redis alone would probably accomplish what you're trying to do quite nicely."
"Hello! I am trying to make a chat. I've implemented rooms service. Now I want to invite another user to room. On client I am doing this.services.rooms.patch(roomId, { email }); So just sending which room should be patched and as parameters sending email of user. On server I've implemented hook:
      (hook) => {
        return new Promise((resolve) => {
          hook.app.service('users').find({
            query: {
              email: hook.data.email,
            },
          }).then((users) => {
            if (!users.data.length) {
              throw new errors.NotFound(User with email ${hook.data.email} not found);
            }
            hook.params.query = Object.assign({}, hook.params.query, {
              $push: {
                members: users.data[0]._id,
              },
            });
            resolve(hook);
          });
        });
      },

I am searching for user in database, then changing query in hook. But $push not working here for me. Maybe someone knows what is wrong?"
"I was trying to use the validateSchemafor that, but I think it only works on the hook.data"
"Hi folks, I’m using feathers and I’m trying to authenticate myself using facebook strategy… this is my current code:
  login() {
    this._feathers
      .authenticate({strategy: 'facebook'})
      .then((res: {accessToken: string}) => {
        console.log(res.accessToken);
      })
      .catch(err => {
        debugger;
      });
  }


I’m receiving the token, but I didn’t login with facebook… I haven’t been redirected to facebook to do so"
"(I was trying to bundle jsonwebtoken before, to use it’s APIs, but webpack was not having that…)"
"Ok, I missed this today. So what I’m getting is: write a new hook which does the same as the default remove handling but fix the query aspect as needed. That is roughly where I originally started but by trying to query the composite keys however I will take a fresh look at it, including a look through the remove() default implementation on github."
"Question regarding populate: I am trying to populate users that are in an array of results.
data = {
...fields,
results: [{user_id: 123}, {user_id: 124}, {user_id: 125}]
}

Trying to populate each user at
data.results[index].user_id
{
    service: 'users',
    nameAs: 'user',
    parentField: 'results.user_id',
    childField: 'results.user',
  }

this does not work, but not sure how to loop each result. I have read the docs and cannot figure this out, any help would be great!"
I’m trying to run a feathers app in a subfolder of a node app. So the package.json file is one folder higher than the src and config folder
It is the case. Theres no data in a remove query. If you tell us what you're trying to achieve at a high Ievel we can try and suggest a way.
"I'm trying to make use of the pre-release of feathers-vuex 1.0 but everytime I insert initAuth as described in the readme, I receive this error: Object(...) is not a function"
"Generally HTTP DELETE doesn’t need or use the body but it doesn’t prevent it: https://stackoverflow.com/questions/299628/is-an-entity-body-allowed-for-an-http-delete-request. However feathers doesn’t pass it. IMO you’d be muddling things by doing so: 1) perhaps PATCH is a better match for your semantics 2) if your model doesn’t have the needed associations to the other related objects do it as N different calls. Seems like you’re trying to stack multiple calls into one.
When issuing an HTTP DELETE request, the request URI should completely identify the resource to delete. However, is it allowable to add extra meta-data as part of the entity body of the request?"
i've been trying to figure it out but I don't think it's possible
"Yes, the docs show a array of Ids, The way my data is modeled results is an array of objects with a property of _id, just trying to see if that could work or if I need to remodel the data. and yes ChildField should have been _id, that was a typo. Thanks"
"Hey, I'm trying to upload files to several entities and I have been looking at https://docs.feathersjs.com/guides/advanced/file-uploading.html In this example all files will go to the same folder. How can I separate files by entities and add authorization when requesting a file? For example I need to upload an profile image for users and upload other images for portfolios gallery and only the owner of the portfolio can see the images. Should I create an upload service for each entity?"
Hi there! I'm trying to version my api. I was going to do it with a sub-app (as described in the legacy doc: https://legacy.docs.feathersjs.com/middleware/routing.html) but I read somewhere else (git issue I think) that this was not encouraged...
"I am working on a first project with feathers. Development in general is pretty new to me so hope this doesn't come across as stupid. I have created an app with FeathersJS backend. Basically almost everything is standard out of the cli. I have a couple of services and authentication. Works fine on locahost. Currently I am having a go at trying to deploy the backend. I tried basically every cloud provider with an app service (AWS, Azure and Google Cloud). However, I can't get it to work. It works when I use a bare EC2 instance and configure it manually (without proxies or anything). Could someone point me into the direction of what I am missing here?"
It looks like you are trying to do a bunch of customized stuff (or working on an existing app) which can be quite difficult just jumping in.
I'm trying to wrap my head around how does feathersJS handle CRUD operations
Trying to configure it manually now. I'll let you know how that works for me.
"@daffl Hey, I'm trying to create one upload service that changes the upload folder dynamically (to organize the uploads by folder) and you told me about an issue on github (https://github.com/feathersjs/feathers-blob/issues/21) but I'm not being able to make it work. Can you give me a more complete example please?"
I'd really recommend generating an application first before trying to migrate s pre existing application
@rjp commented on @rjp’s file Service route to another Service: So I’m trying to figure out the best way to do this. I really don’t need or want to have a ticker/x path - but if it is necessary to generate a service for x I need to restrict any external calls to that path. End result I would like to accomplish is a POST with params to /ticker
"Hey... I was away for a bit, but I'm still trying to figure out the best way to test a reset password path with feathers-authentication-management, wondering if anyone has any experience with that?"
"Thank you, solid explanation. I'm fairly comfortable with ES6 and ES7 JS, and already try to use async/await wherever possible, but I don't think I'd be comfortable trying to set the groundwork for an enterprise scale application in Feathers, just due to unfamiliarity."
"Hi all, I am trying to add Kue to feathers.js and have it initialized"
"I'm trying to set up user roles and permissions, right, so I have a ""roles"" service, and each ""role"" has an ID and a set of ""permissions"". So you might have something like role: { name: 'admin', permissions: ['manageUsers', 'manageTeams', 'editContent'] }"
"🙋 ❓ While retrieving data from two different collections in mongoose, how do I paginate using a custom service? Is a custom service the right option here? I'm trying to store messages of a room in a single collection. But a message can be of different type. And depending on different type, I want different schemas. But they're to be retrieved and paginated at a time. So how do I create services for my scenario to handle this? Here, I need help with the following - creating services - architecting the system appropriately - storing and retrieving the data"
is there a way to use an error hook in a way that the caller would resolve? instead of reject... I'm trying to fake an expected result and pretend nothing bad happened.
"Hey guys, I am running up against a brick wall on an authentication error. Wondering if anyone would have time to help me hunt it down. Essentially I am trying to create a user, and my server is trying to authenticate my user before creating. which is obviously failing. Very odd… but my console.trace() runs me up against “<anonymous>” code which means I cant get out of the “feathers-authentication” module and figure out where the call is originating."
"For example, I'm trying to store the total vote count in another collection which would store the $sum of the the votes from the votes collection that stores the individual votes counts."
Im trying to return a result in an error hook for a find method. I put the data in hook.result.data but feathers still complains about an invalid hook object?? this method works great for the get method.
"Hey.. I already have an existing VueJS project, I'm trying to implement the feathersjs client into, to connect to an existing Featherjs backend. How would I go about implementing the oauth into the VueJS project. OAuth work's when I do it on the public html inside the feathersjs project"
"I'm trying to follow: https://docs.feathersjs.com/guides/auth/recipe.oauth-basic.html the only difference is that I am not using the frontend client for now, I am using Postman which has the access_token. What is the url and params (cookie? json? url?) for feathersjs to log me in with this access_token from github?"
"@matt_c I think I'm not using hooks, I'm just trying to check if the user is logged in or not on the template engine."
"Hello everyone, i am trying to use disallow('external') in a service and calling that service internally and doing this hook.params.provider = 'server' ; before it is equals to rest , what i am doing wrong , i am getting error "" Provider 'server' can not call 'create'. (disableMethod) "" . Please reply ASAP ."
you probably trying to tell me that I actually have to keep this data under users service?
What are you trying to do? payload2 will always be a new object and changing the length wouldn’t really do much.
am trying to get the new lenght of payload2 at each time the hooking is called in a loop
"You haven’t shown the whole create hook but it sounds like you’re describing roughly something like this - comments inline:
before: {
create: [ (hook) => {
  items = ??? // magic, you don't say where these come from
  // and @daffl pointed out that in before hook, there's no data yet

  // note: no one understands what you're trying to do with items in a loop
  // when create() generally is used to create one item
  items.foreach( (elem) => {
    return hook.app.service('beneficiaries').find()
     .then( () => {
       // do payload stuff to try and count something...
       // try turning on paginate in beneficiaries service to get 'total' property
       // or do an after hook in beneficiaries::find() to add your own total to result
     })
  }
}]
"
"Hello, i'm trying to achieve some thing like in this issue - https://github.com/feathersjs/authentication/issues/178 Could someone please provide some example or advice what is the correct and up-to-date way to get current user id server side? Or how to work with https://docs.feathersjs.com/api/authentication/hooks.html#querywithcurrentuser from server side, from expressjs routes"
"I'm trying to connect with postgres + sequelize and i'm getting this error:
info: Feathers application started on http://localhost:3030
error: Unhandled Rejection at: Promise  Promise {
  _bitField: 18087936,
  _fulfillmentHandler0:
   { SequelizeConnectionError: connect ETIMEDOUT 172.28.204.170:5432
       at connection.connect.err (/Users/user/Documents/studies/feathers/pg-feathers-sequelize/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:108:24)
       at Connection.connectingErrorHandler (/Users/user/Documents/studies/feathers/pg-feathers-sequelize/node_modules/pg/lib/client.js:123:14)
       at emitOne (events.js:96:13)
       at Connection.emit (events.js:191:7)
       at Socket.<anonymous> (/Users/user/Documents/studies/feathers/pg-feathers-sequelize/node_modules/pg/lib/connection.js:71:10)
       at emitOne (events.js:96:13)
       at Socket.emit (events.js:191:7)
       at emitErrorNT (net.js:1284:8)
       at _combinedTickCallback (internal/process/next_tick.js:80:11)
       at process._tickCallback (internal/process/next_tick.js:104:9)
     name: 'SequelizeConnectionError',
     parent:
      { Error: connect ETIMEDOUT 172.28.204.170:5432
          at Object.exports._errnoException (util.js:1034:11)
          at exports._exceptionWithHostPort (util.js:1057:20)
          at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1096:14)
        code: 'ETIMEDOUT',
        errno: 'ETIMEDOUT',
        syscall: 'connect',
        address: '172.28.204.170',
        port: 5432 },
     original:
      { Error: connect ETIMEDOUT 172.28.204.170:5432
          at Object.exports._errnoException (util.js:1034:11)
          at exports._exceptionWithHostPort (util.js:1057:20)
          at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1096:14)
        code: 'ETIMEDOUT',
        errno: 'ETIMEDOUT',
        syscall: 'connect',
        address: '172.28.204.170',
        port: 5432 } },
  _rejectionHandler0: undefined,
"
"Now you can try to figure it out. You are trying to connect to a remote db - ther are 50 different things that can get in your way - firewalls, network proxies, permissions, etc."
"@ryan.wheale I really appreciate the CLI tools, huge help. By their nature there is built in knowledge there I don’t have yet. I guess I’m trying to understand why the middleware would ever be before authentication helpers - just naiive at this point."
and when i'm trying to auth like in express middleware example - it says that there is no Auth token but prior to that i have logged in on a client side with client.authenticate
"and i'm trying to achieve it with this code:
const auth = require('feathers-authentication')
const authenticator = auth.express.authenticate('jwt')

app.get('/test', authenticator, (req, res) => {
  console.log(req.user);
  res.end(req.user);
});
"
hey everyone! trying to sync feathers event across multiple containers and tried using https://github.com/feathersjs-ecosystem/feathers-sync
"Hey guys, I'm hoping you can tell me if this is possible or not. I have a project where I have a /reports and I'm passing the parameter ?report=firstreport All of that is working great. What I'm trying to do is call a hook(s) from this getReport hook. Is this possible?
// after: { all: [ getReport() ] }
module.exports = function(options = {} ) {
return function getReport(hook) {
let report = hook.params.query.report;

switch (report) {
    case ""firstreport"":
        //call hook firstReport();
    break;
    case ""nextreport""
        //call hook nextReport();
     break;
  }
    return hook;
  };
};
"
"Hello. I am trying to do a raw sql query by using sequelize.query and then submit the persisted data to all connected clients (via socket.io) in an event. I have it working to the sender with the following: 1) set hook.result in before hook and skip the service method call 2) do the call in after hook and then set the hook.result (hooks: after.patch: [updateTileTypeAtIndex()], edit: found out no hydration needed)"
"no, was trying to show that I have an object with multiple fields, one of which is an array."
"that was my bad, I forgot it in trying to be concise"
"How might one go about having local authentication and a oauth2 in their app? I've setup local and I'm trying to implement github. When I try to login with github from /auth/github, I get this in my server: BadRequest: notNull Violation: email cannot be null, notNull Violation: password cannot be null. How would I fix this? (I'm using sequelize and postgres)"
"Hi everyone I’m trying to update element in array and found same issue in feathers repo(https://github.com/feathersjs-ecosystem/feathers-mongoose/issues/208) but I’m getting error
The positional operator did not find the match needed from the query. Unexpanded update: courses.$.finished"
and record that I’m trying to patch
i am trying to understand hooks to my service
I’m trying to do this from client
I’m just trying to patch element of array in my collection
Is there anyway I could make the feather-authentification work with a normal express route? basically I’m trying to make that work? https://github.com/agenda/agendash#middleware-usage Like the example under it with that try to check req.user.. but of course req.user is undefined. So I need a way to make authenticate('jwt') work with that. What would be the easiest way to make that work with feather?
"well, that’s exactly what I’m trying to do"
"That ""req.user"" line is triggered after the request goes through the auth middleware, so what exactly are you trying to achieve?
Is there anyway I could make the feather-authentification work with a normal express route? basically I’m trying to make that work? https://github.com/agenda/agendash#middleware-usage Like the example under it with that try to check req.user.. but of course req.user is undefined. So I need a way to make authenticate('jwt') work with that. What would be the easiest way to make that work with feather?"
"I am trying to build a microservices architecture based on Feathers, what is the best way to create the API gateway? Should I create a custom service and use the request-promise module?"
"What are you trying to achieve, on a higher level?"
"That ""req.user"" line is triggered after the request goes through the auth middleware, so what exactly are you trying to achieve?"
"@teddy-error sorry if I was too ambiguous, what I'm trying to achieve is to create an API gateway that will send requests to other microservices, get the results, merge them into one object and send the object as a response to the client, I don't know if this approach is somehow standardized in Feathers or I will have to hardcode it the old way"
"Oh also, there is https://stackoverflow.com/questions/39908392/feathers-js-restrict-access-to-page-on-server-side
I'm using feathers.js and am trying to restrict access to the payment-info.html page to users that are logged in. const app = feathers(); app.configure(configuration(path.join(__dirname, '..'))..."
"hey there, i'm trying to call a service that needs authentication from a hook from another service, but it fails telling me I'm not authenticated. Can I forward an successful jwt authentication to another service call?"
"so basically I’m using agenda.. a node module to deal with crons task .. I plugged it with feathers an it work fine. https://github.com/agenda/agenda But there also that optional web interface to monitor it that you can run by starting a separate process. But if you do that it’s unprotected. One option that they give you to make it secure is to instead create your own express route in your current express app that call it after checking that you are authentificated. That why I’m trying to plug that in feathers so I don,t need to make a separate express client for it with it own authentification and everything. Idealy it would just check that you are authentificated in the cms and an admin and I would put a link for it in the cms or something like that."
"<a href=""/auth/github"">Login With GitHub</a> fails because react is trying to map a component to that link"
"In my architecture, I got one feather server (as API server) and another feather server as webserver (client view). But now, I need to add some particular API endpoint on the webserver side. On my API server, I can call all my local service througt app.service() :
/* Feathers Rest */
const rest = require(""feathers-rest"");
app.configure(rest());

But on my feather (web server) I have already configure a rest client (to access my api server.) I was wondering how can I expose all my local endpoints in addition to my api server endpoints."
"Hi, is it possible to configure more than one Rest Client (server Side) for a same app ?
/* Rest client (Request API) */
const superagent = require(""superagent"");
const client = require(""feathers-rest/client"");
const rest = client(app.get(""first-api-url""));
var superAgentOptions = {
  headers: {
    ""API-Key"": _.get(app, ""settings.first-api-key"")
  }
};
app.configure(rest.superagent(superagent, superAgentOptions));

How can I add another Rest client for a ""second-api-url"" after the code above ?"
how can i test routes / middlewares?
"I'm trying to register and login with JWT, but when I create a user, I don't receive a JWT back. So I POST to http://localhost:1337/users with email and password, and get back:
{
  ""email"": ""test@test.com"",
  ""_id"": ""Z36HnhfOs1P68Fia""
}

I've instlled feathers-authentication and have added the configuration:
.configure(authentication())

bodyParser has already been set up. What am I doing wrong here? How can I get the JWT?"
how can i call a url means i have to send email /get response from some other api and send it to db rather service .
"Hey guys, I am getting a Not Authenticated Error with the new auth client, how can I debug this on the feathers server side?"
"Hi, I would like to use hooks to set an attribut to ""isDeleted"" = true on ""remove before"" and prevent my record to be officially ""deleted"". How can I ""stop"" the propagation of ""remove"" flow after my hook set the attribut ?"
"How can I download file (secure) via feathers service or another way? I tried to use feathers-blob (blobService.get). I get object with data, but i need smth like ""res.download"" in express. Also I tried use middleware after service where I need to use http get method and I had trouble with authentication. Can someone help? Thanks."
How can I modify a database query with sequelize so that it only retrieves select fields from the database?
"The main question is how can i respond from a service with binary file (in REST) In express i can do this:
function returnImage(req,res){
                const img = fs.readFileSync(filepath);
                MimeType = ‘mage/jpeg’;      
                res.writeHead(200, {'Content-Type': MimeType, 'Content-Disposition':'attachment; filename=’+filename});
                res.end(img, 'binary');
}

How can I access this (req,res) express from a service get method? I would like to use Services and not plain and bare app.use(/foo, bar) express middleware because of the user auth and hooks, who prepare the file."
How can i get my feathers clients connecting to my backend via feathers-socketio to support cookies? I’m trying to have it respect the loadbalancer cookie that is given from the backend that the clients connect to.
"hey guys, how can I query a table (or use a service) in a global hook?"
"Hi, how can I define a hook chain in an array fashion in app.hooks.before, after, error hooks? It seems to accept only one hook function.... when i define:
app.hooks.before({
    all:[globalHooks.logServiceEnter()],
    get:[],
    patch:[],
    update:[],
    remove:[]
  });


It throws an exception app.hooks.before is not a function Thanks"
@daffl how can I provide a example?
"how can I pass token when I make query to my userService? I authenticate succesfully get token from the server and store it client side, but after when i do a query to my userService how can I provide the token so I can get the result?"
"How can I initiate a service, that is wrapped in a database adaptor, but still allows me to use my own service class. So, I like this: app.use(serviceName, new ServiceClass()), but in order to use my database wrapper, I have to do: app.use(serviceName, service(options)); How can I combine the two?"
how can I get the same error response I have when I do an http request and when I call the same route directly from the service client side? When I do the call to userService.create() I don't get the validation error details but when I do a http request to the same endpoint I get all the errors details
how can I do the include with sequelize inside my userService so I can include the role associated to my user?
how can I get the current user outside of a service? is there anyway to get that info through feathers object directly?
how can I increase JWT expiration time?
"hi. I am busy with FeathersJS with NeDB and Angular 2. I realized to up add JSON to the DB with
storeSettings(settings){
        var headers = new Headers();
        
        headers.append('Content-type','application/json');
        return this._http.post('http://localhost:3030/settingsdata', JSON.stringify(settings), {headers: headers})
            .map(res => res.json());
    }

However everytime i store something the JSON is added and not updated. How can i update the db instead of adding it."
how can I alter hook.result return in after hook with sequelize. I've seen a few issue with mongoose but couldn't find a way to do it with sequelize
"this is how I declare my my feather app
this.featherApp = feathers()
            .configure(feathers.hooks())
            .configure(feathers.socketio(this.socket))
            .configure(feathers.authentication({ storage: window.localStorage }));

how can I listen for general app connect/disconnect events of socket.io?"
how can I update? And what is patch?
How can I use token stored in localStorage and if not then use local auth?
how can I write a script or something to migrate existing data with new schema
"one more question, let say I would like to create Profile in User service, how can I do it in my example above"
"I’m trying to configure StealJS with an existing Feathers app. However, I’m not able to load the StealJS from node_modules. The index is at the public directory of Feathers. The way I call Steal is <script src=""node_modules/steal/steal.js"" main=”main”></script>. But Feathers returns the following error: info: (404) Route: /node_modules/steal/steal.js - Page not found. How can I expose node_modules to be available on the public folder?"
Hi everyone! How can I change NotAuthenticated error message ?
"my question is, how can i make the event model aware of the invitations?"
"i'm using the feathers-cli@pre and i'm wondering how can I add filters? I see this in my service but it seems like there no generator for filters yet
'use strict';

module.exports = {
  // disable all events for this service by returning false
  all: [(data) => data],
  create: [],
  update: [],
  patch: [],
  remove: []
};
"
"I use filter to catch event client side, but how can I watch the same event but server side? how could I listen for users.created event server side?"
"Hi all, How can I verify JWT stored in client storage in the first place? I wonder let say, after login successfully I got the JWT from feathersjs server. Then next time when I reload page. I need to verify that JWT is valid, if not then re-direct to /sign-up page."
"yes, I know what you mean. I would like to add a new method to my service. I've created this ""foodService"" thru the cmd but how do I extend the service in order to have a ""filter"" fn? And how can I map that new method to a ""filter"" url? Maybe it's what you're saying: defining a new endpoint, load my food service and then implement my ""filter""..."
"one more question, Can I filter on association with build-in urls? Let says I have Profile model belongs to User model, and have name attribute on Profile model. I know we can make a request like /users?email=xxx.example.com to query User who has ‘email is xxx.example.com. But How can I search User who has Mick` in their name?."
"tuchi35 uploaded a file: Untitled and commented: Hi, I have a question related to services. I want to use one service that I got from a tiny web page. Smth like this (check snippet). My question is: how can I use the service in order to retrieve all the ""books"" that I have stored in the backend?"
"Hi team, How can I get current user with given accessToken, is there any built-in endpoint allow me do it?"
"Hey guys, how can I only update one field inside database using feathers-client ?"
"@eddyystop thanks. I did try that but it's only giving me the first 10 results. How can I change that limit? Is it possible to send the ""limit"" as parameter? How?"
"How can I disable these log entries on my terminal when I run tests?
error: (400) Route: /api/v1/venues - notNull Violation: name cannot be null
info: BadRequest: notNull Violation: name cannot be null
  <stack trace>
"
"hi, how can i use this socketio services in another app? Any one can help me out with some advices. Thanks."
I have an external REST service that allows me to open a streaming connection to receive real time data. How can I pass that data through feathersjs?
how can i include feathers-hooks-common
But how can I attach those identifiers ? Maybe through query string ?
How can I set a temp service listener and then remove it ?
"Hey guys, how can I add additional field using after hook ?"
"Hi all, how can I access the sequelize methods of my models after I define them?"
"How can I help you, help me?"
"Hey guys, how can I also populate the patched event ?"
"hi all, how can I access the sequelize methods in an after hook? I have access to hook.result, but cannot seem to reach the sequelize methods from it."
How can I set html5 client side routing ?
how can I update the id field?
"I have a bookings service as well as a locations service. I need to create two location records every time a booking is made. I used hooks to create the additional locations, and that works fine. However, When I do something like GET /bookings, I get back the booking object but no locations. My bookings will always need to have at least 2 locations. How can I enforce this? Is there some way to create the locations at the model level?"
"Hey guys, how can I select WHERE IN AND ? { status: 0, $in: [] }"
"@daffl could you help @tbanner15 ? His original comment was ""hi, i'm trying to make an api call with PUT to update an entry but its not accepting the ""id"" field change that I want to make. [12:03] how can I update the id field? [12:04] i tried a patch as well and that also didn't work."""
How can I do a find query and find partial matches for string fields?
"ok, got it. So if I need to use a hook to remove the password column, how can I “chain” them?"
I recently updated the cli and generated authentication. How can I get a JWT token locally?
how can I find out which database url feathers is using
how can I secure it now?
"How can I restrict fields that can be submitted via POST or similar?? I dont want to users to add custom fields. I want to discard all custom fields. I was thinking before hook, looping through submitted fields. If submitted fields isnt in array of allowed field, discard it. Before I do that, is there anything built-in that can take care of this?"
How can I achieve that?
"Hi ! First of all, thank you for feathersJS, I'm currently learning it to deploy my new app ! But a little question about authentication in feathers. I well understand how it works with email+password, but I want to use a different way. Actually, I'm coding a react native app, and I don't want the users to login or register themselves. On the first launching of the app, a new user is automatically created on the server (I already coded this, using ""create"" method in ""users"" service) based on the unique ID of the Phone and the Phone software version (got using react-native-device-info). And then, for the authentication, it authenticates using this unique_id and the phone_version. But, for the moment, I'm stuck in feathers-authenticate. I don't know how can I do to authenticate with two parameters without having a password that needs bcrypt, and then returns a token to authenticate later requests, containing for example the user_id in database, a jwt,... Well I'm quite lost with local strategy, jwt strategy... Even with passportJS docs 😢 So my question is : is it possible, with feathers-authentication, to authenticate without a password but always using an unique identifier (not a ""mail"" in my case, but a couple of datas : ""unique_id"" and ""phone_version"") ? Then, I want an unique channel for the user to chat with only one other user, so, during authentication, I may need to send back to the app some user identifier (like unique user_id in database) to not mix every requests once the user is sending messages and receiving ones... P.S. : I think that my question is newbie, but I'm just starting 😢"
@dnszero so how can I debug my server side code?
2. how can I debug the code on the server side ?
"@dnszero yes, but how can i understand how it works if I cannot read the code? documentation is not much detailed"
But how can I get the results outputted to the client?? Promises are messing with my head 😕
"@marshall RestrictToRoles takes a role parameter but what roles are expected? In the documentation is see ""super-admin"" and ""admin"" but I don't know their origins are there predefined roles in feathersjs . If yes where can I get more predefined roles if no how can I define my own custom roles as a service"
"hey guys, I’m trying to customize my verifier, but I’m not allowd to import the verifier in my authentication.js file, how can I work around this? https://docs.feathersjs.com/api/authentication/jwt.html#customizing-the-verifier"
"what would be the best way to set *user role* in jwt ? I have a field in my user model called ""isAdmin"", how can I set that field in the jwt for the client to read ?"
"hi, noob question: how can I get first result of the query, something like App\Flight::where('active', 1)->first();"
How can I debug every request received by feathers (v2/auk)? is there any simple way of adding a console.log(req) or equivalent?
how can i reuse an existing service inside another??
or how can I debug the query is being processed in my call? Thnkx! 🙌
how can I group those OR conditions in a AND ( … ) or something to that effect?
"hi guys I am new to feathersjs I am now using feathers with sequelize and how can I do a find with associated objects? when I used this in the before hook
        hook.params.sequelize = {
          include: [ sequelize.models.branches ]
        };

it flattens all the objects"
"how can i detect on the client when the socket has disconencted/reconnected? this is what im doing now:
const socket = io(websockerUrl);

socket.on('connect', (xx) => {
  console.log('socket connected');

});
socket.on('reconnect', () => {
  console.log('socket reconnected');

});
socket.on('disconnect', (error) => {
  console.error('Socket disconnected', error);
});

const app = feathers()
  .configure(feathers.socketio(socket))
...
"
"@matt_c, I didn’n, thats where the problems was i run mongod --dbpath mongo from my project dir and it has create a mongo folder and with some files i have a json dump from other mongo db how can I import it here? there is no collections at all, so I created one called users"
"Hi, how can i do an $like search using Sequelizejs?"
Hi everyone. how can i optimize the speed of my feathers service
how can I do this
How can I use feathersjs's hooks in client side?
"I use feathers with sequelize and in my users model, I defined users.belongsToMany(users, { as: 'Follower', through: 'follows', foreignKey: 'source_id', otherKey: 'target_id', constraints: false});. Now, Do someone knows how can I perform a findAll({ include: [ Follower] }) search in my users.find() service method to retrieve all the followers associated to a user?"
"I mean, how can I understand what kind of functioanllity is available for me?"
firing a question .. let's say I have a ServiceA that has a before hook method say foo. also ServiceA has an additional before hook authenticate('jwt') so user record is available in foo. foo calls another service ServiceB. how can I make the user record available on ServiceB hooks ?
@harmony you mean adding the category_id into the products? how can I construct a m-m relationship?
"How can I make a ""like"" sql search on a table field using the sequelize adaptater and more generaly how can I use sequelize specific operators in a query. Is it something like defining
 params.sequelize = {
     serchedField: {
            $like: '%' + searchTerm + '%'
     }
}

?"
"by the way
const customHashPassword = {
  passwordField: 'services', // key name of password field to look on hook.data
  hash: (services) => {
    return new Promise((resolve, reject)=>{
      bcrypt.hash(services.password.bcrypt, null, null, (err, hash) => {
        resolve({password: {bcrypt: hash}});
        reject(err);
      });
    });
  } // default bcrypt hash function. Takes in a password and returns a hash.
};
how can I resolve hash to custom property? resolve({password: {bcrypt: hash}}); set this object to services property is it possible to set it to some property that is on same lvl as services?"
"Hi there. Quick question : I wanna do a hook that needs to query the database, so the connection returns a promise. How can I make sure the promise is returned before we exit the hook? It sounds defeat the purpose of promise."
@eddyystop ok…but throwing a coding error as you put it won’t cause it to be logged. how can i ensure it gets logged via the app.logger?
"Hey guys, how can I overwrite the ORM errors ?"
so how can i access the variables inside the function ?
"Hello, I created a custom service that updates the users collection. How can I emit a event to notify the clients that are subscribed to the users default service that changes were made?"
hi everyone. I have a service called /users and now by following the requirements I need to add a call /users/:users_id/all_matches. so how can I make /users/:users_id/all_matches use the same set of services/hooks as /users?
"I want to use an assync function into a before hook. How can I make the hook to wait for this assync function callback to continue? ` function(hook) { myassyncfunction(parameters, function(err) { if(err) { return console.log(err); //exit with a feathers error here } //else, all OK//TODO: continue to the service itself }); }"
"I want to use an assync function into a before hook. How can I make the hook to wait for this assync function callback to continue? I have something like this
 create: [
	//Save the file in memory to disk
        function(hook) {
            if (hook.params.file){
                const file = hook.params.file;
                const localpath = 'avatars/'+hook.params.user.id;
		fs.writeFile(localpath, file.buffer, function(err, written) {
			if(err) {
				return console.log(err);
				//TODO: exit with a feathers error here
			}
			//else, all OK, file has been saved to disk 
  		        hook.data = {path: localpath, size:written};
			console.log(""The avatar was saved!"");
					
			//TODO: continue to the service itself
		}); 
            }
        }
],

fs.writeFile() is assynchroneous and I want to be sure that the file has been corectly written to the disk before calling my service (that write some informations into a database)"
Hi everyone. can I ask how can I access the app object when I am in the service?
How can I merge client calls ?
"Hi. On the server-side, how can I generate a token based on the username and password?"
"Hi. On the server-side, how can I generate a token based on the username and password (hashed)?"
"Hello, how can i prevent any user, that visit my site, make rest calls? I do not have got user authentication neither registration. I just want to prevent rest calls. Only inside application make possible rest calls. For example when user will type /api/Test he will no get anything, but inside application if user will visit page test, the app will make fetch to /api/Test and will get the needed data."
"@epoz Its not that you want to prevent REST calls, its that you want some REST calls to fail. That is similar to permissions. Write a custom hook for that.
Hello, how can i prevent any user, that visit my site, make rest calls? I do not have got user authentication neither registration. I just want to prevent rest calls. Only inside application make possible rest calls. For example when user will type /api/Test he will no get anything, but inside application if user will visit page test, the app will make fetch to /api/Test and will get the needed data."
"Hey all. How can I call an update of service two, after the patch of service one. So, in the hook of service one, I want to call the patch of service two. I have this currently, but I haven't seen it working yet
exports.after = {
patch: [
        micPatchSurvey()
    ],
};
function micPatchSurvey() {
    return function (hook) {process.env.mic.surveyStartStatus : process.env.mic.surveyDoneStatus;
const iStatusId = 10;
        return hook.app.service('mic/change_orders').patch(
            hook.data.survey_source_id,
            {
                status_id: iStatusId
            }
        );
    }
}"
Hi everyone. May I ask how can I do database something like ?receive_datetime=null?
"@kenny.ma You can use the json-schema compatible validateSchema hook for most things. You can in addition write your own custom function for specialized validations and call it with the validate hook.
how can I validate all fields when calling PATCH ? use case: I can leave all fields = null when status=draft but I need to validate all fields when status=submitted"
how can I validate all fields when calling PATCH ? use case: I can leave all fields = null when status=draft but I need to validate all fields when status=submitted
"Hey guys, how can I remove fields with discard from auth service ?"
"@orimoyegun Deploy just as you would a plain JS app.
how can i deploy a feathersjs app with mongoose on Microsoft Azure?"
how can i deploy a feathersjs app with mongoose on Microsoft Azure?
"Thanks for your reply. Yes I have no issue calling the third party api. I am mostly wondering how can I insert, or update a database record using a feathers service within my app. Is there a programmatic usage of a Feathers service? I don't want to make http requests to the service itself. I'd like to just do something like: messages.create() instead of sending a POST request to that endpoint.
@lenny If I understand correctly you want, within a setInterval, to call a non-Feathers API on another server and then update a Feathers service. There is nothing particularly Feathers about this, just JS. Feathers REST and WebSocket clients cannot call a random non-Feathers server. You'd have to use fetch, axios, superagent, etc."
how can i do a GET call of a web api inside my feathers service
"Hi. I have a shared backend for 2 different apps (e.g. app1 and app2). Now, my question is: ""On the backend, how can I determine if a certain request comes from app1 or app2?"""
"Hi guys I need your help. How can I create an asynchronous initialization of a service? I'm working on a dummy project and I have 3 different services (A,B and C). I want to start the service A and B right away. However, the service C need to perform an set of asynchronous calls. When async calls are completed I want to start the service C and the application itself. Is this possible? If so, how?"
How can I query a belengsToMany association?
How can I pass throught the Feathers adapter?
"Hi guys, I need to share a common instance of a third party sdk between various services... how can I do it? Right now I intialize it inside every service where I need it..."
how can I return a custom object on get('custom') ? instead of 404
"but , now, how can I login (let's say, via Postman) in order to get my JWT Access Token?"
"How can i add option ""jwtFromRequest: fromUrlQueryParameter(param_name)"" in feathers-authentication-jwt?"
"How can I query for a document using .find() then obtain it's id so that I can remove it? This is what I'm trying to do:
contact.remove(contact.find({ myId : '000000'}).then(data => data.myId == 'someID'));
"
"Hi all! I have been looking at the docs for feathers and so far, I understand that the ""local"" strategy for authentication works like username/password. In my case however, I need to have one authentication for username/password and another authentication for api client ID/client secret. Currently in the config there is only one ""local"" object in the ""authentication"" object. In this case, how can I setup feathers to support multiple ""local"" authentications?"
"Hi, how can I set the amount of results returned by every service (default value?) but application wide, not setting it for each service? Thanks"
how can I ensure app() is ready before running my test suite?
How can I disable REST routes for a service?
how can i get the proper error message using feathers
How can I set headers to use CORS in my app? E. g. my frontend can talk with the backend.
"how can i resolve this warning message ""Possible EventEmitter memory leak detected. 65 connection listeners added. Use emitter.setMaxListeners() to increase limit"""
I’m working on integrating thirdparty authentication (oauth/openid) with a react client… my though is to redirect the user to the API route => to the provider => API return route => client route … In the last step I need to include the generated jwt token in a query param in order to transfer the JWT to the client .. how can I include that in the successRedirect?
Any idea how can I fix that…
"is there any way to assign object of one user in field of another user through feathers-seeder like I created two users through feather-seeder configuration like
module.exports = {
  services: [
    {
      path: 'users',
      randomize: false,
      templates: [
        {
          name: 'Pat Raftera',
          email: 'pat@example.com',
          password: 'password',
          canCreateSessions: true
        },
        {
          name: 'Austin', 
         email: 'austin@example.com',
          password: 'labels2016',
          canCreateSessions: false
        }
      ]
    }
  ]
}
We have followers field in user schema followers: [{ type: mongoose.Schema.Types.ObjectId, ref: 'users' }] so how can I assign Austin as a follower of Pat Raftera through feathers-seeder configuration"
"I hope a simple question: how can I access one service from another? Because I need to loop through large numbers of records, I can't use a hook to perform the call"
"I have two questions about feathers-blob, using S3: - How can I upload to a different path using feathers-blob? The key field passed to s3-blob-store seems to always be file_hash.ext, without the possibility to add a folder path before - If I upload a Multipart file to my server, and I want to server to upload it to S3. Do I base64-encode it first on the server (as per the File uploading tutorial), pass it to feathers-blob, which himself decodes it to a buffer, and upload that buffer to S3? Looking at the code seems that it's done like this, seems like a lot of effort."
how can i update a document on the server
#NAME?
How can I send created / patched events only to users that are on the page which refer to that update ?
"Hi, I'm using feathers-vuex with nedb and the code of the feathers-chat-vuex as an starting point. However I have 2 indexes instead of only 1, so how can I change the following code to show a custom error depending on the error returned by the server?
this.createUser({cedula, apellidosNombres, email, fechaNacimiento, contrasena})
            .then(response => this.authenticate({ strategy: 'local', cedula, apellidosNombres, email, fechaNacimiento, contrasena }))
            // Just use the returned error instead of mapping it from the store.
            .catch(error => {
              // Convert the error to a plain object and add a message.
              let type = error.errorType
              error = Object.assign({}, error)
              error.message = (type === 'uniqueViolated')
                ? 'La cédula o correo electrónico ya está en uso.'
                : 'Hubo un error en el registro.'
              this.serverError = error
            })
"
How can I increment / decrement using sequelize ?
"Hello all. Noob to feathers. I have a question regarding doing a mongodb $push on a JSON field using feathers. I read through a issue post on github https://github.com/feathersjs/feathers-mongoose/issues/165#issuecomment-282206324. There is some code at the bottom of the page that could be used to do the $push. My question is where would this code go? In a service hook? Or how can I make this work through a hook. Referenced code:
// Create a dummy Message
app.service('messages').create({
 text: 'Message created on server',
 items: [ 'a' ]
}).then(function(message) {
 return app.service('messages').update(message._id, {
   $push: { items: 'b' }
 });
}).then(message => console.log('Created and pushed message', message));
This part of the code I assume
app.service('messages').update(message._id, {
   $push: { items: 'b' }"
How can I replace the ID field with another field in a create hook?
And later I will see how can I integrate react / react-native
but also how can I make the rest of the app wait for that to be set?
"hey, I've got a service set up which is essentially a key:value list of settings stored in a mongodb. The rest of my feathers app relies on these settings - how can I ensure these settings are loaded before trying to do anything else in the app? Can I hook/override the feathers ready functionality?"
"Guys, I am loading rows related for a table and I have various queries instead a inner join. How can I have inner join among tables on feathersjs?"
"Hey! I'm trying to setup sequelize relations on a service, I've got the following hook -
const setRelationships = context => {
  postgres.models.customers.hasMany(postgres.models.addresses)
  context.params.sequelize = {
    include: context.app.service('addresses').Model
  }
}

I have 1 customer record with 2 addresses. Feathers returns two duplicate customer records with flattened ""addresses.id"": properties. How can I setup feathers to return the single customer record, with an addresses array?"
How can i use socket connection in services to listen different event of socket?
But how can I authenticate with the feathers client after obtaining the JWT?
"Hi guys, I’m new at Feathers, I’m having a problem when testing it, I’m making the basic test to create and update users, in the end in the after function I remove the users from the database, the problem is that it keeps not working as the remove function of the model has a hook that it states that it must be authenticated to remove users, as obviously I’m not passing the Token on Users.remove(null, () => {}), how can I do this test?"
"@pmiralopes Best might be to authenticate the user in the test. Otherwise you can consider making your test call like service.remove(... , { _isTest: true } } and conditioning your auth hook like iff(context => !context.params._isTest, authhook()).
Hi guys, I’m new at Feathers, I’m having a problem when testing it, I’m making the basic test to create and update users, in the end in the after function I remove the users from the database, the problem is that it keeps not working as the remove function of the model has a hook that it states that it must be authenticated to remove users, as obviously I’m not passing the Token on Users.remove(null, () => {}), how can I do this test?"
"Guys, how can I work with auth 2 authentication and a js app? Does someone have a sample?"
So how can I harness sequelizes query -> where translations?
"^ How can I do that with Object.assign(hook.params.query, { something: ""else"" });?"
"Hey guys ! On my hook, how can I get my mongo (from mongoose) db connection"
"The data is written inside the database when the code goes into the ""service part"". So if I want to get the _id of a record I have to use a after hook ? And how can I get access to the current _id object ? (Mongoose)."
"Hi, how can I work with senecajs + featherjs + rabbitmq?"
Hey guys! How can I generate a token from a custom route using featherjs? Any internal method?
"@marshall I noticed you are a contributer on feathers-vuex. We are using that at work. Firstly, thanks for your contributions. I have a gotten to the point in passwordless auth where I can authenticate with jwt strategy on the client. Our auth store module is managed by feathers-vuex. After authenticating then fetching the user, how can I put it into the auth state?"
But how can I authenticate with it?
"hi, how can I disable a hook call, when I internally call find function, thanks"
"Hello, i have a hook 'decideSomething' and a two function in many services. const decideSomething= commonHooks.iff(hook=> booleanFunction , doSomething) .else(doSomethingElse) how can i pass the functions so that all the services just pass their respective *doSomething* and *doSomethingElse* hooks to the more general decideSomething Hook??"
"Hi, I have an entity that contains an array of id's and I need to populate that entity with the referenced id's, how can I do it using populate hook? Thanks!"
I am using mongoose. How can I disable update completely?
"Whenever I use ""populate"" in an after hook, I am also geting ""_include"" in my result - how can I turn this off generically across all services?"
"Hi, how can I generate a download instead of return json data for a specific service? ... thanks"
"How can I get create() to accept a string? app.use('/html-entities-decode', bodyParser.text(), createService(options)); produces this error: {""name"":""GeneralError"",""message"":""First parameter for 'create' must be an object"",""code"":500,""className"":""general-error"",""data"":{},""errors"":{}}"
How can I push an additional object into MAT array
"Hi there. I tried to modify the SQL (using KnexJS) in a hook but seems after I save it hook.params.knex = newStatement, it won't apply any query (example : ?user=1&account=2) to the SQL, is it normal or how can I apply that query ?"
"I am trying to create a ""change password"" request where user has entered existing password and a new password. I'm doing a .patch() request, and adding a hook to check the existing password. How can I call the hashPassword() hook manually from within this hook (so I can match it with the hash stored against the user)?"
I'm creating seeds for my app using sequelize... how can I hash my passwords in users table?
"Hi folks, I'm using feathers with feathers-rethinkdb and I'm trying to store a point in the db with the create method of my service. I have created this hook to transform a json in to a rethinkdb point :
const transformCoords = hook => {
  const {r}  = hook.service.options;
  const {latitude, longitude} = hook.data.coords;
  hook.data.coords = r.point(parseFloat(longitude), parseFloat(latitude));
};

but when it is executed my backend returns this error:
{
    ""name"": ""GeneralError"",
    ""message"": ""toJSON takes 0 argument, 1 provided after:\nr.point(0, 0)"",
    ""code"": 500,
    ""className"": ""general-error"",
    ""data"": {},
    ""errors"": {}
}

how can I insert that point into the database without having that error??? Thank you very much 🤓"
Hey guys! How can I call a service from another custom service?
"Well, what I am getting at is. If I authenticate, then wait until the token is about to expire. How can I get a new token without logging out and back in."
"So I have determined that filters is shorted out for authentication. Which makes sense. However, how can I use after hooks on authentication to attach things to the socket.feathers object for further use in other filters ?"
how can I solve this?
Hello guys! How can I get the logged user on a custom service?
how can I use my feathersjs to acheive that
really ? How can I use authenticate tho ?
"Hey guys, how can I disconnect from an event subscription with feathers-client? I'm using angularjs and I'm aware of the onDestroy event but not sure what to call feathers wise to disconnect the particular subscription. I have something like this on a few different pages and the logs continue when I leave the page todoService.on('created', function(todo) { console.log('Someone created a todo', todo); });"
How can I do a redirect and add a new JWT at the same time from a service?
Hey guys - I’d like to return records where status[$ne]=0 and status[$ne]=4. How can I express this in a URL query? I have this so far: /orders?status[$ne]=0&status[$ne]=4&$limit=20&$sort[scheduled_date]=-1 but I get the following error: operator does not exist: integer <> text[]
Plz how can I get the list of all login users
pls how can i get current user from hook
"If I wanted to test a reset password email, how can I provide the ""resetToken"" to the test suite without actually retrieving a sent email?"
"Looking a bit through the feathers docs I understood that is based on services and hooks and that services have the events that also help to offer realtime sync between server and client. As long as things are simple, as in docs I understand, basically having a service generated and then adding/saving/updating using the service methods will triggeer the event. My scenario is a bit different: The API endpoint does not return info from a table but complex queries based on multiple tables I need to have background workers that do operations on the database,probably using Kue (if there's no better way inside feathers), when a worker finishes the job, I need to have a way to trigger the API service so it updates the clients with the new data. How can I do this in feathers?"
"Hey, I'm trying to upload files to several entities and I have been looking at https://docs.feathersjs.com/guides/advanced/file-uploading.html In this example all files will go to the same folder. How can I separate files by entities and add authorization when requesting a file? For example I need to upload an profile image for users and upload other images for portfolios gallery and only the owner of the portfolio can see the images. Should I create an upload service for each entity?"
How can I make a difference btw find and get… it’s a GET HTTP method ?
Looking at the doc to have to best performance for me is to use the populate func of mongoose. I already have an array of ObjectId that I story in my user… how can I populate with the DB engine this array with the data ?
"Hi, I have an alredy woking app that has a very complex sequence of hooks to perform access control. Everything was ok until I realized that websocket events are being triggered to other users: User 1 has access to A and User 2 has access to B. If user 1 creates C user 2 won’t see it. The problem with the socket is that while User 1 and User 2 are on the same section if user 1 creates C then user 2 will actually see it, because he gets the data from the socket. He won’t be able to modify it or delete but he will see it in certain conditions. I followed the link provided in any “filter” https://docs.feathersjs.com/api/events.html#event-filtering but it seems to me that I need to implement again what is already in my hooks. So my question is, how can I apply the same hooks to my filters without duplicating the work. Thanks"
hello. quick newbie question … how can I create a service instance programatically? can I do something like a: myservice.create( {properties}); ?
"hello, currently im using feathers-offline-realtime/lib/optimistic-mutator. how can I know if the service that is wrapped by the optimistic-mutator is ready?"
How can I modify in an easy way a standar mongodb service so delete is disabled?
❓ 🙋 How can I secure feathersjs api endpoints so that it can only be accessed by authorized clients with a valid token? What if I want to create a PaaS and other clients can access it after getting a clientToken?
"Could anyone help me, how can I work with paging on feathers with angularjs ??"
"I have a js file in which I want to get access to the knex client.
module.exports = {

  someFunction: function (someParam) {
    const app = this;
    knex = app.get('knexClient');
I tried it like this but it does not work. How can I obtain a reference of app from any file of the project?"
I don't think I have multiple socket connections (how can I tell?)
"But the API is helper, there is an API in PHP that generates JWT, here in the API with featheres you would only need to get JWT and extract the information from it. How can I do this, since kwt is already coming in the request, through the headers in the Authorization field?"
How can i open a new thread?
"Hi, how can I get Total, Limit, Skip response from the api using feathers-swift + feathersSwiftSocketIO I was able to get the Pagination class but can’t seem to access total from the said class"
how can I catch that messages from server?
so how can I convert id to ObjectId on client side?
I have created new custom service and I want to get the data from my collection in mongodb . How can I get the data from db in custom service ?
@alt uploaded a file: How can I find the source of this error?
"@rudolph.koegelenberg yeah, but how can I nest services like that? I mean, I think simply defining a subbookings schema inside the bookings model and using subbookings: [subbookings] in the parent schema is not very RESTful."
@teddy-error commented on @alt’s file How can I find the source of this error?: On line 1 where it shows the error about id being undefined. And then wherever you are calling the patch from.
"Hi, is it possible to configure more than one Rest Client (server Side) for a same app ?
/* Rest client (Request API) */
const superagent = require(""superagent"");
const client = require(""feathers-rest/client"");
const rest = client(app.get(""first-api-url""));
var superAgentOptions = {
  headers: {
    ""API-Key"": _.get(app, ""settings.first-api-key"")
  }
};
app.configure(rest.superagent(superagent, superAgentOptions));

How can I add another Rest client for a ""second-api-url"" after the code above ?"
"@coryrobinson42 http://stackoverflow.com/questions/13699784/mongoose-v-property-hide
Mongoose adds a '__v' property into Schema's for versioning - is it possible to disable this globally or globally hide it from all queries?"
is it possible to make feathers auto prefix services?
"Hello! I'm new to feathersjs, but already love it. I have a question about custom endpoints, and how I can use *hooks* on them. I've created a custom method (follow) on my service, and want to expose it externally via REST. Is it possible to use hooks for this endpoint, as I do for the regular get, find and create endpoints? If so, how can this be done? If I try to just add a ""follow"" key in the hooks' exports.before, then feathers-hooks throws an error."
"Hello to all feathers, [sequelize sqlite; sequelize ms-sql] does anybody know if it is possible to output/see the generated sequelize calls and/or the generated sql queries? I would like to know what happens if I queue several services with database interactions if those calls are bundled to a transaction? Lets say for: service1 (resolve) => service2 (resolve) => service3 (reject) => service (nothing) => catch (reject) Is it possible to rollback actions of services 1 and 2 if the queue wasn't solved completely? Will separate database calls be made or a ""bundled"" call?"
is it possible to change the directories that feathers-generator outputs files to?
"is it possible to run a function on the server that is triggered from the client, where the function in question sends a request to a 3rd party API and updates multiple feathers services with the data received?"
"And also , is it possible to use group by? (i am using feathers-sequelize)"
is it possible to use REST alongside socket.io?
is it possible to enable polling using the REST client on a per service basis?
is it possible to alter data before querying it in a before hook?
Is it possible to set a route param on all routes within the app ie for all routes /v1/:tenant so that all routes are prepended with v1 and there is :tenant available within them all? Or do I need to do it per service?
"Is it possible to have this as the service def:
  // Initialize our service with any options it requires
  app.use('/v1/:tenant/tags', service(options));

  // Get our initialize service to that we can bind hooks
  const tagService = app.service('/v1/:tenant/tags');

How is it possible to pass that :tenant property from between service calls? ie within a populate call:
const schema = {
  include: [{
    service: '/v1/:tenant/tags',
    nameAs: 'category',
    parentField: 'parent',
    childField: '_id',
  }],
};

I need to be able to tell the schema the :tenant so it can appropriately fetch the correct data. The populate is working but the tenant param is undefined not sure how to pass it or if there is a better method to do what I am trying to do."
"Hi, is it possible to use this package with feathers: https://github.com/lucasconstantino/graphql-modules"
"Is it possible to populate on a mongoose subdocument? For example I'd like to populate the image with the options array and can't work out how you'd do it.
const customOptionSchema = new Schema({
  image: {
    type: ObjectId,
    ref: 'image'
  },
  createdAt: {
    type: Date,
    'default': Date.now
  },
  updatedAt: {
    type: Date,
    'default': Date.now
  }
});

const customDesignSchema = new Schema({
  options: [customOptionSchema],
  createdAt: {
    type: Date,
    'default': Date.now
  },
  updatedAt: {
    type: Date,
    'default': Date.now
  }
});
"
is it possible to pass more info about the request to hooks?
"@eddyystop thanks. I did try that but it's only giving me the first 10 results. How can I change that limit? Is it possible to send the ""limit"" as parameter? How?"
"I have an A app with a service, and now i have another app named B and it need to use the service in A app. is it possible for me to use the service with socketio provider."
How is it possible that app.get('token') returns undefined after login ?
Is it possible to generate users automatically like with older cli?
Is it possible to disable pagination on a REST call? I tried /users/?paginate=false but I don't get results any more that way..
"Is it possible to pass a custom db query with a service, specifically using rethinkdb?"
"Hi all, is it possible it do a service method lookup inside a filter? I'm currently trying to filter my data with a hook.app.service().find() query inside my filter, but it refuses to run..."
"Sorry for the duplicate post. Just saw the help channel. Is it possible to use the standard $ operator from mongodb in feathers-mongoose? My mongodb query is: db.getCollection('Ergebnis').find({""Ergebnisse.Frage"":ObjectId(""58f770032c4777963bdaf2db"")},{""Ergebnisse.$"":1}) but I have got problems getting this to work in feathers-mongoose"
"@eddyystop Piggy-backing on your comment above, is it possible to pass a value from client --> server _without_ using the query object? Unfortunately, this is not working as expected when using with feathers-reactive…"
"Hi guys – quick question: is it possible to send up data in a find() service call from client to server within the params object? I can't use params.query as this will meddle with the data returned in the actual database query, but I need to send across some data which is used in our business logic... any tips? Is there another property I can use in params which doesn't get stripped by the time it reaches the server?"
"@daffl is it possible to do multiple $phrase queries with feathers-elasticsearch. I am trying this:
?tags.name[$phrase]=rock&tags.name[$phrase]=pop

But I am getting this error [illegal_state_exception] Can't get text on a START_ARRAY at 1:56"
"hey @ all.... is it possible to run ""mocha"" via a script? so i mean via custom route... etc i want to start a test with a browser request..."
Is it possible? How do we send an argument from the client through the auth service to let the backend know from which app the request came from?
Is it possible to have two instances of feathers client in one app?
"Hi ! First of all, thank you for feathersJS, I'm currently learning it to deploy my new app ! But a little question about authentication in feathers. I well understand how it works with email+password, but I want to use a different way. Actually, I'm coding a react native app, and I don't want the users to login or register themselves. On the first launching of the app, a new user is automatically created on the server (I already coded this, using ""create"" method in ""users"" service) based on the unique ID of the Phone and the Phone software version (got using react-native-device-info). And then, for the authentication, it authenticates using this unique_id and the phone_version. But, for the moment, I'm stuck in feathers-authenticate. I don't know how can I do to authenticate with two parameters without having a password that needs bcrypt, and then returns a token to authenticate later requests, containing for example the user_id in database, a jwt,... Well I'm quite lost with local strategy, jwt strategy... Even with passportJS docs 😢 So my question is : is it possible, with feathers-authentication, to authenticate without a password but always using an unique identifier (not a ""mail"" in my case, but a couple of datas : ""unique_id"" and ""phone_version"") ? Then, I want an unique channel for the user to chat with only one other user, so, during authentication, I may need to send back to the app some user identifier (like unique user_id in database) to not mix every requests once the user is sending messages and receiving ones... P.S. : I think that my question is newbie, but I'm just starting 😢"
"What is the best way to have two user types - admin and members, and have them in different tables? Is it possible to use mulitple auth services? I’m on pre-auk"
"Hi guys. I'm trying to build a Contacts app, in which the user data is stored in a SQL db, and the contacts data of each user is stored in a nedb (it seems to me this is a awkward design decision, but it's not my call). Is it possible to create a service that relies on another service (to authenticate the user with jwt)?"
"hey fellas / ladies, is it possible to use a service rest param to show any records greater than 0"
"I started a feathers instance using node-dev src and it got stucked, I know it must be node-dev related and rebooting will solve it but is it possible to kill my feathers instance ??"
"on the other hand, when using populate for retrieving data… is it possible to do the same to store it?"
"What would be the best way of implementing a ""Remember me"" option with feathers-authentication? Is it possible to dynamically control the JWT expiration with an authentication hook?"
"by the way
const customHashPassword = {
  passwordField: 'services', // key name of password field to look on hook.data
  hash: (services) => {
    return new Promise((resolve, reject)=>{
      bcrypt.hash(services.password.bcrypt, null, null, (err, hash) => {
        resolve({password: {bcrypt: hash}});
        reject(err);
      });
    });
  } // default bcrypt hash function. Takes in a password and returns a hash.
};
how can I resolve hash to custom property? resolve({password: {bcrypt: hash}}); set this object to services property is it possible to set it to some property that is on same lvl as services?"
"Hi, assuming I have the following code on a client using sockets.
const socket = io('http://localhost:3030');
const client = feathers();

client.configure(hooks());
client.configure(socketio(socket));
client.configure(authentication({
  storage: window.localStorage
}));
client.authenticate();

and the following code on the server:
app.configure(socketio(function(io){

    io.on('connection', function(socket) {
        console.log('client connected');
        console.log(socket.feathers); // <---------- would like to get the authenticated user.
   })
}));

Is it possible to be able to get the authenticated user on socket.feathers above ? or should I emit an event from the client to inform the server that client is authenticated ? The thing is that the by the time the client authenticates , the connection is already established and the connection handler code is executed where the user details are not populated."
"Hi, assuming I have the following code on a client using sockets.
const socket = io('http://localhost:3030');
const client = feathers();

client.configure(hooks());
client.configure(socketio(socket));
client.configure(authentication({
  storage: window.localStorage
}));
client.authenticate();

and the following code on the server:
app.configure(socketio(function(io){

    io.on('connection', function(socket) {
        console.log('client connected');
        console.log(socket.feathers); // <---------- would like to get the authenticated user.
   })
}));

Is it possible to be able to get the authenticated user on socket.feathers above ? or should I emit an event from the client to inform the server that client is authenticated ? The thing is that the by the time the client authenticates , the connection is already established and the connection handler code is executed where the user details are not populated.
Actually I haven't found anywhere in the docs references to login / logout events, so after I saw what you wrote I went to the code and searched for the place the event is emitted. Found out that there are 2 args. 😄. Could you please point me to the docs where login / logout events are specified ?"
"hey! is it possible to get realtime updates for a DB record with a given ID? I've tried feathers-rx but when i use ""subscribe"" after a ""get(ID)"" it logs me every DB record i patch/Update. not only the specific one with the given ID..."
"In a middleware executed before a feathers service, is it possible to access the service parameters (data and params) that this service would receive? If so, how?"
Is it possible to create an SQL database directly into the feathers.js server code? Because curently the database already have to exist so that feathers can use it (and create the tables in it).
is it possible to change bcrypt for argon2?
"Is it possible to have a route and a service with the same name, with the route taking precedence?"
"Hi, is it possible to check role before authentication? I did add restrictToRoles but I have two separate app and I need to block users with role:user when trying to login onto the admin app."
is it possible to request feathers api without using the feather client?
"Is hook.app.service the only way for a hook to access other services, or is it possible via importing the feathers module somehow?"
"@janpoltan You can make requests of a Feathers server with normal HTTP. That's what the Feathers REST client uses. The Basic Guides have examples of using CURL https://docs.feathersjs.com/guides/step-by-step/basic-feathers/rest-api-server.html#running-the-server
is it possible to request feathers api without using the feather client?"
"@ae hook.app.service is the easiest way. You can try placing app in the config. I wouldn't recommend passing it around or making it global.
Is hook.app.service the only way for a hook to access other services, or is it possible via importing the feathers module somehow?"
"Hello, I am fairly new to feathersJS and have a quick question . Is it possible to send an error to the client from the before hook, which also prevents the actual service and the after hook to being called?"
"@bibek Throw an error in the before hook with const errors = require('feathers-errors'); throw new errors.BadRequest('message');
Hello, I am fairly new to feathersJS and have a quick question . Is it possible to send an error to the client from the before hook, which also prevents the actual service and the after hook to being called?"
"is it possible to call a service from another service class? If so how? For example if I have:
class Service {
  constructor (options) {
    this.options = options || {};
  }
    

  create (data, params) {
	
	//Here call another service patch() function
	
	//Do some other stuff in this service create function
	
  }
"
"Question on best practice here, I currently want to update my user models location, and I guess by Feathers philosophy I should create a hook onto patch. But it doesn't sound right to me to make a hook that checks if the patch has a location and then just do something with it, is it possible to make a different route like /users/{id}/updateLocation and then do the logic there ?"
Is it possible to make hook.app.service('users').hooks('authenticate') writeable in a hook?
@zusamann Is it possible to use authentication in two services ? As I setup the authentication using generate command but its setup only for one service.
"Is it possible to create global hooks for all sub services, like app.hooks?"
is it possible to do some sort of locking on objects? I've migrated my app object lifecycle management into hooks but I'm finding they're often running multiple times which causes issues
"@alt There seem to be 2 questions, You can freeze objects with Object.freeze(). Hooks will run multiple times for a service call only if some hooks are making service calls themselves. Search the code for .service(.
is it possible to do some sort of locking on objects? I've migrated my app object lifecycle management into hooks but I'm finding they're often running multiple times which causes issues"
"Is it possible to use angular1 routes in feathers ? like $routeProvider.when(""/menu1""...) . Because in the MEAN stack we use express router but in featherjs I am not able to use the routeProvide."
"ok. alternativelly, is it possible to access middleware.req directly from inside a hook? (to transform my multer middleware to a hook)"
is it possible to customize the table names that feathers uses? kebab names are really causing pain
Hi - is it possible to perform raw or deep queries with sequelize relations using hooks? I’d like to restrict access to certain resources based on user role. (I’ve asked in sequelize but it’s a pretty quiet channel - thought I’d xpost the question here)
"Hey, is it possible to return something other than an error when handling an error hook? something like hook.result in an after hook"
"Based on https://docs.feathersjs.com/api/express.html#setting-service-params and https://stackoverflow.com/questions/7507015/get-hostname-of-current-request-in-node-js-express it would be
app.use(function(req, res, next) {
  req.feathers.host = req.headers.host;
  next();
});

So, I may be missing something simple here, but I can't seem to find a way to get the hostname that a request object I'm sending a response to was requested from. Is it possible to figure out what"
"hello feathers friends... quick question. Is it possible to run an AND query? For instance, I am trying to query for records within a date range, using a combination of $lte & $gte:
query: {
        customer: customer,
        dateValue: {
          $lte: dateEnd,
          $gte: dateStart
        }
      }
"
"Hi, is it possible to write a before create hook to check for duplicate records in NeDB and prevent the record being created?"
"Is it possible to merge errors from service adapters and hooks? For example, my service adapter declares some properties must be not null, but I also have hooks that do some other checks (like the length of an array). I was going through my user experience and realized that only a subset of errors would sometimes show. Suppose you have errors A and B in a form, but the response would only show error A. So, the user could fix A, then try and submit, and then it would show error B. It’s kind of sub-optimal."
How is it possible to change the 404 error page?
Is it possible to have multiple successRedirects?
"Is it possible to add an auth-token in the register (user create) endpoint, basically automatically longing a user in during registration"
"Hey All, is it possible to return inside the 'find' service call a content type of image/png and have it return the image content. basically i have a service that responsible to resize images, i use the find method to pass in the image and it currently returns a buffer. i'd like for it to return the actual image contents with the proper header, that way i can use it in the img src tag. Thank You."
"Hello, is it possible to generate services with relations based on an existing database?"
Is it possible to return a login token upon registration (user creation)
Hi everybody. I'm pretty sure that I'm not the first one to questioning this but I want to make sure I'm not missing anything. Is it possible to use REST via http and have websocket connection for some events in the same application?
Is it possible to enable raw body parsing for just one service?
"Yes absolutly.
Hi everybody. I'm pretty sure that I'm not the first one to questioning this but I want to make sure I'm not missing anything. Is it possible to use REST via http and have websocket connection for some events in the same application?"
is it possible to run a distinct query on mongo via feathers?
Is it possible to read a chatlog of this channel somewhere without having to use slack? Just some searchable static html? that I can download every saturday?
"❓ 🙋 How to check existence of a required query field. Otherwise, the error should be thrown automatically. Is it possible using validateSchema hook?"
"Hi, how is it possible to change the socket end point (ie url) once the app has already been configured/started ? Thx"
"Hi, for the populate common hook in FeathersJS, I am aware that you can use an array of ObjectIds as the parentField inside include. However, is it possible to use all field within objects that are inside an array? Schema as below:
module.exports = function (app) {
  const mongooseClient = app.get('mongooseClient');
  const { Schema } = mongooseClient;

  const powers = new Schema({
    _id: false,
    power : { type: Schema.Types.ObjectId, ref: 'powers', required: true },
    quantity: { type: Number, required: true }
  });

  const bagpack = new Schema({
    powers: [powers],
    createdAt: { type: Date, default: Date.now },
    updatedAt: { type: Date, default: Date.now }
  });

  return mongooseClient.model('bagpack', bagpack);
};
"
is it possible to use in memory services for testing only?
"Hello, Is it possible to get the model from the service by calling the service?"
"https://stackoverflow.com/questions/9776151/mongo-query-by-key-one-level-deep mongo seems to support it... but its not going through on feathers hum...
Is it possible to use something like 'exists' in a Mongo query to return this record based on an ID? Something like select where 'ids' contains key '123456'? { ""department"": ""Digging"", ..."
"I’m 99% sure that we can. I try to debug my issue and I’m looking for it. Try to console.log as much as you can I think You can find it somewhere (in an after hook I think)
Hello, Is it possible to get the model from the service by calling the service?"
"Hi, is it possible to manipulate or do something with the final result of the populate-hook in feathers-common-hooks?"
"I have another question if you don't mind, is it possible to know whether paginate is true or false for a service in a hook?"
"Hi guys, is it possible to call service method (e.g. patch) but without emitting service patched event? Use case - inside service Model I have something really internal and connected users should not care about those changes. So I don't want to notify them about those changes."
is it possible to use a database adaptor and have a setup service method?
is it possible to use hook in the feathers populate method as a condition?
is it possible to get my own id in a after hook
Is it possible that the byte # for Content-Length is not calculated correctly?
is it possible that after a patch that the hook is an another one?
How best can I implement it
"So I will need to duplicate all app configuration (cookie, session, passeport ...) ? Or can I just duplicate my current app, override the rest client and inject it in req as ""app2"" for example ?"
"Hi, is it possible to configure more than one Rest Client (server Side) for a same app ?
/* Rest client (Request API) */
const superagent = require(""superagent"");
const client = require(""feathers-rest/client"");
const rest = client(app.get(""first-api-url""));
var superAgentOptions = {
  headers: {
    ""API-Key"": _.get(app, ""settings.first-api-key"")
  }
};
app.configure(rest.superagent(superagent, superAgentOptions));

How can I add another Rest client for a ""second-api-url"" after the code above ?"
"In my architecture, I got one feather server (as API server) and another feather server as webserver (client view). But now, I need to add some particular API endpoint on the webserver side. On my API server, I can call all my local service througt app.service() :
/* Feathers Rest */
const rest = require(""feathers-rest"");
app.configure(rest());

But on my feather (web server) I have already configure a rest client (to access my api server.) I was wondering how can I expose all my local endpoints in addition to my api server endpoints."
how can i call a url means i have to send email /get response from some other api and send it to db rather service .
how can i test routes / middlewares?
"I have a backend data store that uses a sort of Session Token to authenticate each request that gets made to it. You login with a User Name and password, then you get this Token. That token is used on every request following that. I would like to make an adapter for feathers for this service but, The question is… How can I work that into Feathers Authentication scheme? Can I store the Session Token in the JWT?"
"So, I don't check twitter a lot, but I just did and I noticed that all the code snippets were PHP/Laravel. Who can I follow to see some cool node/feathers/express/etc snippets?"
Can I add something to the hooks.params.query in a before hook to force the model to include associations? Using sequalize.
"Hey guys, I am getting a Not Authenticated Error with the new auth client, how can I debug this on the feathers server side?"
"I'm trying to register and login with JWT, but when I create a user, I don't receive a JWT back. So I POST to http://localhost:1337/users with email and password, and get back:
{
  ""email"": ""test@test.com"",
  ""_id"": ""Z36HnhfOs1P68Fia""
}

I've instlled feathers-authentication and have added the configuration:
.configure(authentication())

bodyParser has already been set up. What am I doing wrong here? How can I get the JWT?"
"Hi, I would like to use hooks to set an attribut to ""isDeleted"" = true on ""remove before"" and prevent my record to be officially ""deleted"". How can I ""stop"" the propagation of ""remove"" flow after my hook set the attribut ?"
"How can I download file (secure) via feathers service or another way? I tried to use feathers-blob (blobService.get). I get object with data, but i need smth like ""res.download"" in express. Also I tried use middleware after service where I need to use http get method and I had trouble with authentication. Can someone help? Thanks."
How can I modify a database query with sequelize so that it only retrieves select fields from the database?
"Hi can I from the client library programatically send a base64 encoded file in a multipart/form-data format? I have a mobile app with nice imagecropping and editing component, but this component has only 2 modes to upload the image. 1st is AJAX when i need to provide api route only and the component will post the image, or a form when the component will post the hidden field of image. Either way I need to manage the JWT token and some metadata. The AJAX has no built in support for this, a form mode does not support meta-data. But I have access to base64 image data. So the question is, can I post this data as a multipart/form-data with JWT, metadatas and receive it on the server side with multer properly authenticated and annotated?"
How can i get my feathers clients connecting to my backend via feathers-socketio to support cookies? I’m trying to have it respect the loadbalancer cookie that is given from the backend that the clients connect to.
can I connect the auth system of wordpress with feathers through a service using the wordpress cookie?
"The main question is how can i respond from a service with binary file (in REST) In express i can do this:
function returnImage(req,res){
                const img = fs.readFileSync(filepath);
                MimeType = ‘mage/jpeg’;      
                res.writeHead(200, {'Content-Type': MimeType, 'Content-Disposition':'attachment; filename=’+filename});
                res.end(img, 'binary');
}

How can I access this (req,res) express from a service get method? I would like to use Services and not plain and bare app.use(/foo, bar) express middleware because of the user auth and hooks, who prepare the file."
"Hi, how can I define a hook chain in an array fashion in app.hooks.before, after, error hooks? It seems to accept only one hook function.... when i define:
app.hooks.before({
    all:[globalHooks.logServiceEnter()],
    get:[],
    patch:[],
    update:[],
    remove:[]
  });


It throws an exception app.hooks.before is not a function Thanks"
"hey guys, how can I query a table (or use a service) in a global hook?"
marshal can I have multiple local auths configured? I am already using a local auth in this app for the username and password from the mobile app
How can I tell which version of feathers I'm using?
"hey guys, i am exploring feathers. Seems great so far. But i am wondering is it scalable? Can I build complex applications with it?"
"ok, thanks, I got that 🙂 Where can I find docs (maybe NodeJS docs?) that guide me through setting up multiple instances of Feathers (I assume via nodejs clustering?) ... Sorry, never done clustering and not sure how sockdet connections work in a cluster scenario (does it mean that clients only use persistent socket connections, not http, so they're bound to the same instance for requests and events)"
"@daffl - in that hook function, that include should be an instance of a sequelize model I think (rather than a string). How can I access the model from inside the hook function?"
"Hi Guys, i am new to backend development, and new by feahters. So i know understand the tutorial on the page. So my question is, how can i set relations? So i have a POLL Service and a OPTIONS(Answers) service, now i need in my json something like this: /polls/1 = {id: 1, question: ""something?"", options: [""one"", ""two""]}. How can i get something like this? is there a good tutorial?"
@marcfawzi where can I read authoritatively about JS heading toward reasonML?
hmmm. tho where can I find information on what is where in the hook object? is data already serialized (I guess yes)? Can I still have access to the original model(s) instance returned by the adapter?
Can I authenticate using feathers-client on the server-side render? The idea is that my user data that is already fetched using authentication is already baked into my initialState of the app before it’s sent back to the client (providing the original request had token present)
where can I find a list of the events emitted by sockets?
@daffl how can I provide a example?
If I put a hook in all can I disable this hook only for one field?
"How can I initiate a service, that is wrapped in a database adaptor, but still allows me to use my own service class. So, I like this: app.use(serviceName, new ServiceClass()), but in order to use my database wrapper, I have to do: app.use(serviceName, service(options)); How can I combine the two?"
or can I make it available globally in the app?
"another question, I see Mongoose option.lean is false. Use hook.results.toObject() to convert the results to JS objects in the logs, I know what it means, but where can I set this to true?"
How can I generate my jwt token with postman?
"...and how can I trigger a service event from outside, like I want to update something in mongo using mongoose but I want to trigger the updated of the related service so that clients are aware of that update"
"@eddyystop actually I've just realised what the cause is, it's because not all models returned have a value for product_offer. With this in mind, can I populate and have it ignore those that don't have a value?"
"in an update method of one of my service that I extended, I want to call a method of another service. How can I access app.service(...) there?"
"is there an easy way to namespace the feathers api without having to specify in every service name? ‘users’ is accessible on /users, can I make ‘users’ accessible on ‘/api/users’ without having to call it ‘api/users’?"
how can I access the request object in a service get method?
can i catch NotAuthenticated if the token expired globally?
How can I provide a query parameter that I dont want to include in the actual query for the database
Where can I find information about the syntax of the query string
"so how can I know if the service method is called thru a socket or rest http method, or if it's thru app.service(xxx).yyy() within another service?"
"This doesn't work because Stripe's API seems to have some sort of debouncing/throttling built in. How can I convert this into the traditional Promise .then architecture and execute one Promise after another, while still having access to the values?"
where can I find the best doc/examples for feathers-permission?
but what else can I expect to be in there? Is that a good place for storing extra information
How can I install the AUK cli?
how can I choose between local auth or facebook auth (oauth2) ?
And how can I implement my own get?
"also @marshall how can I customize/set those defaults:
  aud: 'https://yourdomain.com',
  iss: 'feathers',
  sub: 'anonymous' 

Or where can I find instructions on how to do so?"
Is the default verifier part of public API? In other terms can I extend it and add blacklist chercher there or should I copy paste the code and add some logic
what else can i paste in here that is relevant hmm
"how can I pass token when I make query to my userService? I authenticate succesfully get token from the server and store it client side, but after when i do a query to my userService how can I provide the token so I can get the result?"
"Quick question, can I use the socket.io client for android to connect to feathersjs?"
"hey guys, I have a question about planning an api, looking for feedback here. Let’s say I want to have a service for a user to recover her/his password. Can I have an api endpoint such as mysite.com/api/recover-password? and then, inside that service do what I need to do? you know, search for the user, create a token and send an email. what are your thoughts on this?"
how can I do the include with sequelize inside my userService so I can include the role associated to my user?
how can I get the same error response I have when I do an http request and when I call the same route directly from the service client side? When I do the call to userService.create() I don't get the validation error details but when I do a http request to the same endpoint I get all the errors details
how can I get the current user outside of a service? is there anyway to get that info through feathers object directly?
"hi. I am busy with FeathersJS with NeDB and Angular 2. I realized to up add JSON to the DB with
storeSettings(settings){
        var headers = new Headers();
        
        headers.append('Content-type','application/json');
        return this._http.post('http://localhost:3030/settingsdata', JSON.stringify(settings), {headers: headers})
            .map(res => res.json());
    }

However everytime i store something the JSON is added and not updated. How can i update the db instead of adding it."
how can I increase JWT expiration time?
"How can I get the user information in the client? .. right now it saves the JWT token to localstorage, and I want to restore the user information when the app boots up, if there is a valid token"
"@daffl can I include on a before hook with a model association alias instead of this
model: hook.app.services.users.Model
"
"other subject: is it possible to override in a clean way how the user is retrieved upon authentication? In other term, how can i write my own user fetching strategy which would replace the one setting hook.params.user in feathers-authentication 1.0.x?"
"if I understand well, calling a service internally will also trigger the hooks, I guess hook.app.service(stuff') is a proxy that triggers the hooks. But what if I do this.create(..) from within my update service method? will it also call the hooks as well? If not, how can I access the app from within a service so that I can call another method of my own service and trigger the hooks as well? Sounds like an important/main point of feathers that I missed 😕"
how can I alter hook.result return in after hook with sequelize. I've seen a few issue with mongoose but couldn't find a way to do it with sequelize
how can I update? And what is patch?
"where can I read the app env real value? local, development, ..."
How can I use token stored in localStorage and if not then use local auth?
"this is how I declare my my feather app
this.featherApp = feathers()
            .configure(feathers.hooks())
            .configure(feathers.socketio(this.socket))
            .configure(feathers.authentication({ storage: window.localStorage }));

how can I listen for general app connect/disconnect events of socket.io?"
"one more question, let say I would like to create Profile in User service, how can I do it in my example above"
how can I write a script or something to migrate existing data with new schema
"Hi, what should I do to use Feathers' logo or can I use it at all? I'm a developer at a site that lets people find collaborators for their software projects and users looking to collaborate can ""Follow"" the most popular tech tags (programming languages and stuff). Somebody just posted a project tagged with this library, so I wanted to know if I could use Feathers' logo for the ""Follow tags"" page 🙂 Sorry I'm new to working with trademarks and logos so I just wanna know it's fine for you."
"I’m trying to configure StealJS with an existing Feathers app. However, I’m not able to load the StealJS from node_modules. The index is at the public directory of Feathers. The way I call Steal is <script src=""node_modules/steal/steal.js"" main=”main”></script>. But Feathers returns the following error: info: (404) Route: /node_modules/steal/steal.js - Page not found. How can I expose node_modules to be available on the public folder?"
how can I pass the authenticated user so that internal service calls will have it on hook.params.user?
"can-i-set-the-cookies-to-be-used-by-a-wkwebview/26577303#26577303"" target=""_bank"">http://stackoverflow.com/questions/26573137/can-i-set-the-cookies-to-be-used-by-a-wkwebview/26577303#26577303
I'm trying to switch an existing app from UIWebView to WKWebView. The current app manages the users login / session outside of the web view and sets the cookies required for authentication into the..."
"@marshall I did and a have it configured... but how can I tie it into the chain? If I do:
login ({commit}, creds) {
    api.authenticate({
      strategy: 'local',
      ...creds
    })
    .then(function (result) {
      console.log(result)
      return api.passport.verifyJWT(result.accessToken)
    })
    .then(payload => {
      console.log(payload)
      return api.service('users').get(payload.userId)
    })
    .subscribe(user => { // THIS FAILS WITH commit is not a function
      commit('setUser', user)
    })
    .catch(function (error) {
      commit('setErr', 'ERROR AUTHENTICATING: ' + error)
    })
  }

I am not (yet) familiar enough with the reactive stuff to figure this out on my own (by I am still digging non-stop hoping to find an answer somewhere)"
"my question is, how can i make the event model aware of the invitations?"
"i'm using the feathers-cli@pre and i'm wondering how can I add filters? I see this in my service but it seems like there no generator for filters yet
'use strict';

module.exports = {
  // disable all events for this service by returning false
  all: [(data) => data],
  create: [],
  update: [],
  patch: [],
  remove: []
};
"
how can I execute a redirect in a custom service ?
Hi everyone! How can I change NotAuthenticated error message ?
"@ryan.wheale So you'll have index.js which will run the app as normal and another process also including app, to listen to events and use the same services? Thanks Can I ask what your building your queue with?"
"one more question, Can I filter on association with build-in urls? Let says I have Profile model belongs to User model, and have name attribute on Profile model. I know we can make a request like /users?email=xxx.example.com to query User who has ‘email is xxx.example.com. But How can I search User who has Mick` in their name?."
"Hi all, How can I verify JWT stored in client storage in the first place? I wonder let say, after login successfully I got the JWT from feathersjs server. Then next time when I reload page. I need to verify that JWT is valid, if not then re-direct to /sign-up page."
"I use filter to catch event client side, but how can I watch the same event but server side? how could I listen for users.created event server side?"
help: Can I use Feathersjs as a Unity game backend? We are developing a Chess game for kid now.
"yes, I know what you mean. I would like to add a new method to my service. I've created this ""foodService"" thru the cmd but how do I extend the service in order to have a ""filter"" fn? And how can I map that new method to a ""filter"" url? Maybe it's what you're saying: defining a new endpoint, load my food service and then implement my ""filter""..."
Hello! I am completely stumped… Currently the app I am working on uses feathers both on client side and server side. All requests from client are sent over with socket.io. Recently I’ve started building out tests for our backend and I’m using just a standard REST for these calls instead of socket.io and what I’ve noticed is the requests are being handled different. Ultimately it looks like I need to parse all strings for params (which I can do and this is stated in the docs) but I can’t see how I change the hook.id. Currently any REST call with a hook.id only shows as a string of say ”1” or even ”null” How or where can I modify this before it hits the service?
"tuchi35 uploaded a file: Untitled and commented: Hi, I have a question related to services. I want to use one service that I got from a tiny web page. Smth like this (check snippet). My question is: how can I use the service in order to retrieve all the ""books"" that I have stored in the backend?"
"@eddyystop thanks. I did try that but it's only giving me the first 10 results. How can I change that limit? Is it possible to send the ""limit"" as parameter? How?"
"Hi team, How can I get current user with given accessToken, is there any built-in endpoint allow me do it?"
"How can I disable these log entries on my terminal when I run tests?
error: (400) Route: /api/v1/venues - notNull Violation: name cannot be null
info: BadRequest: notNull Violation: name cannot be null
  <stack trace>
"
"AWS splits environment variables for the database into hostname, port, db_name, username, and password. Can I build the database URL with multiple environment variables? The examples look like this: ""postgres"": ""DATABASE_URL"", where you have one environment variable that sets the url."
"Hey guys, how can I only update one field inside database using feathers-client ?"
"hi, how can i use this socketio services in another app? Any one can help me out with some advices. Thanks."
"for protected endpoints, do i have to call app.authenticate before each service all, or can i just use app.service and feathers-client grabs the jwt automatically? if I try the latter, I get a NotAuthenticated: No auth token error."
"where can I find some example or doc on how to update multiple records at the same time? I know it's thru service.update(null, ...), but it's blur for me then what are the ..., like where to put the query (well, I guess on query) and the update to be done..."
where can I find a list/definition of all methods being dynamically added to a service when starting the app? like filter for example
Can I use feathers client using node ?
I have an external REST service that allows me to open a streaming connection to receive real time data. How can I pass that data through feathersjs?
But how can I attach those identifiers ? Maybe through query string ?
can I call this server side?
how can i combine two services data from one request
how can i include feathers-hooks-common
"How can I help you, help me?"
"Hey guys, how can I add additional field using after hook ?"
"Hi all, how can I access the sequelize methods of my models after I define them?"
How can I set a temp service listener and then remove it ?
how can I access the data provided from a before hook?
how can i protect my user service in a way that lets auth through but not any old request for any user?
"authentication via the local module seems to require access to the *get* of my user service, pre login how can i protect my user service in a way that lets auth through but not any old request for any user?"
"Hey guys, how can I also populate the patched event ?"
Can I use feathers to open my beer?
can i use the feathers hash password outside hooks? how?
How can I set html5 client side routing ?
can I make a conditional populate?
"hi all, how can I access the sequelize methods in an after hook? I have access to hook.result, but cannot seem to reach the sequelize methods from it."
"I have a bookings service as well as a locations service. I need to create two location records every time a booking is made. I used hooks to create the additional locations, and that works fine. However, When I do something like GET /bookings, I get back the booking object but no locations. My bookings will always need to have at least 2 locations. How can I enforce this? Is there some way to create the locations at the model level?"
"feathers client seems to override my timeout setting for socket io, how can I avoid this or where should I configure it?"
Where can I check for problems if my feathers-authentication config is not saving the token to localstorage properly? I did as the example in https://docs.feathersjs.com/authentication/client.html Only adapted for an es6 react app.
how can I use the preexisting shortcut without allowing external access to feathers port ?
"Hey guys, how can I select WHERE IN AND ? { status: 0, $in: [] }"
how can I use feathers-auth to authenticate my user in my middleware ?
how can I update the id field?
"I'm using Auth0 for auth. I have 2 social connections enabled FB and Google. I'm testing auth with the same email. My FB account has the same email address as my Google account. Got it? Now in my user-model, ""email"" is set to unique. So here is my problem. When my collection is empty (mongodb) and I login via Auth0 either using FB or Google first, the authentication is success. But if I try to login again, but this time using the other method, the authentication is a failure. Why? Well because there is already User object in users collection with that email. Here is my code: https://www.dropbox.com/s/qarajgtz8bssuep/Screenshot%202017-04-11%2015.16.02.png?dl=0 https://www.dropbox.com/s/5gj83uuq7s9z90p/Screenshot%202017-04-11%2015.17.14.png?dl=0 https://www.dropbox.com/s/aynidh94rjbxu0s/Screenshot%202017-04-11%2015.17.52.png?dl=0 https://www.dropbox.com/s/fowl17blka8hv8t/Screenshot%202017-04-11%2015.18.22.png?dl=0 So What can I do to fix this problem?"
"When my login fails all I get is ""Something went wrong and we weren't able to log you in. Please try again."". Can I somehow get error messages in server console?"
"I'm using Auth0 for auth. I have 2 social connections enabled FB and Google. I'm testing auth with the same email. My FB account has the same email address as my Google account. Got it? Now in my user-model, ""email"" is set to unique. So here is my problem. When my collection is empty (mongodb) and I login via Auth0 either using FB or Google first, the authentication is success. But if I try to login again, but this time using the other method, the authentication is a failure. Why? Well because there is already User object in users collection with that email. Here is my code: https://www.dropbox.com/s/qarajgtz8bssuep/Screenshot%202017-04-11%2015.16.02.png?dl=0 https://www.dropbox.com/s/5gj83uuq7s9z90p/Screenshot%202017-04-11%2015.17.14.png?dl=0 https://www.dropbox.com/s/aynidh94rjbxu0s/Screenshot%202017-04-11%2015.17.52.png?dl=0 https://www.dropbox.com/s/fowl17blka8hv8t/Screenshot%202017-04-11%2015.18.22.png?dl=0 So What can I do to fix this problem?"
and can I $disableSoftDelete within the populate hook?
@eddyystop excellent!!! How can I update my feathers-cli?
@marshall how can I update my old feathers-cli to the auk version?
should I just ignore this warning or how can I update to minimatch 3.0.2 ?
"@daffl could you help @tbanner15 ? His original comment was ""hi, i'm trying to make an api call with PUT to update an entry but its not accepting the ""id"" field change that I want to make. [12:03] how can I update the id field? [12:04] i tried a patch as well and that also didn't work."""
How can I do a find query and find partial matches for string fields?
Hello pls can I create something like Postmates with feathersjs
I have one more question can I set the storage as cookie instead of localStorage on feathers authentication client ?
@marshall i did the redirect from a post to a get with express. How can I access the res.send() inside the service?
How can I really understand this framework?
"Idk if this is a straight up feathersjs question, but I'm using sequelize and wondering how can I associate many-to-many models when creating them?"
"hello! two questions more for the :feathers: core team or contributors I guess: - internally on the server, are the params given to hook.app.service(...).find/get/create/...() serialized somehow before going thru the hooks of the according service call? ie, can I pass a huge js object without it being serialized/deserialized? - is there a way to know which service has called another one? so that doing this.app.service('users').update(...) from a hook of a posts service, I'd know in users hooks that it has been called internally from the posts? (purely for debugging purpose)"
"ok, got it. So if I need to use a hook to remove the password column, how can I “chain” them?"
@marshall where can I ask you something related to can-connect-feathers?
can I extract the conversations from slack?
can I use async/await in featherjs? given my nodejs version supports it
"yes you can !
can I use async/await in featherjs? given my nodejs version supports it"
Hi. How can I change the property name in localStorage which is being used by feathers authentication?
how can I find out which database url feathers is using
I recently updated the cli and generated authentication. How can I get a JWT token locally?
how can I get more verbose errors from authentication?
"How can I restrict fields that can be submitted via POST or similar?? I dont want to users to add custom fields. I want to discard all custom fields. I was thinking before hook, looping through submitted fields. If submitted fields isnt in array of allowed field, discard it. Before I do that, is there anything built-in that can take care of this?"
where can I increase the limit allowed?
how can I prevent a hook from running if one service is called by another?
how can I secure it now?
"Hey, can I generate services without overriding the database connections in config and postgres.js files?"
"hello guys, can I .get a service by a custom field besides the ID?"
"@ekryski Thanks, but not exatly, For example, I run feathers generate service and I need to answer with the name of the service. How can I know how to fill? Snake case? camelCase? start with capital letter? plural?"
How can I achieve that?
"Hi ! First of all, thank you for feathersJS, I'm currently learning it to deploy my new app ! But a little question about authentication in feathers. I well understand how it works with email+password, but I want to use a different way. Actually, I'm coding a react native app, and I don't want the users to login or register themselves. On the first launching of the app, a new user is automatically created on the server (I already coded this, using ""create"" method in ""users"" service) based on the unique ID of the Phone and the Phone software version (got using react-native-device-info). And then, for the authentication, it authenticates using this unique_id and the phone_version. But, for the moment, I'm stuck in feathers-authenticate. I don't know how can I do to authenticate with two parameters without having a password that needs bcrypt, and then returns a token to authenticate later requests, containing for example the user_id in database, a jwt,... Well I'm quite lost with local strategy, jwt strategy... Even with passportJS docs 😢 So my question is : is it possible, with feathers-authentication, to authenticate without a password but always using an unique identifier (not a ""mail"" in my case, but a couple of datas : ""unique_id"" and ""phone_version"") ? Then, I want an unique channel for the user to chat with only one other user, so, during authentication, I may need to send back to the app some user identifier (like unique user_id in database) to not mix every requests once the user is sending messages and receiving ones... P.S. : I think that my question is newbie, but I'm just starting 😢"
how can I tell if they just post http://localhost:8081/inventory/ without a value
can I do optional authentication?
Can I reliably use both local and remote services on the same feathers-client instance?
2. how can I debug the code on the server side ?
Can i update() multiple datasets at once?
@dnszero so how can I debug my server side code?
But how can I get the results outputted to the client?? Promises are messing with my head 😕
"@dnszero yes, but how can i understand how it works if I cannot read the code? documentation is not much detailed"
"Can I see how middleware is defined, just so I know what it looks like?"
@marshall can I go into and find function implementation ?
"hey guys, I’m trying to customize my verifier, but I’m not allowd to import the verifier in my authentication.js file, how can I work around this? https://docs.feathersjs.com/api/authentication/jwt.html#customizing-the-verifier"
"RestrictToRoles takes a role parameter but what roles are expected? In the documentation is see ""super-admin"" and ""admin"" but I don't know their origins are there predefined roles in feathersjs . If yes where can I get more predefined roles if no how can I define my own custom roles as a service"
"@marshall RestrictToRoles takes a role parameter but what roles are expected? In the documentation is see ""super-admin"" and ""admin"" but I don't know their origins are there predefined roles in feathersjs . If yes where can I get more predefined roles if no how can I define my own custom roles as a service"
"hi, noob question: how can I get first result of the query, something like App\Flight::where('active', 1)->first();"
"what would be the best way to set *user role* in jwt ? I have a field in my user model called ""isAdmin"", how can I set that field in the jwt for the client to read ?"
Can I use feathers-configuration from the client side to 'detect' environment configuration automatically? (i.e. I don't want to hardcode host:port for socket.io)
How can I debug every request received by feathers (v2/auk)? is there any simple way of adding a console.log(req) or equivalent?
@silvestreh can I put this info on the token itself ?
how can i reuse an existing service inside another??
@luke can I use the last part of the token as the user id ?
"@ekryski @daffl if you deprecate permissions, can I take it over?"
can I get a user's IP from within a before hook?
"there was talk earlier of a faster websocket engine and faster http library that could be inserted under feathers, where can I find more about that?"
or how can I debug the query is being processed in my call? Thnkx! 🙌
how can I group those OR conditions in a AND ( … ) or something to that effect?
"hi guys I am new to feathersjs I am now using feathers with sequelize and how can I do a find with associated objects? when I used this in the before hook
        hook.params.sequelize = {
          include: [ sequelize.models.branches ]
        };

it flattens all the objects"
can I somehow make the feathers client wait for authentication?
"or how can I ""publish"" this later"
can I somehow make the feathers client wait for authentication?
"@matt_c, I didn’n, thats where the problems was i run mongod --dbpath mongo from my project dir and it has create a mongo folder and with some files i have a json dump from other mongo db how can I import it here? there is no collections at all, so I created one called users"
"how can i detect on the client when the socket has disconencted/reconnected? this is what im doing now:
const socket = io(websockerUrl);

socket.on('connect', (xx) => {
  console.log('socket connected');

});
socket.on('reconnect', () => {
  console.log('socket reconnected');

});
socket.on('disconnect', (error) => {
  console.error('Socket disconnected', error);
});

const app = feathers()
  .configure(feathers.socketio(socket))
...
"
can I use an env var for the db host in prod?
"Hi, how can i do an $like search using Sequelizejs?"
async you mean? So the question is: can I overwrite a service methods with an async function?
can i use feathesrclient.service as a service in another feathers app? 🙂
Hi everyone. how can i optimize the speed of my feathers service
how can I do this
How can I use feathersjs's hooks in client side?
"I use feathers with sequelize and in my users model, I defined users.belongsToMany(users, { as: 'Follower', through: 'follows', foreignKey: 'source_id', otherKey: 'target_id', constraints: false});. Now, Do someone knows how can I perform a findAll({ include: [ Follower] }) search in my users.find() service method to retrieve all the followers associated to a user?"
"I mean, can I set couple hooks separated with coma?"
"I mean, how can I understand what kind of functioanllity is available for me?"
firing a question .. let's say I have a ServiceA that has a before hook method say foo. also ServiceA has an additional before hook authenticate('jwt') so user record is available in foo. foo calls another service ServiceB. how can I make the user record available on ServiceB hooks ?
"when creating a custom service, can I omit to declare a method (like patch() for example) in the service class if I want to completely disable it for this service. Or would it cause some issue?"
can anyone tell how can i authenticate a service in feathers if i am not using feathers authentication? how can i get the jwt token in the hooks
"Can I see a snippet of your hook? The above what I pasted should only run the lockDownToRole if the request to that service is via rest, if an internal call like from another service, I thought it would not apply this hook."
actually i have a micro service which takes care of sign up and login ...and it creates a jwt token ... how can i use it in a hook to authenticate a service
@harmony you mean adding the category_id into the products? how can I construct a m-m relationship?
"by the way
const customHashPassword = {
  passwordField: 'services', // key name of password field to look on hook.data
  hash: (services) => {
    return new Promise((resolve, reject)=>{
      bcrypt.hash(services.password.bcrypt, null, null, (err, hash) => {
        resolve({password: {bcrypt: hash}});
        reject(err);
      });
    });
  } // default bcrypt hash function. Takes in a password and returns a hash.
};
how can I resolve hash to custom property? resolve({password: {bcrypt: hash}}); set this object to services property is it possible to set it to some property that is on same lvl as services?"
can I somehow keep parameters I assigned via req.feathers.param when I do more internal service calls?
"How can I make a ""like"" sql search on a table field using the sequelize adaptater and more generaly how can I use sequelize specific operators in a query. Is it something like defining
 params.sequelize = {
     serchedField: {
            $like: '%' + searchTerm + '%'
     }
}

?"
@michaelermer : I am not familiar with this. What is the purpose of the lib folder? Why do you expect all packages to have on in the future? Where can I learn more about this?
"Hi there. Quick question : I wanna do a hook that needs to query the database, so the connection returns a promise. How can I make sure the promise is returned before we exit the hook? It sounds defeat the purpose of promise."
"Hey guys, can I use feathers common remove hook to remove null values from the response ? Or do I need to create a custom global hook ?"
@eddyystop ok…but throwing a coding error as you put it won’t cause it to be logged. how can i ensure it gets logged via the app.logger?
so how can i access the variables inside the function ?
"Hey guys, how can I overwrite the ORM errors ?"
"Hello, I created a custom service that updates the users collection. How can I emit a event to notify the clients that are subscribed to the users default service that changes were made?"
"generally if A service context invoke B context and somewhere B fails, can I catch the exception in A context ?"
hi everyone. I have a service called /users and now by following the requirements I need to add a call /users/:users_id/all_matches. so how can I make /users/:users_id/all_matches use the same set of services/hooks as /users?
"I want to use an assync function into a before hook. How can I make the hook to wait for this assync function callback to continue? ` function(hook) { myassyncfunction(parameters, function(err) { if(err) { return console.log(err); //exit with a feathers error here } //else, all OK//TODO: continue to the service itself }); }"
"An array of services is a property in app. The prop name is services or _services. Each service object contains its path name.
can I list from the client the services that are available?"
"I want to use an assync function into a before hook. How can I make the hook to wait for this assync function callback to continue? I have something like this
 create: [
	//Save the file in memory to disk
        function(hook) {
            if (hook.params.file){
                const file = hook.params.file;
                const localpath = 'avatars/'+hook.params.user.id;
		fs.writeFile(localpath, file.buffer, function(err, written) {
			if(err) {
				return console.log(err);
				//TODO: exit with a feathers error here
			}
			//else, all OK, file has been saved to disk 
  		        hook.data = {path: localpath, size:written};
			console.log(""The avatar was saved!"");
					
			//TODO: continue to the service itself
		}); 
            }
        }
],

fs.writeFile() is assynchroneous and I want to be sure that the file has been corectly written to the disk before calling my service (that write some informations into a database)"
can I list from the client the services that are available?
How the feathers-auth-management sends the verification email? Does it use another mailer package? Can I use mailgun somehow?
"so can i query the database , update it manually and set the hook.result ? is that a good practice?"
Hi everyone. can I ask how can I access the app object when I am in the service?
"How can I manually set data in a JWT token? I can see a payload but I need to set other stuff, I’m really lost on were to look, this channel seemed appropriate 🙂"
How can I merge client calls ?
"Hello folks, I have a simple question that I would like to ask you. What kind of authentication strategy do I need for IOT devices? I want to use Feathersjs on backend, but how can I authenticate to these devices. I guess I need some sort of API token for each device."
"Hello folks, I have a simple question! What kind of authentication strategy do I need for IoT devices? I want to use Feathersjs on backend, but how can I authenticate to these devices to access several services securely."
where can I find some examples of how associate (models) {} is supposed to work in sequalize?
"Hi. On the server-side, how can I generate a token based on the username and password?"
"Hi. On the server-side, how can I generate a token based on the username and password (hashed)?"
"Hello, how can i prevent any user, that visit my site, make rest calls? I do not have got user authentication neither registration. I just want to prevent rest calls. Only inside application make possible rest calls. For example when user will type /api/Test he will no get anything, but inside application if user will visit page test, the app will make fetch to /api/Test and will get the needed data."
"@epoz Its not that you want to prevent REST calls, its that you want some REST calls to fail. That is similar to permissions. Write a custom hook for that.
Hello, how can i prevent any user, that visit my site, make rest calls? I do not have got user authentication neither registration. I just want to prevent rest calls. Only inside application make possible rest calls. For example when user will type /api/Test he will no get anything, but inside application if user will visit page test, the app will make fetch to /api/Test and will get the needed data."
"Hey all. How can I call an update of service two, after the patch of service one. So, in the hook of service one, I want to call the patch of service two. I have this currently, but I haven't seen it working yet
exports.after = {
patch: [
        micPatchSurvey()
    ],
};
function micPatchSurvey() {
    return function (hook) {process.env.mic.surveyStartStatus : process.env.mic.surveyDoneStatus;
const iStatusId = 10;
        return hook.app.service('mic/change_orders').patch(
            hook.data.survey_source_id,
            {
                status_id: iStatusId
            }
        );
    }
}"
Can I make some fields in my service create only? For example user.email to be available in create/get/find but unavailable in update/patch? Or at least make it server only. I would appreciate some directions.
can I pass custom variable to authenticate? so the API can know whether it should block login from the admin app?
Hi everyone. May I ask how can I do database something like ?receive_datetime=null?
"can I declare to few services in user.service? I want add additional service and use hooks for user service. But ""userEmailService"" is undefined after creating service. With ""users"" service everything ok
// Initializes the users service on path /users
const createService = require('feathers-sequelize');
const createModel = require('../../models/users.model');
const hooks = require('./users.hooks');
const filters = require('./users.filters');

module.exports = function () {
  const app = this;
  const Model = createModel(app);
  const paginate = app.get('paginate');

  const options = {
    name: 'users',
    Model,
    paginate
  };

  const optionsUserEmail = {
    name: 'userEmail',
    Model,
    paginate
  };

  // Initialize our service with any options it requires
  app.use('/users', createService(options));
  app.use('/users/email', createService(optionsUserEmail));

  // Get our initialized service so that we can register hooks and filters
  const service = app.service('users');
  const userEmailService = app.service('userEmail');
  console.log(userEmailService);

  
  service.hooks(hooks);
  //userEmailService.hooks(hooks);

};
"
"hello folks , how can i prevent inserting data into database using before hook if there is some invalid data ... i want to send some response to the user also like {""erro code"" : 403 , ""error message"" : ""some error message""}. obviously i dont want t insert unwanted data into database"
how can I validate all fields when calling PATCH ? use case: I can leave all fields = null when status=draft but I need to validate all fields when status=submitted
"Hey guys, how can I remove fields with discard from auth service ?"
"@kenny.ma You can use the json-schema compatible validateSchema hook for most things. You can in addition write your own custom function for specialized validations and call it with the validate hook.
how can I validate all fields when calling PATCH ? use case: I can leave all fields = null when status=draft but I need to validate all fields when status=submitted"
"@pauln19 In the hook, throw require('feathers-errors').BadRequest('General err msg', { errors: { field1Name: 'Specific err msg', field2Name: ... } } )
hello folks , how can i prevent inserting data into database using before hook if there is some invalid data ... i want to send some response to the user also like {""erro code"" : 403 , ""error message"" : ""some error message""}. obviously i dont want t insert unwanted data into database"
With the feathers-knex can I get a similar behaviour as sequelize for making associations?
can I instead re-use the same generic class file for multiple services?\
"I'm trying to adapt the sys_user with this:
const options = {
        Model: sys_user(app.get('mfp_sequelize')),
        paginate: false,
        sort: { user_name: 1 }
    };
But the authentication select doesn't accept that. Can I put this in a config of authentication?"
"can I populate array of ObjectIds *Conv. Model*
  
{
    toPhone: { type: String, index: true },
    classIds: [{ type: Schema.Types.ObjectId }],
    conversation: { type: Array, default: [] },
    hasRead: { type: Boolean, default: false, index: true },
}

And I have seperate service for class as classes and I want to populate all class objects in classIds while getting this Conv. model I tried hooks.populate but not working for me"
"@marshall thank you. I use
app.passport.verifyJWT(ExtractJwt.fromHeader('authorization')(params), config).then(result => {})

it helps. I have next object:
{ usersId: 2,
  iat: 1497277543,
  exp: 1497363943,
  aud: 'https://yourdomain.com',
  iss: 'feathers',
  sub: 'anonymous' }

Can I add additional fields in config? Example part of my config :
""jwt"": {
      ""header"": {
        ""type"": ""access""
      },
      ""audience"": ""https://yourdomain.com"",
      ""subject"": ""anonymous"",
      ""issuer"": ""feathers"",
      ""algorithm"": ""HS256"",
      ""expiresIn"": ""1d""
    },
    ""local"": {
      ""entity"": ""users"",
      ""service"": ""users"",
      ""usernameField"": ""email"",
      ""passwordField"": ""password""
    },
    ""cookie"": {
      ""enabled"": true,
      ""name"": ""feathers-jwt"",
      ""httpOnly"": false,
      ""secure"": false
    }
  },
"
how can i deploy a feathersjs app with mongoose on Microsoft Azure?
"@orimoyegun Deploy just as you would a plain JS app.
how can i deploy a feathersjs app with mongoose on Microsoft Azure?"
"Thanks for your reply. Yes I have no issue calling the third party api. I am mostly wondering how can I insert, or update a database record using a feathers service within my app. Is there a programmatic usage of a Feathers service? I don't want to make http requests to the service itself. I'd like to just do something like: messages.create() instead of sending a POST request to that endpoint.
@lenny If I understand correctly you want, within a setInterval, to call a non-Feathers API on another server and then update a Feathers service. There is nothing particularly Feathers about this, just JS. Feathers REST and WebSocket clients cannot call a random non-Feathers server. You'd have to use fetch, axios, superagent, etc."
how can i do a GET call of a web api inside my feathers service
"Hi. I have a shared backend for 2 different apps (e.g. app1 and app2). Now, my question is: ""On the backend, how can I determine if a certain request comes from app1 or app2?"""
"Alright, maybe I don't need to save user data in my database. Can I access them somehow on the client? And if so, then how? Anyway many thanks for ur answer, saved my day 😉"
"Hi guys I need your help. How can I create an asynchronous initialization of a service? I'm working on a dummy project and I have 3 different services (A,B and C). I want to start the service A and B right away. However, the service C need to perform an set of asynchronous calls. When async calls are completed I want to start the service C and the application itself. Is this possible? If so, how?"
How can I query a belengsToMany association?
can i use both *Mongoose* and *Mongodb* in same project ?
How can I pass throught the Feathers adapter?
I did console log in service. What can I make wrong. I mean just wanted to use that in service file
"Hey all. A question with feathers-vuex. I have this running and can add actions to my files which relate to a service defined in the store. Now where can I best make it that the find includes it related table so I can select on a column in that tabel. The column is already in the dataset the service returns, but you can't use that for then it says column unknown"
"@edgar.koster You may get an answer faster in the vue channel.
Hey all. A question with feathers-vuex. I have this running and can add actions to my files which relate to a service defined in the store. Now where can I best make it that the find includes it related table so I can select on a column in that tabel. The column is already in the dataset the service returns, but you can't use that for then it says column unknown"
can I send the token from the oauth provider and send it to feathers and get a token to log in?
"amaurymartiny uploaded a file: Thanks @marshall, it worked! I have another question: after I do a socket.emit('authenticate') with the accessToken, I get a response, as in the screenshot, with null as a name. How can I listen with socket.on('??') that the user is authenticated?"
"this is wonderful start, can i run the example standalone?"
"Hi guys, I need to share a common instance of a third party sdk between various services... how can I do it? Right now I intialize it inside every service where I need it..."
how can I return a custom object on get('custom') ? instead of 404
"but , now, how can I login (let's say, via Postman) in order to get my JWT Access Token?"
"How can i add option ""jwtFromRequest: fromUrlQueryParameter(param_name)"" in feathers-authentication-jwt?"
Can I create my own index.js file
"How can I query for a document using .find() then obtain it's id so that I can remove it? This is what I'm trying to do:
contact.remove(contact.find({ myId : '000000'}).then(data => data.myId == 'someID'));
"
can I generate client certs and sign them with let’s encrypt ?
How can I manage authetication with https://github.com/feathersjs/feathers-redux I am trying to understand https://github.com/eddyystop/feathers-reduxify-authentication is there any new documentation?
"Hi all! I have been looking at the docs for feathers and so far, I understand that the ""local"" strategy for authentication works like username/password. In my case however, I need to have one authentication for username/password and another authentication for api client ID/client secret. Currently in the config there is only one ""local"" object in the ""authentication"" object. In this case, how can I setup feathers to support multiple ""local"" authentications?"
"Hi guys, can't understand if it's possible to use ""contains search"" with feathers. I am using MySQL Database, if there is no feathersAPI for that feature - can I run SQL command through the object by myself?"
"Hi, I'm trying to debug a hook error, but feathers-errors seems to be swallowing up the stack trace. Can I disable feathers-errors (temporarily) or somehow get it to show me the stack trace of the actual error?"
how can I ensure app() is ready before running my test suite?
"hi, should I be creating a db connection in each of my services as in this example? https://legacy.docs.feathersjs.com/databases/knexjs.html or can I create it once somewhere and use it in all my services?"
"are there any supports for angular 2? if so, can I see what setup is neccessary to use feathers w socket.io ? 🙂 thanks"
should I be creating a db connection in each of my services as in this example? https://legacy.docs.feathersjs.com/databases/knexjs.html or can I create it once somewhere and use it in all my services?
"Alright, so basically I will make another hook.app.//service call to populate it or can I just set the sequelize params ?"
How can I disable REST routes for a service?
"I’m sending a PATCH request using postman and sending parameters as JSON. Where can I debug what I’m receiving in feathers? I thought params.query should contain that info but it seems not. This is the code I’m using:
var request = require(""request"");
var options = { method: 'PATCH',
  url: 'http://localhost:3030/product-child/596eeb46dbe65a061bd65ce2',
  headers: 
   { 'postman-token': '3fbfee02-ec4f-19ec-3f1b-17fe43153509',
     'cache-control': 'no-cache',
     'content-type': 'application/json' },
  body: { changeMe: 123334 },
  json: true };
request(options, function (error, response, body) {
  if (error) throw new Error(error);
  console.log(body);
});
"
"Noob question, with feathers can I create a service inside a service? Say /messages would exist but inside messages could I have /messages/bob ? Specifying the of a service path in 'feathers generate service' causes a no record found error when trying to access the service. Any help appreciated."
"mm... I mean in the case of
    this.orders = app.service('orders');

    this.orders.on('created', order => this.notifyIfUnassigned(order));
can I get params as well as order?"
"What I'd really like to understand is where is this crucial data accessToken supplied in authentication over socketio. It's very clear in REST how this hook would work, it will pick up the token from the custom header x-user-token I've provided. But how does this really work over socketio, and how can I tweak the auth.hook.authenticate to work well with this custom setup"
"This for example, how can I set the accesstoken in the body of the get request?"
Can I remplace body parser with this ?
"just downloaded slack and using it to get started on a personal project. Mostly new to mobile app dev also, so excuse the newbie question. I'm setting up feathers with knexjs and connecting to mysql. I used the generator to generate a users service. Tried to start up the server and get Access denied for user 'root'@'localhost' (using password: NO). Noticed the default doesn't use a mysql password, just the connection string stored in the default.json file. Is that recommended or should I be setting it up to use a password, and if so how can I do that in a secure way?"
"Hi, how can I set the amount of results returned by every service (default value?) but application wide, not setting it for each service? Thanks"
How can I set headers to use CORS in my app? E. g. my frontend can talk with the backend.
how can i get the proper error message using feathers
"how can i resolve this warning message ""Possible EventEmitter memory leak detected. 65 connection listeners added. Use emitter.setMaxListeners() to increase limit"""
I’m working on integrating thirdparty authentication (oauth/openid) with a react client… my though is to redirect the user to the API route => to the provider => API return route => client route … In the last step I need to include the generated jwt token in a query param in order to transfer the JWT to the client .. how can I include that in the successRedirect?
Or can I somehow pass the cookie in the successRedirect?
Any idea how can I fix that…
"is there any way to assign object of one user in field of another user through feathers-seeder like I created two users through feather-seeder configuration like
module.exports = {
  services: [
    {
      path: 'users',
      randomize: false,
      templates: [
        {
          name: 'Pat Raftera',
          email: 'pat@example.com',
          password: 'password',
          canCreateSessions: true
        },
        {
          name: 'Austin', 
         email: 'austin@example.com',
          password: 'labels2016',
          canCreateSessions: false
        }
      ]
    }
  ]
}
We have followers field in user schema followers: [{ type: mongoose.Schema.Types.ObjectId, ref: 'users' }] so how can I assign Austin as a follower of Pat Raftera through feathers-seeder configuration"
how can i update a document on the server
"I hope a simple question: how can I access one service from another? Because I need to loop through large numbers of records, I can't use a hook to perform the call"
"I have two questions about feathers-blob, using S3: - How can I upload to a different path using feathers-blob? The key field passed to s3-blob-store seems to always be file_hash.ext, without the possibility to add a folder path before - If I upload a Multipart file to my server, and I want to server to upload it to S3. Do I base64-encode it first on the server (as per the File uploading tutorial), pass it to feathers-blob, which himself decodes it to a buffer, and upload that buffer to S3? Looking at the code seems that it's done like this, seems like a lot of effort."
"hey guys, i have a project with laravel backend api, now i want to move the chat service to mongodb and make it real-time, on top of feathers... so, the client app would communicate with feathers backend on socket.io, the thing i need to solve is authenticating the user to fetch his messages - i already use JWT for laravel authentication, theoretically, can i use the same generated JWT for feathers, provided i share the secret key between laravel and feathers, without a users collection in mongo?"
#NAME?
"Hi, I'm using feathers-vuex with nedb and the code of the feathers-chat-vuex as an starting point. However I have 2 indexes instead of only 1, so how can I change the following code to show a custom error depending on the error returned by the server?
this.createUser({cedula, apellidosNombres, email, fechaNacimiento, contrasena})
            .then(response => this.authenticate({ strategy: 'local', cedula, apellidosNombres, email, fechaNacimiento, contrasena }))
            // Just use the returned error instead of mapping it from the store.
            .catch(error => {
              // Convert the error to a plain object and add a message.
              let type = error.errorType
              error = Object.assign({}, error)
              error.message = (type === 'uniqueViolated')
                ? 'La cédula o correo electrónico ya está en uso.'
                : 'Hubo un error en el registro.'
              this.serverError = error
            })
"
How can I increment / decrement using sequelize ?
How can I send created / patched events only to users that are on the page which refer to that update ?
- Can I change the provider on the first hooks (professional service)? Is a secure approach?
"Hello all. Noob to feathers. I have a question regarding doing a mongodb $push on a JSON field using feathers. I read through a issue post on github https://github.com/feathersjs/feathers-mongoose/issues/165#issuecomment-282206324. There is some code at the bottom of the page that could be used to do the $push. My question is where would this code go? In a service hook? Or how can I make this work through a hook. Referenced code:
// Create a dummy Message
app.service('messages').create({
 text: 'Message created on server',
 items: [ 'a' ]
}).then(function(message) {
 return app.service('messages').update(message._id, {
   $push: { items: 'b' }
 });
}).then(message => console.log('Created and pushed message', message));
This part of the code I assume
app.service('messages').update(message._id, {
   $push: { items: 'b' }"
How can I replace the ID field with another field in a create hook?
I would like to continue developing my app which is basically a chat app. I wanted to ask something .. Mainly most of the users will use the app with their mobile devices. What are the different available options for me? Can I develop a simple Responsive Web Page and this will enough? or should I use frameworks like React Native / VUE Js ? What's the thing also with Cordova? Phonegap? Ionic? do I need to learn this as well ? Thanks 🙂
And later I will see how can I integrate react / react-native
"hey, I've got a service set up which is essentially a key:value list of settings stored in a mongodb. The rest of my feathers app relies on these settings - how can I ensure these settings are loaded before trying to do anything else in the app? Can I hook/override the feathers ready functionality?"
"hmm, so can I do something like app.set(""dynamicSettings"", app.service(""settings"").find())?"
but also how can I make the rest of the app wait for that to be set?
"Guys, I am loading rows related for a table and I have various queries instead a inner join. How can I have inner join among tables on feathersjs?"
Can I make the ID parameter in a get optional?
Can I have a unique query to load the states instead various queries?
"""Can I have a unique query to load the states instead various queries?"" You will have to clarify that."
Found something for Express. Can I do the same here?
How can i use socket connection in services to listen different event of socket?
"Hey! I'm trying to setup sequelize relations on a service, I've got the following hook -
const setRelationships = context => {
  postgres.models.customers.hasMany(postgres.models.addresses)
  context.params.sequelize = {
    include: context.app.service('addresses').Model
  }
}

I have 1 customer record with 2 addresses. Feathers returns two duplicate customer records with flattened ""addresses.id"": properties. How can I setup feathers to return the single customer record, with an addresses array?"
But how can I authenticate with the feathers client after obtaining the JWT?
"@ryan.wheale . Can I do:
function (req, res, next) {
  req.feathers.req = req;
  next();
}

to have access to the full req object inside my hook using hook.params.req or would there be any issue?"
"In other words, how can I hide a service from the rest (or any transport in general)?"
"Hi guys, I’m new at Feathers, I’m having a problem when testing it, I’m making the basic test to create and update users, in the end in the after function I remove the users from the database, the problem is that it keeps not working as the remove function of the model has a hook that it states that it must be authenticated to remove users, as obviously I’m not passing the Token on Users.remove(null, () => {}), how can I do this test?"
"@pmiralopes Best might be to authenticate the user in the test. Otherwise you can consider making your test call like service.remove(... , { _isTest: true } } and conditioning your auth hook like iff(context => !context.params._isTest, authhook()).
Hi guys, I’m new at Feathers, I’m having a problem when testing it, I’m making the basic test to create and update users, in the end in the after function I remove the users from the database, the problem is that it keeps not working as the remove function of the model has a hook that it states that it must be authenticated to remove users, as obviously I’m not passing the Token on Users.remove(null, () => {}), how can I do this test?"
"In my opinions, it is not good approach. In the end, FP or OO is a paradigm programming; you should start by thinking in their concept. I use to start my fp by write comment: ok given number a and number b; how can I calculate summary of them"
"It’s not about extremist, the guy who write that article did an experiment asking “can I go 100% FP in Javascript”, and he succeeded … I’m not saying everyone should do it but it is interesting to read"
"Guys, how can I work with auth 2 authentication and a js app? Does someone have a sample?"
So how can I harness sequelizes query -> where translations?
"^ How can I do that with Object.assign(hook.params.query, { something: ""else"" });?"
"Hey guys ! On my hook, how can I get my mongo (from mongoose) db connection"
"Hey guys ! On my hook, how can I get my mongo (from mongoose) db connection I need to use gridFS in on of my service and I have to set it up first. For that I update moongose.js"
"The data is written inside the database when the code goes into the ""service part"". So if I want to get the _id of a record I have to use a after hook ? And how can I get access to the current _id object ? (Mongoose)."
When doing createJWT can I pass a user ID that the JWT will contain whenever a request is made containing the JWT in the header?
"I'm developing a simple real-time application with React Native. To put it simply; How can I use Service .find() method in real-time? I want to get real-time datas about a specific Topic ID. I need a code like the one below.
app.service('messages').on('find', { topidId: private-topic-id }, data => this.setState({data}));
"
Hey guys! How can I generate a token from a custom route using featherjs? Any internal method?
"Hi, how can I work with senecajs + featherjs + rabbitmq?"
"@marshall I noticed you are a contributer on feathers-vuex. We are using that at work. Firstly, thanks for your contributions. I have a gotten to the point in passwordless auth where I can authenticate with jwt strategy on the client. Our auth store module is managed by feathers-vuex. After authenticating then fetching the user, how can I put it into the auth state?"
"hey guys, can i use feathers-vuex in nuxt.js? has anyone some information?"
"I'm having an after-hook and this implementation inside:
fs.createReadStream(filePath)
      .pipe(parse({ delimiter: ',' }))
      .on('data', (line) => {
        // ... do stuff
      })
      .on('end', () => {
        //... do stuff
     
        console.log('this is printed only after the response is returned');
        return Promise.resolve(hook);
      })
      .on('error', (err) => {
        return Promise.reject(new errors.GeneralError('Could not parse CSV data.'));
      });

But the response is returned before the stream functionality is finished. I assumed that fs.createReadStream is synchronous, but I guess the on and pipe appendings are not. Therefore, I tried to return fs.createReadStream but I would get after-hook returned an invalid hook object error. If I return Promise.resolve(hook) after the whole stream functionality, the result is the same as the initial. How can I chain the stuff so that I return only after the .on('end') is done?"
"Guys, on the patch before hook can i get the old register (stored before) loaded from database to update? I need getting in the patch before hook the register data."
But how can I authenticate with it?
"Hello, i have a hook 'decideSomething' and a two function in many services. const decideSomething= commonHooks.iff(hook=> booleanFunction , doSomething) .else(doSomethingElse) how can i pass the functions so that all the services just pass their respective *doSomething* and *doSomethingElse* hooks to the more general decideSomething Hook??"
"hi, how can I disable a hook call, when I internally call find function, thanks"
"Can I (with a hook) change all incoming requests to Posts? (I have a service that will mimic an API endpoint and it takes a POST only. I want to take all request info (headers, body etc) and pass it in the psot for the service to deal with. Much like request.bin would do."
or can I simply call an attempt to authenticate and send a strategy name that I already registered in the feathers server?
"Hi, I have an entity that contains an array of id's and I need to populate that entity with the referenced id's, how can I do it using populate hook? Thanks!"
if so can I add session specific fields to the object?
I am using mongoose. How can I disable update completely?
hello. can I import a json config file using const conf = require('../config.json')
Can I disable pagination for a service when I use the client in the backend?
"Whenever I use ""populate"" in an after hook, I am also geting ""_include"" in my result - how can I turn this off generically across all services?"
"Hi, how can I generate a download instead of return json data for a specific service? ... thanks"
I want to create a service that will basically take in a long string and run it through html-entities decode() and return it back to the caller - Can I use the generators to set up something like this?
"How can I get create() to accept a string? app.use('/html-entities-decode', bodyParser.text(), createService(options)); produces this error: {""name"":""GeneralError"",""message"":""First parameter for 'create' must be an object"",""code"":500,""className"":""general-error"",""data"":{},""errors"":{}}"
what's the solution for this? can i try to bind to different ports?
"Hi there. I tried to modify the SQL (using KnexJS) in a hook but seems after I save it hook.params.knex = newStatement, it won't apply any query (example : ?user=1&account=2) to the SQL, is it normal or how can I apply that query ?"
"Hey all, quick question ... I am trying to monitor specific items in a collection ... I have 1000s of items in a collection e.g. app.service('messages') .on('created', message => console.log('New message created', message)); so this console log is going mental 😛 can I filter the items I watch? e.g. app.service('messages').find({userId:1}) .on('created', message => console.log('New message created', message));"
"Hi, how can I restrict the access to the users ""find"" without blocking the /authentication request, if I use restrictToAdmin on users-before-find i get fn.bind is not a function on /authentication"
can I ask why you're transpiling?
What is the main advantage to using feathersjs-socketio on the client vs vanilla socketio?
"Hi guys, first of all thanks for your amazing framework ! I am trying implementing something a bit special, but I am not sure what is the right way for doing it with Feathers. When some of my services are called, I would like to emit a different event and data to some clients as well. If for instance we take the scenario of a basic chat application, when a message is created, all the clients receive a created event with the same data (if i am not wrong). I would like, in my case, that some clients receive a different event with different data as well. Many thanks if you have any suggestions how to implement that properly 🙂"
"What is the most straightforward way to write a feathers adapter for an express middleware? I know all express middlewares work out of the box with feathers, but they are not real registered servicesin the app. So to be able to add hooks, listen to events from them, there is a need to write an adapter."
"returning to the upload question.... I can fine upload image based on the guide. Even when I use socketio with feathers client and in the payload i insert already a datauri, then whole multer part is obsolete, because multer will fire on rest use and with multipart/form-data. But I need some clarification: 1. If i send images or large files over socketIO, what is the limits? I think the browser load up everything and sending it over socket, and the server catching the whole thing in memory and when finish it spits out to the blobstorage. And we are back to the situation when we want to avoid huge memory usage right? When I upload only small images, it won’t be a problem, but with video I think I’ll have some memory problems. The same with progress tracking. I cannot find with socketio a way to track the upload progress. Is any event emitting to track a longrunning request completion (it must be several frames to send to the server, and I think we can track that) 2. If we stick to REST, there is another ‘small’ glitch. I need to protect the /uploads endpoint, that only authenticated users can access it. With service it is easy, but the multer fires before the service and collect the whole file. The main question where the beforeHook function is fire, before the multer or as I think after the multer and before the service call? If it calls after the multer, how I can protect the endpoint from anonymous user? I don’t want to allow to overload the server with uploads even when they discarded later on.... Thanks"
"Hi, regarding the new populate: What is the correct way to recursively populate embedded mongoose object. For example I have an array of objectid and i want to populate that array, and i want to populate two property inside every object in that array?
   schemaPost = { body: String, comments: [objectID of ‘Comment’]}
   schemaComment ={body: String, likes[objectID of ‘User’]} 


1. step populate Post.comments 2. step populate every Post.comments.likes"
You are running a hook. What is the code in the after hooks which runs the hook?
Don't show extracts of code. What is the hook for example?
"Hello, i am using feathers with apollo, until now i was using url o query database. Now i want use it the service that already run to call on react component. i tried this for begin. import feathers from 'feathers' const app = feathers(); const regionService = app.service('Region'); let data = regionService.get(1).then(region => console.log(region.title)); but it does not anything, what is the correct usage of this?"
"what is the proper way to call let's say the message service to get a list of messages without using a http request and use the service clientSide with the socket and provide at the same time the token generated when I authenticate with it? this gives me my token in localStorage:
this.fApp = feathers()
            .configure(feathers.hooks())
            .configure(feathers.socketio(socket))
            .configure(feathers.authentication({ storage: window.localStorage }));
this.fApp.authenticate({
            'type': 'token',
            'email': 'email@address.com',
            'password': '123456'
        }).then(function(result){
            console.log('Authenticated!', result);
        }).catch(function(error){
            console.error('Error authenticating!', error);
        });

this get the messages list
testGet() {
        const messageService = this.fApp.service('messages');
        messageService.find({}).then(function(res) {
            console.log(""find res"", res);
        });
        
    }

but I get this: Unhandled rejection NotAuthenticated: Authentication token missing. I thought the service would use the token it just stored in localStorage?"
@daffl what is the hook.result used later for then? not very clear on that
"Next, in the record to be joined, what is the name of the field being referred to by the record above?"
What is the name of the service to read the 2nd?
what is the correct way for importing a service from a different script?
What is the syntax for writing a variable inside query ? .find({query: {Year: myVariable}})
"@daffl that looks perfect, what is the best way to import the model into the hook?"
"hello! First time using Feathers 🙂! I have a question arounds hooks and services.. I want to build a ""foodService"" that allows me to filter results by a certain attribute, for instance filterBy ""foodCategory"" or smth like that. What is the recommended way of doing it? Thanks for the help!"
"https://github.com/feathersjs/feathers-chat/blob/auk/src/models/users.model.js This has a line of code using NeDB:
Model.ensureIndex({ fieldName: 'email', unique: true });

I don't presently have something like that for my rethinkdb version. What is the recommended way of doing the same thing? Should I make a hook that looks through the user service for the unique ID?"
And that code is not working you said? What is the error?
"feathers generate service
? What kind of service is it? MongoDB
? What is the name of the service? country
? Which path should the service be registered on? /country
? Does the service require authentication? Yes
"
"question… I want to do a PATCH using the Feathers REST API. I want to update a record, but I don’t know the _id of the record (I’m using Mongoose), but I do know another property which is know to be unique. so basically, I want to PATCH based on a non-primary-index property what is the best way to do this?"
@nriesco @eddyystop What is the issue to look for?
What is the best way to check if a user with email address already exists in DB in before:create hook on users service?
What is the service to whose results the users records are bei8ng added?
"What is the difference between:
app.service('someService').before({
	find (hook) {
		...
	}
});
app.service('someService').before({
	find: ...
	}
});

TL;DR the use of find(hook) and find: …"
also I couldn’t run version on feathers-cli. what is the correct command for doing it?
"Hey guys, what is the best way to create a separate Feathers app that can interact with an exist Feathers app but on a server level. ie I want a main Feathers app running the main API, but a second instance almost which is for listening to a queue and processing the data using services. Main APP - Service 1 -> after hook (insert into queue) Second instance -> listening to queue -> process data into Main APP Service 2 I thought about spinning up the whole app again in a different mode, but wasn't sure if there was any better or alternative ways instead."
"So, creating custom service methods is not so RESTful, what is the correct approach to make an endpoint that does geojson distance searching in mongoose? I have my schema set up, I just want to pass lon,lat to it and get back my data ordered using the mongo's $near I have all the bits working, just not sure where this belongs in a feathers app... a service of it's own? a middleware?"
"Hi everyone. I am trying to use sequelize (mysql) as the database and for some services we need to do ""INSERT"" into multiple tables. so 1)I have no idea how to work with the service.create method. What is the correct place to add such piece of code? 2) I see that ""app.use('/transactions', service(options))"" generated when I add a new service <-- should I add the transactionService.create method somewhere nearby? Thanks"
hey all! What is the generally recommended way of testing an api service like this? Are there any articles / sample repos I can look at?
ryder uploaded a file: Untitled
"What is the best way to handle adding data to hook.data when creating an array of items? I have it working for a single item, but then releasing its not working with multiples."
"I have an external api that has multiple end points, so I broke down my services based on them. ie. api-accounts.service.js, api-transactions.service.js etc. My first question is, should I do this or should I make one service with more advanced queries? My second question is, what is the suggested route for rate limiting? The service only allows up to 60 requests per second. I used to do it like so with rxjs:
 request$.rateLimit(2, 1000, true).subscribe(value => console.log('value'))

rateLimit is a custom rxjs operator with args: (budget, time, shouldBuffer) that allows me to select how many requests (budget) for a given amount of time (time in ms). I'm trying to do something similar to this."
"What is the best way to have two user types - admin and members, and have them in different tables? Is it possible to use mulitple auth services? I’m on pre-auk"
So what is the problem exactly? You are trying to use a custom id property on a mongoose adapter?
"I am still trying to understand what is the bigger image, i will go through it. I din't get the point of how & why do we need hooks / services on the client side"
"Well I know what is the module at fault here. this is the feathers-authenticate one. So setting breakpoints won't really help here unless I also log data processed by the module... So I tried with debug and I think I might have an idea of what might be the problem. In the debug output, I have this: feathers-authentication:hooks:authenticate Attempting to authenticate using local strategy with options { name: 'local', usernameField: 'Tom', passwordField: 'password', entity: 'user', service: 'users', passReqToCallback: true, session: false } +640ms"
"Hi there, may I please ask a question? Could anyone please explain what is the pagination object in terms of database ? ""paginate"": { ""default"": 50, ""max"": 50 } I didn't get what it means even though I read about it .."
Could you please describe what is the approach to achieve this?
"Hi , I am not able to understand what is the difference between local auth and jwt auth? when to use what and how it is related to sessions if any relation ?"
What is the right way to implemet bulk service item creation?
What is the correct way of overwritting a service method (for example if I have a sequelize service and I want to overwrite its create() method) ?
"@harmony I have went through some of the Common Hooks and didn't understand the concept of 'validate' and 'validateSchema'. docs are really difficult to understand. 🙂 also, what is the difference between AJV and JOI"
"I have a feathers server with users that can follow each other. Depending on each user configuration, this follow can be automatic on follow request or need to be accepted by the target user first. What would be the way to achieve this, knowing that I have a users service (and sql table) that can return wether the user accept automatic follow or not, a follow service (and table) listing users follower/following pairs and a follow_request service (and table) listing users follower/following request and wether this request is pending or as been accepted/rejected by the target user. So I, for a follow request, I need first to look if this pair of follower/following user already exists in the follow or follow_request table. If yes, I return an error massage, if no, I have to look at the user table to see if the user accept automatic follow, if yes, I create an entry in the follow table, if not, I create an entry in the follow_request table. What is the most efficient/simple way to achieve this in feathers? Should my follow service call the user and follow_request service in hooks (if this is possible to call other service methods inside hooks) or should my follow service method directly make calls to the different necessary tables of the database (via sequelize calls)?"
"ok, btw, what is the purpose of params on get method ?"
"ahaha .. let's say users have an access to a specific resource, say 'messages' , they should be able to update only 1 field on that document. what is the best practice for managing this kind of authorization? I don't want users to update which field they want."
"question please, what is the best way to block a certain method on a service from being used ?"
"Also, the app.service('users').get(data.id) directly return a user entry (and not an array of users). So testing target.length doesn't make sense. I don't know what the method will return if the requested id do not exist in the users database though. Would it return null or undefinedor would it directly throw an error to catch()? Do you know what is the default behaviour of a get(id) method request when this id doesn't exist?"
I know but is there a section where I can find a description what is the expected way to pass the token and provider to the query in order to get the auth hooks working? I had a look here https://github.com/swarthout/feathers-apollo/blob/master/src/services/graphql/resolvers.js but that does not seem to work for me although I am using feathers-apollo like it is
"@marshall correct, there is an example, but in the app we should perform any db actions through services correct? so I don't know what is the correct syntax for this db call"
@marshall could you please advise on what is the correct synyax to invoke the service patch method call ?
"@eddyystop for example now i am struggeling to understand how hooks are working, in terms of what is the order of events sent to client etc.."
"I have a sequelize follows model with the following associations defined:
associate (models) { // eslint-disable-line no-unused-vars
       	follows.belongsTo(models['users'], {as: 'Source', foreignKey : 'source_id'});
	follows.belongsTo(models['users'], {as: 'Target', foreignKey : 'target_id'});
  }

Then, in my hooks I have defined the following hook:
before: {
    find: [
		function(hook) {
			const sequelize = hook.app.get('sequelizeClient');
			hook.params.sequelize = {
				include: [ Target ]
			};
		}
	], 

But when this hook is called, the server return an error with the following message: ReferenceError: Target is not defined So what is the correct way to request my ""Target"" users when performing a find() on my follows service?"
"Hi, forgive me for my silly js questions but can you please tell what is the purpose of ... operartor ?
export default function (...otherOptions) {
  return merge({}, defaults, ...otherOptions);
}
"
so what is the meaning of the number on the left side ?
"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters
Hi, forgive me for my silly js questions but can you please tell what is the purpose of ... operartor ?
export default function (...otherOptions) {
  return merge({}, defaults, ...otherOptions);
}
"
"Hey all, this is a super basic question that I really should know the answer for by now: what is the preferred way of accessing one service from another? The generated service class has no reference to the app object."
"Hi, what is the proper way of doing REST sub-resources in feathers?"
anyone knows what is the *instanceName:* config option is used for?
What is the recommended database?
"Hello all, what is the best practise to catch client-side errors globally just like on the server-side https://docs.feathersjs.com/api/errors.html#server-side-errors ? One of the possible use cases is to display a generic dialog with the error message instead of catching each call to the Feathers service. Thanks"
"@flynxi that has nothing to do with Feathers 🙂. The host field in the config is for convenience if you need to do link building (like for emails or oauth), we don’t use it to specify a host to run on. If you are trying to hit your server on a fresh debian install on Digital Ocean you might need to check your iptables or firewall setup. > What is the recommended database? We don’t have a recommended database. In our opinion the DB should be chosen based on the type of data you need to store and your application read/write requirements. All the DBs work just great and the beauty of Feathers is that if one doesn’t work for you and you’re not writing a lot of DB specific code (ie. you are sticking with hooks) then it’s usually only a few lines to swap a database to a different one. Your application code stays the same 😄"
but what is the signup endpoint?
"Hey all, loving the concept behind this framework. Thanks for all your hard work. I'm trying my best to train my brain to think in the ""feathers"" way, but I have one question about how to do something properly. I am attempting to use one of my services in a setInterval function that I want to run when the app starts. What is the ""feathers"" way of using an existing service in another non-service function that runs when called on app load? For instance, my setInterval function updates my database with new data from a 3rd party API. I want to be able to use the service.update() method at will in my setInterval function to appropriately update the data in my database, with that from the 3rd party API. I'm hoping this is programmatically possible without using http.request to make actual http calls within my setInterval function. Thanks!"
"Hello all, what is the proper way to check a JWT in a hook function assuming the client sends it in the Authorization: header?"
"What is the best strategy with Feathers for authenticating a websocket request with a JWT? I have seen people suggest put it in query string and use SSL, but I still don't feel great about it. Anyone used a better method?"
"hi folks .., what is the best way to send error message to the response in api so that user can see it in their console . i have a feathers api , in the before hook i am doing some validation check . If the validation fails , i want to provide some error code and error message . I don't want to use throw new Error {""message"" : ""error message ""} also if i use hook.error i get the error message in the server but how to send it as a response in the api"
what is the preferred approach for nested resources?
"@pauln19 Answered your same question in help.
hi folks .., what is the best way to send error message to the response in api so that user can see it in their console . i have a feathers api , in the before hook i am doing some validation check . If the validation fails , i want to provide some error code and error message . I don't want to use throw new Error {""message"" : ""error message ""} also if i use hook.error i get the error message in the server but how to send it as a response in the api"
"@/all Hello, I wonder what is the context (ie this) within a hook function ?"
"@rustancorpuz Use the populate hook if other than Sequelize. Use native features if Sequelize, though then you are locked into Sequelize. https://docs.feathersjs.com/api/hooks-common.html#populate
what is the preferred approach for nested resources?"
hi guys. any idea what is the best way to manage the POST response so it will ignore the errors and only return those able to insert under the hook.result?
"Hello! I’m having issues when running feathers generate authentication with selecting rethinkdb as database. *Environment:* - Mac OS X Sierra - feathers 2.2.3 - npm 5.1.0 - rethinkdb 2.3.5 *Steps to reproduce:* 1. I have up and running https://github.com/tenzan/feathers-chat.git 2. feathers generate authentication 3. Select Username + Password (Local) 4. What is the name of the user (entity) service? (users) <-- Enter 5. What kind of service is it? (Use arrow keys) ❯ RethinkDB <-- Enter *Ouput:*
events.js:182
      throw er; // Unhandled 'error' event
      ^

TypeError: Parameter ""url"" must be a string, not object
    at Url.parse (url.js:102:11)
    at Object.urlParse [as parse] (url.js:96:5)
    at ConnectionGenerator._getConfiguration (/usr/local/lib/node_modules/feathers-cli/node_modules/generator-feathers/generators/connection/index.js:46:24)
    at ConnectionGenerator._writeConfiguration (/usr/local/lib/node_modules/feathers-cli/node_modules/generator-feathers/generators/connection/index.js:103:32)
    at ConnectionGenerator.writing (/usr/local/lib/node_modules/feathers-cli/node_modules/generator-feathers/generators/connection/index.js:297:10)
    at Object.<anonymous> (/usr/local/lib/node_modules/feathers-cli/node_modules/yeoman-generator/lib/index.js:417:23)
    at /usr/local/lib/node_modules/feathers-cli/node_modules/run-async/index.js:25:25
    at Promise (<anonymous>)
    at /usr/local/lib/node_modules/feathers-cli/node_modules/run-async/index.js:24:19
    at /usr/local/lib/node_modules/feathers-cli/node_modules/yeoman-generator/lib/index.js:418:9

Let me know if this is something I should report on github?"
"One question, what is the defaul secret for the JWT tokens. app.passport.options('jwt').secret"
"hello all, I wonder what is the best approach to proxy a Feathers service with another Feathers service ? Use case: for client development ease I would like to create a proxy service acting like another service but simply filtering data based on some ""static"" matching parameters, eg a simple find() on the proxy service gets transformed to a find(query: { some params }) on the target service."
What is the direct Mongoose model call that works for this?
"Hallo, I create an app using the generator (app and authentication), as follows:
? feathers g app
? Project name test
? Description test
? What folder should the source files live in? src
? Which package manager are you using (has to be installed globally)? Yarn
? What type of API are you making? REST, Realtime via Socket.io

? feathers g authentication
? What authentication providers do you want to use? Other PassportJS strategies not in this list can still be configure d manually. Username + Password (Local)
? What is the name of the user (entity) service? users
? What kind of service is it? MongoDB
? What is the database connection string? mongodb://localhost:27017/test_db
Then I added the following code to app.js:
var User = {
 email: 'admin@feathersjs.com',
 password: 'admin',
 permissions: ['*'],
 roles: ['admin']
};

app.service('users').create(User).then(user => {
 console.log('Created default user', user);
}).catch(console.error);
However when I run it I get: info: error: users - Method: create: Cannot read property 'insert' of undefined What's wrong with it?"
"Hallo, I create an app using the generator (app and authentication), as follows: ? feathers g app ? Project name test ? Description test ? What folder should the source files live in? src ? Which package manager are you using (has to be installed globally)? Yarn ? What type of API are you making? REST, Realtime via Socket.io ? feathers g authentication ? What authentication providers do you want to use? Other PassportJS strategies not in this list can still be configure d manually. Username + Password (Local) ? What is the name of the user (entity) service? users ? What kind of service is it? MongoDB ? What is the database connection string? mongodb://localhost:27017/test_db Then I added the following code to app.js: var User = { email: 'admin@feathersjs.com', password: 'admin', permissions: ['*'], roles: ['admin'] }; app.service('users').create(User).then(user => { console.log('Created default user', user); }).catch(console.error);"
"Hi, what is the best way to restrict the role field for create, update and remove to admins only?"
"Hey, what is the proper way to send the auth token to a service that requires authentication using feathers-vuex?"
"what is the consensus of creating a feathers client, using it, and destroying it. How would one ensure a feathers app was destroyed and disposed of properly ?"
"Was hoping to get some guidance on how best to set this up. I've created a feathers app with a users service so far with some business logic and services around user accounts connected to MySQL. I now want to create a new separate app with a ""session"" service connected to MongoDB. I still want authentication to be in place for requests into the session service, but since this service is within another feathers app instance running, what is the best way to handle this? I could put both session and users in the same app, but I'm hoping to get more separation of components for stability and componentization. What is the best practice here?"
"@ramsestom hi, i am not sure what is the difference between a memory service to a custom one 😊"
"Hey, what is the proper way to send the auth token to a service that requires authentication using feathers-vuex?"
"What is the difference between using ""feather-client"" and ""feathers/client"" ?"
"One last question, if I wanted to throw an error (say: Internal server error) to the user if one of my hooks fails what is the best way to do this?"
"If I want to get the subdomain (and probably the domain too) of an incoming request, what is the best feathers way of doing that? I’d like to pass that info along in a hook that requests data. Is there something like hook.data.req.domain etc"
What is the best way to send a file as the response from a get call? I'm hoping to always return and download a file when I make a get request to one of my services.
"I’m building a call app that includes twilio functionality, what is the best way to have a feathers service return twiml instead of a json response and still have access to hooks and events?"
"$ feathers generate middleware
? What is the name of the Express middleware? history-api-fallback 
? What is the mount path? *
   create src/middleware/history-api-fallback.js
    force src/middleware/index.js
$ 

This is generated.
module.exports = function (options = {}) {
  return function historyApiFallback(req, res, next) {
    console.log('history-api-fallback  middleware is running');
    next();
  };
};

You can not use app.
module.exports = function (options = {}) {
  return function historyApiFallback(req, res, next) {
    const app = this
    console.log(app.get) // undefined
    console.log('history-api-fallback  middleware is running');
    next();
  };
};
"
"Hey. Wanna ask what if I wanna return a join table result rather than just the entity, should I modify the knex's query obj under before hook? what is the best practice?"
? What kind of service is it? Mongoose ? What is the name of the service? myCustom ? Which path should the service be registered on? /my-custom ? Does the service require authentication? No create src/services/my-custom/my-custom.service.js force src/services/index.js create src/models/my-custom.model.js create src/services/my-custom/my-custom.hooks.js create src/services/my-custom/my-custom.filters.js create test/services/my-custom.test.js
One doubt of mine after reviewing the services are what is the use of src/services/my-custom/my-custom.filters.js file ?
What is the intention behind the filtering ? Not getting from the doc . Which data to filter ? Input/Output ?
@daffl What is the setup(app) for? whether it's there or not the result is the same and the doc seem to say it should be done automatically.
❓ 🙋 What is the use of the value app.id?
"This brings up a question in my head... What is the difference between returning the hook, and returning nothing ? Does it make a difference ?"
"What is the preferred way to wild-card a path and its sub paths?
app.service(""/anthingdownhere/*"")  // something like this?
"
"use express middleware. I don't think you can do such dynamic paths in a service? There is a slugToParam hook which might come in handy though for /nothingdownhere/:ghost in case of service paths. Using the hook will assign param.ghost with the given data in the param. Still the service path is basically /nothingdownhere
What is the preferred way to wild-card a path and its sub paths?
app.service(""/anthingdownhere/*"")  // something like this?
"
"I call a long running Promise in a after create hook and pass hook.result to it. I do not wait until this Promise is resolved. The next after create hook deletes some data of the hook.result because of security reasons. I had some issues, because my long running Promise needs some of the deleted data from the hook.result, because I delete it in the next hook. What is the best way to solve this problem. Should I clone the hook.result object before passing it to the long running Promise? Of couse I could get() my complete data in my long running Promise, but is there maybe a better solution without an additional DB request?"
"Thanks, what is the difference between
require('feathers-authentication-hooks');

and
require('feathers-authentication').hooks

which used when importing authenticate method?"
"please i am a beginer with feathersjs , i want to do an login(username and password) by feathers authentication .this is my server.js file , please what is my error and what is the code which i should add to client ? app.use('/users', { find(params) { return Promise.resolve(Users); } }); app.service('authentication').hooks({ before: { create: [ auth.hooks.authenticate(['local', 'jwt']) ] } }); app.service('users').hooks({ before: { create: [ local.hooks.hashPassword() ] } }); ///////////////// app.post('/login', auth.express.authenticate('local', { successRedirect: '/app', failureRedirect: '/login' })); app.get('/app', (req, res, next) => { res.json({ success: true }); }); app.get('/login', (req, res, next) => { res.json({ success: false }); });"
"Hi, have a question, I use mongoose, let’s say I have a post model which has comment as a nested property, what is the feathers way to generate a service for CRUD the comment property given that I already have service for the post model? Should I just feathers generate service, then choose A custom service, and define the path as /post/:postID/comment. Then in the comment.class.js, implement my own logic, or is there a more feathers way than this? Thanks 🙂"
"what is the correct way to customize query in knex? this is simple i have two service 'users' and 'department' i want to search users by department name in users service
function (hook) {

  const query = this.createQuery({query : 
		 {department_name : 'test'}
		})

   query.join('department', ${this.table}.department_id, 'users.id');

   hook.params.knex = query;

}
i got the correct result in data. the problem is the result.total is different, i cant do pagination. And if i have some populate hook with schema
...
include : { service : 'department', parentField : 'department_id', childField : 'id'}
...

this no longer work"
"@baroudikilani I would use the feathers cli to create it: feathers g authentication then asks (note: I configured Google auth while at it)…
? What authentication providers do you want to use? Other PassportJS strategies 
not in this list can still be configured manually. Username + Password (Local), 
Google
? What is the name of the user (entity) service? users
? What kind of service is it? Sequelize
? Which database are you connecting to? PostgreSQL
? What is the database connection string?"
"what is the reason of this error 'message: ""the id property must be set on the entity service for authentication""'"
"Please who can to explain me what is the '/login' endpoint in app.post('/login', auth.express.authenticate('local', { successRedirect: '/app', failureRedirect: '/login' })) and how to use it ?"
"feathers g authentication? What authentication providers do you want to use? Other PassportJS strategies 
not in this list can still be configured manually. Username + Password (Local), 
Google
? What is the name of the user (entity) service? users
? What kind of service is it? Sequelize
? Which database are you connecting to? PostgreSQL
? What is the database connection string? postgres://postgres:@localhost:5432/fe
athers_app
"
How do I inject a query? Is there any hook? And what is the use of stashBefore hook and when to use it?
"I'm trying to follow: https://docs.feathersjs.com/guides/auth/recipe.oauth-basic.html the only difference is that I am not using the frontend client for now, I am using Postman which has the access_token. What is the url and params (cookie? json? url?) for feathersjs to log me in with this access_token from github?"
I do have the packages installed. What is the endpoint that receive the access_token and logs me in with it?
"Hello, i'm trying to achieve some thing like in this issue - https://github.com/feathersjs/authentication/issues/178 Could someone please provide some example or advice what is the correct and up-to-date way to get current user id server side? Or how to work with https://docs.feathersjs.com/api/authentication/hooks.html#querywithcurrentuser from server side, from expressjs routes"
what is the best way to pop element from array in db?
"I am trying to build a microservices architecture based on Feathers, what is the best way to create the API gateway? Should I create a custom service and use the request-promise module?"